{"ast":null,"code":"import { a as ne, b as g, c as K, d as ae, e as At, f as Z } from \"./chunk-6RQQT5UF.mjs\";\nimport { forwardRef as io, useMemo as ao, useRef as so } from \"react\";\nimport { useRef as Ut } from \"react\";\nfunction D(e) {\n  let {\n    current: t\n  } = Ut({\n    fn: e,\n    curr: void 0\n  });\n  if (t.fn = e, !t.curr) {\n    let n = Object.create(null);\n    Object.keys(e).forEach(o => {\n      n[o] = (...i) => t.fn[o].call(t.fn, ...i);\n    }), t.curr = n;\n  }\n  return t.curr;\n}\nimport { useReducer as Zt } from \"react\";\nfunction oe(e) {\n  return Zt((t, n) => g(g({}, t), typeof n == \"function\" ? n(t) : n), e);\n}\nimport { createContext as Gt } from \"react\";\nvar Fe = Gt(void 0);\nimport kt from \"styled-components\";\nimport Et from \"styled-components\";\nimport { css as Dt } from \"styled-components\";\nimport { forwardRef as Gn, useMemo as Qn, useRef as Jn, useState as eo } from \"react\";\nvar ot = \"cubic-bezier(0.25, 0.8, 0.25, 1)\",\n  Xt = \"ease\";\nvar ze = (e, t, n) => Math.max(Math.min(e, n), t),\n  ke = (e, t = !1, n = 0, o = 0) => ze(e, t ? .1 : 1 * (1 - o), Math.max(6, n) * (1 + o));\nimport { useEffect as en, useLayoutEffect as tn } from \"react\";\nvar nn = typeof window == \"undefined\" || /ServerSideRendering/.test(navigator && navigator.userAgent),\n  ge = nn ? en : tn;\nimport { useMemo as on } from \"react\";\nfunction rt(e, t, n) {\n  return on(() => {\n    let o = e.length;\n    if (n) {\n      let i = e.concat(e).concat(e),\n        a = i[o + t],\n        u = i.slice(o + t - 1, o + t + 2),\n        s = [];\n      for (let c = 0; c < u.length; c++) {\n        let f = u[c];\n        c !== 1 && f.key === a.key ? s.push(K(g({}, f), {\n          isCloned: !0\n        })) : s.push(f);\n      }\n      return s;\n    }\n    return e.slice(Math.max(t - 1, 0), Math.min(t + 2, o + 1));\n  }, [e, t, n]);\n}\nimport { useEffect as rn, useRef as an } from \"react\";\nfunction re(e, t, n) {\n  let o = an(t);\n  o.current = t, rn(() => {\n    function i(a) {\n      o.current(a);\n    }\n    return e && window.addEventListener(e, i, n), () => {\n      e && window.removeEventListener(e, i);\n    };\n  }, [e]);\n}\nimport { useReducer as un, useRef as ln } from \"react\";\nimport { useRef as sn, useMemo as cn } from \"react\";\nfunction it(e, t) {\n  let n = sn(e);\n  function o(i) {\n    n.current = i;\n  }\n  return cn(() => {\n    t(o);\n  }, [e]), [n.current, o];\n}\nfunction at(e, t) {\n  let [, n] = un(s => !s, !1),\n    o = ln(0),\n    [i, a] = it(e, s => {\n      e ? (s(e), o.current = 1) : o.current = 2;\n    });\n  function u() {\n    n(), o.current === 2 && (a(!1), t && t()), o.current = 0;\n  }\n  return [i, o.current, u];\n}\nimport st from \"styled-components\";\nimport { forwardRef as dn } from \"react\";\nimport { createPortal as mn } from \"react-dom\";\nimport { jsx as hn } from \"react/jsx-runtime\";\nvar fn = typeof st.default == \"undefined\" ? st : st.default,\n  _t = dn((o, n) => {\n    var i = o,\n      {\n        container: e = document.body\n      } = i,\n      t = ae(i, [\"container\"]);\n    return mn(hn(pn, g({\n      ref: n\n    }, t)), e);\n  });\n_t.displayName = \"SlidePortal\";\nvar Yt = _t,\n  pn = fn(\"div\").withConfig({\n    componentId: \"sc-1ab9qfp-0\"\n  })({\n    position: \"fixed\",\n    top: \"0px\",\n    left: \"0px\",\n    zIndex: \"50\",\n    height: \"100%\",\n    width: \"100%\",\n    touchAction: \"none\",\n    overflow: \"hidden\"\n  });\nimport { useEffect as bn } from \"react\";\nfunction ct() {\n  return bn(() => {\n    let {\n        style: e\n      } = document.body,\n      t = e.overflow;\n    return e.overflow = \"hidden\", () => {\n      e.overflow = t;\n    };\n  }, []), null;\n}\nimport Rt from \"styled-components\";\nimport { useRef as jn } from \"react\";\nfunction Ne(e) {\n  let {\n    clientX: t,\n    clientY: n\n  } = e.touches[0];\n  if (e.touches.length >= 2) {\n    let {\n      clientX: o,\n      clientY: i\n    } = e.touches[1];\n    return [(t + o) / 2, (n + i) / 2, Math.sqrt(ne(o - t, 2) + ne(i - n, 2))];\n  }\n  return [t, n, 0];\n}\nvar Ot = (e, t, n, o) => {\n    if (t && e === 1 || o === \"x\") return \"x\";\n    if (n && e > 1 || o === \"y\") return \"y\";\n  },\n  G = (e, t, n, o) => {\n    let i = n * t,\n      a = (i - o) / 2,\n      u,\n      s = e;\n    return i <= o ? (u = 1, s = 0) : e > 0 && a - e <= 0 ? (u = 2, s = a) : e < 0 && a + e <= 0 && (u = 3, s = -a), [u, s];\n  };\nfunction ve(e, t, n, o, i, a, u, s, c, f = innerWidth / 2, l = innerHeight / 2, h = 0, m = 0) {\n  let [d] = G(t, c, e ? a : o, innerWidth),\n    [R] = G(n, c, e ? u : i, innerHeight),\n    E = innerWidth / 2,\n    T = innerHeight / 2,\n    P = E + t,\n    C = T + n,\n    B = f - (f - P) * (c / s) - E,\n    v = l - (l - C) * (c / s) - T,\n    $ = (e ? u / a : i / o) >= 3 && (e ? a : o) * c === innerWidth;\n  return {\n    x: B + ($ ? 0 : d ? h / 2 : h),\n    y: v + (R ? m / 2 : m),\n    lastCX: f,\n    lastCY: l\n  };\n}\nfunction le(e, t, n) {\n  let o = e % 180 !== 0;\n  return o ? [n, t, o] : [t, n, o];\n}\nfunction Ee(e, t, n, o, i = 0) {\n  let [a, u, s] = le(o, innerWidth, innerHeight),\n    c = i,\n    f = a - i * 2,\n    l = u - i * 2,\n    h = t / n * u,\n    m = n / t * a;\n  t < a && n < u ? (f = t, l = n) : t < a && n >= u ? f = h : t >= a && n < u || t / n > a / u ? l = m : n / t >= 3 && !s ? (l = m, c = (l - u) / 2) : f = h;\n  let d = {\n    width: f,\n    height: l,\n    x: i,\n    y: c,\n    pause: !e\n  };\n  return e && (d.scale = Math.min(l / n, f / t, 1)), d;\n}\nimport { useCallback as gn, useRef as ut } from \"react\";\nfunction se(e, {\n  leading: t = !1,\n  maxWait: n,\n  wait: o = n || 0\n}) {\n  let i = ut(e);\n  i.current = e;\n  let a = ut(0),\n    u = ut(),\n    s = () => u.current && clearTimeout(u.current),\n    c = gn((...f) => {\n      let l = Date.now();\n      function h() {\n        a.current = l, s(), i.current.apply(null, f);\n      }\n      let m = a.current,\n        d = l - m;\n      if (m === 0 && (t && h(), a.current = l), n !== void 0) {\n        if (d > n) {\n          h();\n          return;\n        }\n      } else d < o && (a.current = l);\n      s(), u.current = setTimeout(() => {\n        h(), a.current = 0;\n      }, o);\n    }, [o, n, t]);\n  return c.cancel = s, c;\n}\nimport { useRef as vn } from \"react\";\nfunction lt(e, t) {\n  let n = vn(0),\n    o = se((...i) => {\n      n.current = 0, e(...i);\n    }, {\n      wait: 300\n    });\n  return function (...a) {\n    n.current += 1, o(...a), n.current >= 2 && (o.cancel(), n.current = 0, t(...a));\n  };\n}\nvar $t = (e, t, n) => fe(e, t, n, 400 / 4, o => o, () => fe(t, e, n));\nfunction ft(e, t, n) {\n  let o = D({\n    X: i => e(i),\n    Y: i => t(i),\n    S: i => n(i)\n  });\n  return (i, a, u, s, c, f, l, h, m, d, R, E, T) => {\n    let [P, C] = le(E, c, f),\n      [B, v] = G(i, d, P, innerWidth),\n      [$, J] = G(a, d, C, innerHeight),\n      S = Date.now() - T;\n    if (S >= 200 || d != m || Math.abs(R - m) > 1) {\n      let {\n          x: L,\n          y: O\n        } = ve(!1, i, a, c, f, l, h, m, d),\n        z = B ? v : L !== i ? L : null,\n        N = $ ? J : O !== a ? O : null;\n      z !== null && fe(i, z, o.X), N !== null && fe(a, N, o.Y), d != m && fe(m, d, o.S);\n      return;\n    }\n    let j = (i - u) / S,\n      I = (a - s) / S,\n      M = Math.sqrt(ne(j, 2) + ne(I, 2)),\n      y = !1,\n      A = !1;\n    Sn(M, L => {\n      let O = i + L * (j / M),\n        z = a + L * (I / M),\n        [N, W] = G(O, m, P, innerWidth),\n        [U, V] = G(z, m, C, innerHeight);\n      if (N && !y && (y = !0, B ? fe(O, W, o.X) : $t(W, O + (O - W), o.X)), U && !A && (A = !0, $ ? fe(z, V, o.Y) : $t(V, z + (z - V), o.Y)), y && A) return !1;\n      let H = y || o.X(W),\n        F = A || o.Y(V);\n      return H && F;\n    });\n  };\n}\nvar xn = -.001,\n  Tn = 2e-4;\nfunction Sn(e, t) {\n  let n = e,\n    o = 0,\n    i,\n    a = 0,\n    u = f => {\n      i || (i = f);\n      let l = f - i,\n        h = Math.sign(e),\n        m = h * xn,\n        d = Math.sign(-n) * ne(n, 2) * Tn,\n        R = n * l + (m + d) * ne(l, 2) / 2;\n      if (n = n + (m + d) * l, o = o + R, i = f, h * n <= 0) {\n        c();\n        return;\n      }\n      if (t(o)) {\n        s();\n        return;\n      }\n      c();\n    };\n  s();\n  function s() {\n    a = requestAnimationFrame(u);\n  }\n  function c() {\n    cancelAnimationFrame(a);\n  }\n}\nvar Rn = e => 1 - ne(1 - e, 4);\nfunction fe(e, t, n, o = 400, i = Rn, a) {\n  let u = t - e;\n  if (u === 0) return;\n  let s = Date.now(),\n    c = 0,\n    f = () => {\n      let h = Math.min(1, (Date.now() - s) / o);\n      if (n(e + i(h) * u) && h < 1) {\n        l();\n        return;\n      }\n      cancelAnimationFrame(c), h >= 1 && a && a();\n    };\n  l();\n  function l() {\n    c = requestAnimationFrame(f);\n  }\n}\nimport { useState as Lt, useEffect as Cn, useRef as Pn } from \"react\";\nvar wn = {\n  T: 0,\n  L: 0,\n  W: 0,\n  H: 0,\n  FIT: void 0\n};\nfunction dt(e, t, n, o, i, a) {\n  let [u, s] = Lt(wn),\n    [c, f] = Lt(e ? 3 : 0),\n    l = Pn(),\n    h = D({\n      OK: () => t && f(4)\n    });\n  Cn(() => {\n    if (l.current || (l.current = Date.now()), !!o && (kn(n, s), !e)) {\n      if (t) {\n        if (Date.now() - l.current < 250) {\n          f(1), requestAnimationFrame(() => {\n            f(2), requestAnimationFrame(() => m(3));\n          }), setTimeout(h.OK, i);\n          return;\n        }\n        f(4);\n        return;\n      }\n      m(5);\n    }\n  }, [t, o, e]);\n  function m(d) {\n    a(!1), f(d);\n  }\n  return [c, u];\n}\nfunction kn(e, t) {\n  let n = e && e.current;\n  if (n && n.nodeType === 1) {\n    let {\n        top: o,\n        left: i,\n        width: a,\n        height: u\n      } = n.getBoundingClientRect(),\n      s = n.tagName === \"IMG\";\n    t({\n      T: o,\n      L: i,\n      W: a,\n      H: u,\n      FIT: s ? getComputedStyle(n).objectFit : void 0\n    });\n  }\n}\nimport { useRef as En } from \"react\";\nfunction mt(e, t, n, o, i, a, u, s) {\n  let c = En(!1),\n    [{\n      lead: f,\n      scale: l\n    }, h] = oe({\n      lead: !0,\n      scale: a\n    }),\n    m = se(d => At(this, null, function* () {\n      s(!0), h({\n        lead: !1,\n        scale: d\n      });\n    }), {\n      wait: u\n    });\n  return ge(() => {\n    if (!c.current || e) {\n      c.current = !0;\n      return;\n    }\n    s(!1), h({\n      lead: !0\n    }), m(a);\n  }, [a, e]), e ? [o * a, i * a, a] : f ? [t * l, n * l, a / l] : [t * a, n * a, 1];\n}\nfunction pt(e, t, n, o, i, a, u, s, c, f, l, h, m) {\n  let [d, R, E] = mt(e, u, s, c, f, l, h, m),\n    [T, P] = dt(e, t, n, o, h, m),\n    {\n      T: C,\n      L: B,\n      W: v,\n      H: $,\n      FIT: J\n    } = P,\n    S = innerWidth / 2,\n    j = innerHeight / 2,\n    I = S - (e ? c : u) * l / 2,\n    M = j - (e ? f : s) * l / 2,\n    y = T < 3 || T > 4,\n    A = y ? v ? B : S : i + I,\n    L = y ? v ? C : j : a + M,\n    O = v / ((e ? c : u) * l) || .01,\n    z = y && J ? d * ($ / v) : R;\n  return [A, L, d, z, T === 0 ? E : y ? O : E, y ? J ? 1 : 0 : 1, T, J];\n}\nimport { useEffect as In, useRef as Mn } from \"react\";\nvar An = () => {\n    let e = Mn(!1);\n    return In(() => (e.current = !0, () => {\n      e.current = !1;\n    }), []), e;\n  },\n  Ve = An;\nimport yt from \"styled-components\";\nimport gt from \"styled-components\";\nimport vt from \"styled-components\";\nimport xt from \"styled-components\";\nimport { css as Wn } from \"styled-components\";\nimport \"react\";\nimport ht from \"styled-components\";\nimport \"react\";\nimport { keyframes as Wt } from \"styled-components\";\nimport { jsx as bt, jsxs as Ln } from \"react/jsx-runtime\";\nvar Xn = typeof ht.default == \"undefined\" ? ht : ht.default,\n  _n = Wt([\"from{transform:rotate(0deg);}to{transform:rotate(360deg);}\"]),\n  Yn = Wt([\"0%,50%{opacity:0;}100%{opacity:1;}\"]),\n  On = Xn.div.withConfig({\n    componentId: \"sc-7ci1r2-0\"\n  })([\"animation:\", \" 0.4s linear both;svg{animation:\", \" 0.6s linear infinite;}\"], Yn, _n);\nfunction $n(n) {\n  var o = n,\n    {\n      className: e\n    } = o,\n    t = ae(o, [\"className\"]);\n  return bt(On, K(g({\n    className: e\n  }, t), {\n    children: Ln(\"svg\", {\n      viewBox: \"0 0 32 32\",\n      width: \"36\",\n      height: \"36\",\n      fill: \"white\",\n      children: [bt(\"path\", {\n        opacity: \".25\",\n        d: \"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4\"\n      }), bt(\"path\", {\n        d: \"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z\"\n      })]\n    })\n  }));\n}\nvar Ft = $n;\nimport { Fragment as Vn, jsx as He, jsxs as Hn } from \"react/jsx-runtime\";\nvar di = typeof yt.default == \"undefined\" ? yt : yt.default,\n  pi = typeof gt.default == \"undefined\" ? gt : gt.default,\n  bi = typeof vt.default == \"undefined\" ? vt : vt.default,\n  Be = typeof xt.default == \"undefined\" ? xt : xt.default,\n  Tt = [{\n    position: \"absolute\",\n    left: \"0px\",\n    top: \"0px\",\n    display: \"inline-block\",\n    \"--tw-translate-x\": \"-50%\",\n    transform: \"translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))\",\n    \"--tw-translate-y\": \"-50%\"\n  }];\nfunction St(c) {\n  var f = c,\n    {\n      src: e,\n      loaded: t,\n      broken: n,\n      className: o,\n      onPhotoLoad: i,\n      loadingElement: a,\n      brokenElement: u\n    } = f,\n    s = ae(f, [\"src\", \"loaded\", \"broken\", \"className\", \"onPhotoLoad\", \"loadingElement\", \"brokenElement\"]);\n  let l = Ve();\n  function h(d) {\n    let {\n      naturalWidth: R,\n      naturalHeight: E\n    } = d.target;\n    l.current && i({\n      loaded: !0,\n      naturalWidth: R,\n      naturalHeight: E\n    });\n  }\n  function m() {\n    l.current && i({\n      broken: !0\n    });\n  }\n  return e && !n ? Hn(Vn, {\n    children: [He(Fn, K(g({\n      className: o,\n      src: e,\n      onLoad: h,\n      onError: m,\n      alt: \"\"\n    }, s), {\n      $_css2: [{\n        cursor: \"grab\",\n        \"--tw-bg-opacity\": \"1\",\n        backgroundColor: \"rgb(255 255 255 / var(--tw-bg-opacity))\",\n        \":active\": {\n          cursor: \"grabbing\"\n        }\n      }, Wn([\"max-width:initial;\"])]\n    })), !t && (He(zn, {\n      children: a\n    }) || He(Nn, {}))]\n  }) : u ? He(Dn, {\n    children: typeof u == \"function\" ? u({\n      src: e\n    }) : u\n  }) : null;\n}\nvar Fn = Be(\"img\").withConfig({\n    componentId: \"sc-r1gl4k-0\"\n  })([\"\", \"\"], e => e.$_css2),\n  zn = Be(\"span\").withConfig({\n    componentId: \"sc-r1gl4k-1\"\n  })([\"\", \"\"], Tt),\n  Nn = Be(Ft).withConfig({\n    componentId: \"sc-r1gl4k-2\"\n  })([\"\", \"\"], Tt),\n  Dn = Be(\"span\").withConfig({\n    componentId: \"sc-r1gl4k-3\"\n  })([\"\", \"\"], Tt);\nimport { jsx as Ct } from \"react/jsx-runtime\";\nvar Pt = typeof Rt.default == \"undefined\" ? Rt : Rt.default,\n  qn = {\n    naturalWidth: void 0,\n    naturalHeight: void 0,\n    width: void 0,\n    height: void 0,\n    loaded: void 0,\n    broken: !1,\n    x: 0,\n    y: 0,\n    touched: !1,\n    maskTouched: !1,\n    rotate: 0,\n    scale: 1,\n    CX: 0,\n    CY: 0,\n    lastX: 0,\n    lastY: 0,\n    lastCX: 0,\n    lastCY: 0,\n    lastScale: 1,\n    touchTime: 0,\n    touchLength: 0,\n    pause: !0,\n    stopRaf: !0,\n    reach: void 0\n  },\n  zt = Pt.div.withConfig({\n    componentId: \"sc-1mzwirp-0\"\n  })([\"\", \" direction:ltr\"], {\n    position: \"absolute\",\n    top: \"0px\",\n    right: \"0px\",\n    bottom: \"0px\",\n    left: \"0px\",\n    width: \"100%\",\n    touchAction: \"none\"\n  }),\n  Kn = Pt(zt).withConfig({\n    componentId: \"sc-1mzwirp-1\"\n  })(({\n    isDragMode: e\n  }) => [{\n    zIndex: \"10\"\n  }, !e && {\n    overflow: \"hidden\"\n  }]),\n  Un = Pt(zt).withConfig({\n    componentId: \"sc-1mzwirp-2\"\n  })([\"transform-origin:left top;\"]);\nfunction wt({\n  isDragMode: e = !1,\n  item: {\n    src: t,\n    render: n,\n    width: o = 0,\n    height: i = 0,\n    originRef: a\n  },\n  visible: u,\n  speed: s,\n  easing: c,\n  wrapClassName: f,\n  className: l,\n  style: h,\n  loadingElement: m,\n  brokenElement: d,\n  enableMouseZoom: R = !0,\n  onPhotoTap: E,\n  onMaskTap: T,\n  onReachMove: P,\n  onReachUp: C,\n  onPhotoResize: B,\n  isActive: v,\n  expose: $\n}) {\n  let [J, S] = oe(qn),\n    j = jn(0),\n    I = Ve(),\n    {\n      naturalWidth: M = o,\n      naturalHeight: y = i,\n      width: A = o,\n      height: L = i,\n      loaded: O = !t,\n      broken: z,\n      x: N,\n      y: W,\n      touched: U,\n      stopRaf: V,\n      maskTouched: H,\n      rotate: F,\n      scale: X,\n      CX: de,\n      CY: Te,\n      lastX: Se,\n      lastY: Re,\n      lastCX: Ie,\n      lastCY: me,\n      lastScale: Me,\n      touchTime: k,\n      touchLength: Ae,\n      pause: ee,\n      reach: ce\n    } = J,\n    pe = D({\n      onScale: r => q(ke(r, e)),\n      onRotate(r) {\n        F !== r && ($({\n          rotate: r\n        }), S(K(g({\n          rotate: r\n        }, Ee(e, M, y, r)), {\n          scale: X\n        })));\n      }\n    });\n  function q(r, b, Y) {\n    X !== r && ($({\n      scale: r\n    }), S(g(g({\n      scale: r\n    }, ve(e, N, W, A, L, M, y, X, r, b, Y)), (e ? r < .1 : r <= 1) ? {\n      x: 0,\n      y: 0\n    } : {})));\n  }\n  let he = se((r, b, Y = 0) => {\n    if ((U || H) && v) {\n      let [Pe, Qe] = le(F, A, L);\n      if (Y === 0 && j.current === 0) {\n        let te = Math.abs(r - de) <= 20,\n          nt = Math.abs(b - Te) <= 20;\n        if (te && nt) {\n          S({\n            lastCX: r,\n            lastCY: b\n          });\n          return;\n        }\n        j.current = te ? b > Te ? 3 : 2 : 1;\n      }\n      let Je = r - Ie,\n        et = b - me,\n        we;\n      if (Y === 0) {\n        let [te] = G(Je + Se, X, Pe, innerWidth),\n          [nt] = G(et + Re, X, Qe, innerHeight);\n        we = Ot(j.current, te, nt, ce), we !== void 0 && P(we, r, b, X);\n      }\n      if (we === \"x\" || H || e) {\n        let te = {\n          reach: \"x\"\n        };\n        e && (te.x = Se + Je, te.y = Re + et, te.pause = !1), S(te);\n        return;\n      }\n      let tt = ke(X + (Y - Ae) / 100 / 2 * X, e, M / A, .2);\n      $({\n        scale: tt\n      }), S(g({\n        touchLength: Y,\n        reach: we,\n        scale: tt\n      }, ve(e, N, W, A, L, M, y, X, tt, r, b, Je, et)));\n    }\n  }, {\n    maxWait: 8\n  });\n  function Q(r) {\n    return V || U ? !1 : (I.current && S(K(g({}, r), {\n      pause: u\n    })), I.current);\n  }\n  let qe = ft(r => Q({\n      x: r\n    }), r => Q({\n      y: r\n    }), r => (I.current && ($({\n      scale: r\n    }), S({\n      scale: r\n    })), !U && I.current)),\n    be = lt(E, (r, b) => {\n      if (!ce && !e) {\n        let Y = X !== 1 ? 1 : Math.max(2, M / A);\n        q(Y, r, b);\n      }\n    });\n  function ie(r, b) {\n    if (j.current = 0, (U || H) && v) {\n      S({\n        touched: !1,\n        maskTouched: !1,\n        pause: !1,\n        stopRaf: !1,\n        reach: void 0\n      });\n      let Y = ke(X, e, M / A);\n      if (e || qe(N, W, Se, Re, A, L, M, y, X, Y, Me, F, k), C(r, b), de === r && Te === b) {\n        if (U) {\n          be(r, b);\n          return;\n        }\n        H && T(r, b);\n      }\n    }\n  }\n  re(Z ? void 0 : \"mousemove\", r => {\n    r.preventDefault(), he(r.clientX, r.clientY);\n  }), re(Z ? void 0 : \"mouseup\", r => {\n    ie(r.clientX, r.clientY);\n  }), re(Z ? \"touchmove\" : void 0, r => {\n    r.preventDefault();\n    let b = Ne(r);\n    he(...b);\n  }, {\n    passive: !1\n  }), re(Z ? \"touchend\" : void 0, ({\n    changedTouches: r\n  }) => {\n    let b = r[0];\n    ie(b.clientX, b.clientY);\n  }, {\n    passive: !1\n  }), re(\"resize\", se(() => {\n    O && !U && (S(e ? {\n      x: 0,\n      y: 0\n    } : Ee(e, M, y, F)), B());\n  }, {\n    maxWait: 8\n  })), ge(() => {\n    v && $(g({\n      scale: X,\n      rotate: F,\n      loading: !O\n    }, pe));\n  }, [v]);\n  function Xe(r) {\n    let b = r.loaded ? Ee(e, r.naturalWidth || 0, r.naturalHeight || 0, F) : {};\n    e && r.loaded && v && $({\n      scale: b.scale,\n      loading: !1\n    }), S(g(g({}, r), b));\n  }\n  function _e(r, b, Y = 0) {\n    S({\n      touched: !0,\n      CX: r,\n      CY: b,\n      lastCX: r,\n      lastCY: b,\n      lastX: N,\n      lastY: W,\n      lastScale: X,\n      touchLength: Y,\n      touchTime: Date.now()\n    });\n  }\n  function Ke(r) {\n    if (!ce && R) {\n      let b = e ? r.deltaY / 100 / 16 : r.deltaY / 100 / 2,\n        Y = ke(X - b, e, M / A);\n      S({\n        stopRaf: !0\n      }), q(Y, r.clientX, r.clientY);\n    }\n  }\n  function Ye(r) {\n    S({\n      maskTouched: !0,\n      CX: r.clientX,\n      CY: r.clientY,\n      lastX: N,\n      lastY: W\n    });\n  }\n  function Ue(r) {\n    r.stopPropagation(), _e(...Ne(r));\n  }\n  function Ze(r) {\n    r.stopPropagation(), r.button === 0 && _e(r.clientX, r.clientY, 0);\n  }\n  let [Oe, Ce, $e, Le, ue, We, ye, Ge] = pt(e, u, a, O, N, W, A, L, M, y, X, s, r => S({\n      pause: r\n    })),\n    p = ye < 4 ? s / 2 : ye > 4 ? s : 0,\n    w = `transform ${s}ms ${c}`,\n    _ = {\n      className: l,\n      onMouseDown: Z ? void 0 : Ze,\n      onTouchStart: Z ? Ue : void 0,\n      onWheel: Ke,\n      style: {\n        width: $e,\n        height: Le,\n        opacity: We,\n        objectFit: ye === 4 ? void 0 : Ge,\n        transform: F ? `rotate(${F}deg)` : void 0,\n        transition: ye > 2 ? e ? `${w}, width ${p}ms ${c}, height ${p}ms ${c}` : `${w}, opacity ${s}ms ease, height ${p}ms ${c}` : void 0\n      }\n    };\n  return Ct(Kn, {\n    isDragMode: e,\n    className: f,\n    style: h,\n    onMouseDown: !Z && v ? Ye : void 0,\n    onTouchStart: Z && v ? r => Ye(r.touches[0]) : void 0,\n    children: Ct(Un, {\n      style: {\n        transform: e ? void 0 : `matrix(${ue}, 0, 0, ${ue}, ${Oe}, ${Ce})`,\n        left: e ? Oe : void 0,\n        top: e ? Ce : void 0,\n        transition: U || ee ? void 0 : e ? `left ${p}ms ${c}, top ${p}ms ${c}` : w,\n        willChange: v ? \"transform\" : void 0\n      },\n      children: t ? Ct(St, K(g({\n        src: t,\n        loaded: O,\n        broken: z\n      }, _), {\n        onPhotoLoad: Xe,\n        loadingElement: m,\n        brokenElement: d\n      })) : n && n({\n        attrs: _,\n        scale: ue,\n        rotate: F\n      })\n    })\n  });\n}\nimport { keyframes as to } from \"styled-components\";\nimport { jsx as je, jsxs as ro } from \"react/jsx-runtime\";\nvar Ji = typeof kt.default == \"undefined\" ? kt : kt.default,\n  Bt = typeof Et.default == \"undefined\" ? Et : Et.default,\n  Vt = {\n    loading: !1,\n    x: 0,\n    y: 0,\n    touched: !1,\n    pause: !1,\n    lastCX: void 0,\n    lastCY: void 0,\n    bg: void 0,\n    lastBg: void 0,\n    overlay: !0,\n    minimal: !0,\n    scale: 1,\n    rotate: 0\n  },\n  Ht = to([\"from{opacity:0;}to{opacity:1;}\"]),\n  jt = Gn((e, t) => {\n    let {\n        mode: n = \"slide\",\n        loop: o = 3,\n        speed: i,\n        easing: a,\n        photoClosable: u,\n        maskClosable: s = !0,\n        maskOpacity: c = 1,\n        pullClosable: f = !0,\n        overlayRender: l,\n        className: h,\n        maskClassName: m,\n        photoClassName: d,\n        photoWrapClassName: R,\n        loadingElement: E,\n        brokenElement: T,\n        images: P,\n        index: C = 0,\n        onIndexChange: B,\n        visible: v,\n        onClose: $,\n        afterClose: J,\n        portalContainer: S,\n        enableMouseZoom: j = !0\n      } = e,\n      I = Qn(() => Z ? !1 : n === \"drag\", [n]),\n      [M, y] = oe(Vt),\n      [A, L] = eo(0),\n      {\n        loading: O,\n        x: z,\n        y: N,\n        touched: W,\n        pause: U,\n        lastCX: V,\n        lastCY: H,\n        bg: F = c,\n        lastBg: X,\n        overlay: de,\n        minimal: Te,\n        scale: Se,\n        rotate: Re,\n        onScale: Ie,\n        onRotate: me\n      } = M,\n      Me = e.hasOwnProperty(\"index\"),\n      k = Me ? C : A,\n      Ae = Me ? B : L,\n      ee = Jn(k),\n      ce = P.length,\n      pe = P[k],\n      q = typeof o == \"boolean\" ? o : ce > o,\n      [he, Q, qe] = at(v, J);\n    ge(() => {\n      if (he) {\n        y({\n          pause: !0,\n          x: k * -(innerWidth + 20)\n        }), ee.current = k;\n        return;\n      }\n      y(Vt);\n    }, [he]);\n    let {\n      close: be,\n      changeIndex: ie\n    } = D({\n      close(p) {\n        me && me(0), y({\n          overlay: !0,\n          lastBg: F\n        }), $(p);\n      },\n      changeIndex(p, w = !1) {\n        let _ = q ? ee.current + (p - k) : p,\n          r = ce - 1,\n          b = ze(_, 0, r),\n          Y = q ? _ : b,\n          Pe = innerWidth + 20;\n        y({\n          touched: !1,\n          lastCX: void 0,\n          lastCY: void 0,\n          x: -Pe * Y,\n          pause: w\n        }), ee.current = Y;\n        let Qe = p < 0 ? r : p > r ? 0 : p;\n        Ae && Ae(q ? Qe : b);\n      }\n    });\n    re(\"keydown\", p => {\n      if (v) switch (p.key) {\n        case \"ArrowLeft\":\n          ie(k - 1, !0);\n          break;\n        case \"ArrowRight\":\n          ie(k + 1, !0);\n          break;\n        case \"Escape\":\n          be();\n          break;\n      }\n    });\n    function Xe(p) {\n      return p ? be() : y({\n        overlay: !de\n      });\n    }\n    function _e() {\n      y({\n        x: -(innerWidth + 20) * k,\n        lastCX: void 0,\n        lastCY: void 0,\n        pause: !I\n      }), ee.current = k;\n    }\n    function Ke(p, w) {\n      if (H === void 0) {\n        y({\n          touched: !0,\n          lastCY: p,\n          bg: F,\n          minimal: !0\n        });\n        return;\n      }\n      let _ = c === null ? null : ze(c, .01, c - Math.abs(p - H) / 100 / 4);\n      y({\n        touched: !0,\n        lastCY: H,\n        bg: w === 1 && !I ? _ : c,\n        minimal: w === 1\n      });\n    }\n    function Ye(p) {\n      if (V === void 0) {\n        y({\n          touched: !0,\n          lastCX: p,\n          x: z,\n          pause: !1\n        });\n        return;\n      }\n      let w = p - V,\n        _ = w;\n      !q && (k === 0 && w > 0 || k === ce - 1 && w < 0) && (_ = w / 2), y({\n        touched: !0,\n        lastCX: V,\n        x: -(innerWidth + 20) * ee.current + _,\n        pause: !1\n      });\n    }\n    function Ue(p, w, _, r) {\n      I || (p === \"x\" ? Ye(w) : p === \"y\" && Ke(_, r));\n    }\n    function Ze(p, w) {\n      let _ = p - (V != null ? V : p),\n        r = w - (H != null ? H : w);\n      if (I) {\n        y({\n          touched: !1\n        });\n        return;\n      }\n      let b = !1;\n      if (_ < -40) {\n        ie(k + 1);\n        return;\n      }\n      if (_ > 40) {\n        ie(k - 1);\n        return;\n      }\n      let Pe = -(innerWidth + 20) * ee.current;\n      Math.abs(r) > 100 && Te && f && (b = !0, be()), y({\n        touched: !1,\n        x: Pe,\n        lastCX: void 0,\n        lastCY: void 0,\n        bg: c,\n        overlay: b ? !0 : de\n      });\n    }\n    let Oe = rt(P, k, q);\n    if (!he) return null;\n    let Ce = de && !Q,\n      $e = v ? F : X,\n      Le = Ie && me && {\n        loading: O,\n        loop: q,\n        mode: I ? \"drag\" : \"slide\",\n        images: P,\n        index: k,\n        visible: v,\n        onClose: be,\n        onIndexChange: ie,\n        overlayVisible: Ce,\n        overlay: pe && pe.overlay,\n        scale: Se,\n        rotate: Re,\n        onScale: Ie,\n        onRotate: me\n      },\n      ue = i ? i(Q) : 400,\n      We = a ? a(Q) : I ? Xt : ot,\n      ye = i ? i(3) : 400 + 200,\n      Ge = a ? a(3) : ot;\n    return ro(Yt, {\n      ref: t,\n      className: h,\n      role: \"dialog\",\n      onClick: p => p.stopPropagation(),\n      container: S,\n      children: [v && je(ct, {}), je(no, {\n        className: m,\n        style: {\n          background: $e ? `rgba(0, 0, 0, ${$e})` : void 0,\n          transitionTimingFunction: We,\n          transitionDuration: `${W ? 0 : ue}ms`,\n          animationDuration: `${ue}ms`\n        },\n        onAnimationEnd: qe,\n        $_css2: [{\n          position: \"absolute\",\n          left: \"0px\",\n          top: \"0px\",\n          zIndex: \"-1\",\n          height: \"100%\",\n          width: \"100%\",\n          \"--tw-bg-opacity\": \"1\",\n          backgroundColor: \"rgb(0 0 0 / var(--tw-bg-opacity))\",\n          transitionProperty: \"background-color\",\n          transitionTimingFunction: \"cubic-bezier(0.4, 0, 0.2, 1)\",\n          transitionDuration: \"150ms\"\n        }, (Q === 1 || Q === 2) && {\n          opacity: \"0\"\n        }, Q === 1 && Dt([\"animation:\", \" linear both;\"], Ht), Q === 2 && Dt([\"animation:\", \" linear both reverse;\"], Ht)]\n      }), Oe.map((p, w) => {\n        let _ = !q && k === 0 ? k + w : ee.current - 1 + w,\n          r = !p.isCloned && (pe && pe.key) === p.key;\n        return je(wt, {\n          item: p,\n          speed: ue,\n          easing: We,\n          visible: v,\n          onReachMove: Ue,\n          onReachUp: Ze,\n          onPhotoTap: () => Xe(u),\n          onMaskTap: () => Xe(s),\n          isDragMode: I,\n          wrapClassName: R,\n          className: d,\n          style: {\n            opacity: I ? r ? 1 : 0 : void 0,\n            left: `${(innerWidth + 20) * _}px`,\n            transform: `translate3d(${z}px, ${N}px, 0)`,\n            transition: W || U ? void 0 : `transform ${ye}ms ${Ge}`\n          },\n          loadingElement: E,\n          brokenElement: T,\n          onPhotoResize: _e,\n          isActive: r,\n          expose: y,\n          enableMouseZoom: j\n        }, q ? `${p.key}/${p.src}/${_}` : p.key);\n      }), l && Le && je(oo, {\n        $_css3: [!Ce && {\n          opacity: \"0\"\n        }],\n        children: l(Le)\n      })]\n    });\n  });\njt.displayName = \"PhotoSlider\";\nvar It = jt,\n  no = Bt(\"div\").withConfig({\n    componentId: \"sc-12i02f7-0\"\n  })([\"\", \"\"], e => e.$_css2),\n  oo = Bt(\"div\").withConfig({\n    componentId: \"sc-12i02f7-1\"\n  })([\"\", \"\"], e => e.$_css3);\nimport { jsx as lo, jsxs as fo } from \"react/jsx-runtime\";\nvar co = {\n    images: [],\n    visible: !1,\n    index: 0\n  },\n  qt = io((a, i) => {\n    var u = a,\n      {\n        children: e,\n        onIndexChange: t,\n        onVisibleChange: n\n      } = u,\n      o = ae(u, [\"children\", \"onIndexChange\", \"onVisibleChange\"]);\n    let [s, c] = oe(co),\n      f = so(0),\n      {\n        images: l,\n        visible: h,\n        index: m\n      } = s,\n      d = D({\n        nextId() {\n          return f.current += 1;\n        },\n        update(T) {\n          let P = l.findIndex(C => C.key === T.key);\n          if (P > -1) {\n            let C = l.slice();\n            C.splice(P, 1, T), c({\n              images: C\n            });\n            return;\n          }\n          c(C => ({\n            images: C.images.concat(T)\n          }));\n        },\n        remove(T) {\n          c(P => {\n            let C = P.images.filter(v => v.key !== T),\n              B = C.length - 1;\n            return {\n              images: C,\n              index: Math.min(B, m)\n            };\n          });\n        },\n        show(T) {\n          let P = l.findIndex(C => C.key === T);\n          c({\n            visible: !0,\n            index: P\n          }), n && n(!0, P, s);\n        }\n      }),\n      R = D({\n        close() {\n          c({\n            visible: !1\n          }), n && n(!1, m, s);\n        },\n        changeIndex(T) {\n          c({\n            index: T\n          }), t && t(T, s);\n        }\n      }),\n      E = ao(() => g(g({}, s), d), [s, d]);\n    return fo(Fe.Provider, {\n      value: E,\n      children: [e, lo(It, g({\n        ref: i,\n        images: l,\n        visible: h,\n        index: m,\n        onIndexChange: R.changeIndex,\n        onClose: R.close\n      }, o))]\n    });\n  });\nqt.displayName = \"PhotoProvider\";\nvar uo = qt;\nimport { Children as po, cloneElement as ho, useContext as bo, useEffect as Kt, useMemo as yo, useRef as go } from \"react\";\nimport { useRef as mo } from \"react\";\nfunction Mt(e) {\n  let {\n    current: t\n  } = mo({\n    sign: !1,\n    fn: void 0\n  });\n  return t.sign || (t.sign = !0, t.fn = e()), t.fn;\n}\nvar vo = ({\n    src: e,\n    render: t,\n    overlay: n,\n    width: o,\n    height: i,\n    triggers: a = [\"onClick\"],\n    children: u\n  }) => {\n    let s = bo(Fe),\n      c = Mt(() => s.nextId()),\n      f = go(null);\n    Kt(() => () => {\n      s.remove(c);\n    }, []);\n    function l(d, R) {\n      if (u) {\n        let E = u.props[d];\n        E && E(R);\n      }\n    }\n    let h = D({\n        render(d) {\n          return t && t(d);\n        },\n        show(d, R) {\n          s.show(c), l(d, R);\n        }\n      }),\n      m = yo(() => {\n        let d = {};\n        return a.forEach(R => {\n          d[R] = h.show.bind(null, R);\n        }), d;\n      }, []);\n    return Kt(() => {\n      s.update({\n        key: c,\n        src: e,\n        originRef: f,\n        render: h.render,\n        overlay: n,\n        width: o,\n        height: i\n      });\n    }, [e]), u ? po.only(ho(u, K(g({}, m), {\n      ref: f\n    }))) : null;\n  },\n  xo = vo;\nexport { uo as PhotoProvider, It as PhotoSlider, xo as PhotoView };","map":{"version":3,"names":["forwardRef","io","useMemo","ao","useRef","so","Ut","D","e","current","t","fn","curr","n","Object","create","keys","forEach","o","i","call","useReducer","Zt","oe","g","createContext","Gt","Fe","kt","Et","css","Dt","Gn","Qn","Jn","useState","eo","ot","Xt","ze","limitNumber","Math","max","min","ke","limitScale","useEffect","en","useLayoutEffect","tn","nn","window","test","navigator","userAgent","ge","on","rt","length","concat","a","u","slice","s","c","f","key","push","K","isCloned","rn","an","re","addEventListener","removeEventListener","un","ln","sn","cn","it","at","st","dn","createPortal","mn","jsx","hn","default","_t","container","document","body","ae","pn","ref","displayName","Yt","withConfig","componentId","position","top","left","zIndex","height","width","touchAction","overflow","bn","ct","style","Rt","jn","Ne","clientX","clientY","touches","sqrt","ne","Ot","getReachType","G","computePositionEdge","ve","innerWidth","l","innerHeight","h","m","d","R","E","T","P","C","B","v","$","x","y","lastCX","lastCY","le","Ee","pause","scale","useCallback","gn","ut","se","leading","maxWait","wait","clearTrailing","clearTimeout","Date","now","apply","setTimeout","cancel","vn","lt","$t","rebound","fe","ft","X","Y","S","J","abs","L","O","z","N","j","I","M","A","Sn","W","U","V","H","F","xn","Tn","sign","requestAnimationFrame","cancelAnimationFrame","Rn","calcMove","Lt","Cn","Pn","wn","FIT","dt","OK","kn","nodeType","getBoundingClientRect","tagName","getComputedStyle","objectFit","En","mt","lead","At","pt","In","Mn","An","useMountedRef","Ve","yt","gt","vt","xt","Wn","ht","keyframes","Wt","bt","jsxs","Ln","Xn","_n","Yn","On","div","$n","className","children","viewBox","fill","opacity","Ft","Fragment","Vn","He","Hn","di","pi","bi","Be","Tt","display","transform","St","src","loaded","broken","onPhotoLoad","loadingElement","brokenElement","naturalWidth","naturalHeight","target","Fn","onLoad","onError","alt","$_css2","cursor","backgroundColor","zn","Nn","Dn","Ct","Pt","qn","touched","maskTouched","rotate","CX","CY","lastX","lastY","lastScale","touchTime","touchLength","stopRaf","reach","zt","right","bottom","Kn","isDragMode","Un","wt","item","render","originRef","visible","speed","easing","wrapClassName","enableMouseZoom","onPhotoTap","onMaskTap","onReachMove","onReachUp","onPhotoResize","isActive","expose","de","Te","Se","Re","Ie","me","Me","k","Ae","ee","ce","pe","onScale","r","q","onRotate","b","he","Pe","Qe","te","nt","Je","et","we","tt","Q","qe","be","ie","Z","preventDefault","passive","changedTouches","loading","Xe","_e","Ke","deltaY","Ye","Ue","stopPropagation","Ze","button","Oe","Ce","$e","Le","ue","We","ye","Ge","p","w","_","onMouseDown","onTouchStart","onWheel","transition","willChange","attrs","to","je","ro","Ji","Bt","Vt","bg","lastBg","overlay","minimal","Ht","jt","mode","loop","photoClosable","maskClosable","maskOpacity","pullClosable","overlayRender","maskClassName","photoClassName","photoWrapClassName","images","index","onIndexChange","onClose","afterClose","portalContainer","hasOwnProperty","close","changeIndex","overlayVisible","role","onClick","no","background","transitionTimingFunction","transitionDuration","animationDuration","onAnimationEnd","transitionProperty","map","oo","$_css3","It","lo","fo","co","qt","onVisibleChange","nextId","update","findIndex","splice","remove","filter","show","Provider","value","uo","Children","po","cloneElement","ho","useContext","bo","Kt","yo","go","mo","Mt","vo","PhotoView","triggers","props","bind","only","xo","PhotoProvider","PhotoSlider"],"sources":["/Users/weitaowu/Desktop/parkside/node_modules/react-image-previewer/src/PhotoProvider.tsx","/Users/weitaowu/Desktop/parkside/node_modules/react-image-previewer/src/hooks/useMethods.ts","/Users/weitaowu/Desktop/parkside/node_modules/react-image-previewer/src/hooks/useSetState.ts","/Users/weitaowu/Desktop/parkside/node_modules/react-image-previewer/src/photo-context.ts","/Users/weitaowu/Desktop/parkside/node_modules/react-image-previewer/src/PhotoSlider.tsx","/Users/weitaowu/Desktop/parkside/node_modules/react-image-previewer/src/variables.ts","/Users/weitaowu/Desktop/parkside/node_modules/react-image-previewer/src/utils/limitTarget.ts","/Users/weitaowu/Desktop/parkside/node_modules/react-image-previewer/src/hooks/useIsomorphicLayoutEffect.ts","/Users/weitaowu/Desktop/parkside/node_modules/react-image-previewer/src/hooks/useAdjacentImages.ts","/Users/weitaowu/Desktop/parkside/node_modules/react-image-previewer/src/hooks/useEventListener.ts","/Users/weitaowu/Desktop/parkside/node_modules/react-image-previewer/src/hooks/useAnimationVisible.tsx","/Users/weitaowu/Desktop/parkside/node_modules/react-image-previewer/src/hooks/useForkedVariable.ts","/Users/weitaowu/Desktop/parkside/node_modules/react-image-previewer/src/components/SlidePortal.tsx","/Users/weitaowu/Desktop/parkside/node_modules/react-image-previewer/src/components/PreventScroll.tsx","/Users/weitaowu/Desktop/parkside/node_modules/react-image-previewer/src/PhotoBox.tsx","/Users/weitaowu/Desktop/parkside/node_modules/react-image-previewer/src/utils/getMultipleTouchPosition.ts","/Users/weitaowu/Desktop/parkside/node_modules/react-image-previewer/src/utils/edgeHandle.ts","/Users/weitaowu/Desktop/parkside/node_modules/react-image-previewer/src/utils/getPositionOnMoveOrScale.ts","/Users/weitaowu/Desktop/parkside/node_modules/react-image-previewer/src/utils/getRotateSize.ts","/Users/weitaowu/Desktop/parkside/node_modules/react-image-previewer/src/utils/getSuitableImageSize.ts","/Users/weitaowu/Desktop/parkside/node_modules/react-image-previewer/src/hooks/useDebounceCallback.ts","/Users/weitaowu/Desktop/parkside/node_modules/react-image-previewer/src/hooks/useContinuousTap.ts","/Users/weitaowu/Desktop/parkside/node_modules/react-image-previewer/src/hooks/useScrollPosition.ts","/Users/weitaowu/Desktop/parkside/node_modules/react-image-previewer/src/hooks/useAnimationOrigin.tsx","/Users/weitaowu/Desktop/parkside/node_modules/react-image-previewer/src/hooks/useTargetScale.ts","/Users/weitaowu/Desktop/parkside/node_modules/react-image-previewer/src/hooks/useAnimationPosition.ts","/Users/weitaowu/Desktop/parkside/node_modules/react-image-previewer/src/hooks/useMountedRef.ts","/Users/weitaowu/Desktop/parkside/node_modules/react-image-previewer/src/Photo.tsx","/Users/weitaowu/Desktop/parkside/node_modules/react-image-previewer/src/components/Spinner.tsx","/Users/weitaowu/Desktop/parkside/node_modules/react-image-previewer/src/PhotoView.tsx","/Users/weitaowu/Desktop/parkside/node_modules/react-image-previewer/src/hooks/useInitial.ts"],"sourcesContent":["import React, { forwardRef, useMemo, useRef } from 'react'\nimport type { DataType, PhotoProviderBase } from './types'\nimport useMethods from './hooks/useMethods'\nimport useSetState from './hooks/useSetState'\nimport PhotoContext from './photo-context'\nimport PhotoSlider from './PhotoSlider'\nimport { SlidePortalRef } from './components/SlidePortal'\n\nexport interface PhotoProviderProps extends PhotoProviderBase {\n  children: React.ReactNode\n  onIndexChange?: (index: number, state: PhotoProviderState) => void\n  onVisibleChange?: (visible: boolean, index: number, state: PhotoProviderState) => void\n}\n\ntype PhotoProviderState = {\n  images: DataType[]\n  visible: boolean\n  index: number\n}\n\nconst initialState: PhotoProviderState = {\n  images: [],\n  visible: false,\n  index: 0,\n}\n\nconst PhotoProvider = forwardRef<SlidePortalRef, PhotoProviderProps>(\n  ({ children, onIndexChange, onVisibleChange, ...restProps }, ref) => {\n    const [state, updateState] = useSetState(initialState)\n    const uniqueIdRef = useRef(0)\n    const { images, visible, index } = state\n\n    const methods = useMethods({\n      nextId() {\n        return (uniqueIdRef.current += 1)\n      },\n      update(imageItem: DataType) {\n        const currentIndex = images.findIndex(n => n.key === imageItem.key)\n        if (currentIndex > -1) {\n          const nextImages = images.slice()\n          nextImages.splice(currentIndex, 1, imageItem)\n          updateState({\n            images: nextImages,\n          })\n          return\n        }\n        updateState(prev => ({\n          images: prev.images.concat(imageItem),\n        }))\n      },\n      remove(key: number) {\n        updateState(prev => {\n          const nextImages = prev.images.filter(item => item.key !== key)\n          const nextEndIndex = nextImages.length - 1\n          return {\n            images: nextImages,\n            index: Math.min(nextEndIndex, index),\n          }\n        })\n      },\n      show(key: number) {\n        const currentIndex = images.findIndex(item => item.key === key)\n        updateState({\n          visible: true,\n          index: currentIndex,\n        })\n        if (onVisibleChange) {\n          onVisibleChange(true, currentIndex, state)\n        }\n      },\n    })\n\n    const fn = useMethods({\n      close() {\n        updateState({\n          visible: false,\n        })\n\n        if (onVisibleChange) {\n          onVisibleChange(false, index, state)\n        }\n      },\n      changeIndex(nextIndex: number) {\n        updateState({\n          index: nextIndex,\n        })\n\n        if (onIndexChange) {\n          onIndexChange(nextIndex, state)\n        }\n      },\n    })\n\n    const value = useMemo(() => ({ ...state, ...methods }), [state, methods])\n\n    return (\n      <PhotoContext.Provider value={value}>\n        {children}\n        <PhotoSlider\n          ref={ref}\n          images={images}\n          visible={visible}\n          index={index}\n          onIndexChange={fn.changeIndex}\n          onClose={fn.close}\n          {...restProps}\n        />\n      </PhotoContext.Provider>\n    )\n  },\n)\nPhotoProvider.displayName = 'PhotoProvider'\nexport default PhotoProvider\n","import { useRef } from 'react'\n\n/**\n * Hook of persistent methods\n */\nexport default function useMethods<T extends Record<string, (...args: any[]) => any>>(fn: T) {\n  const { current } = useRef({\n    fn,\n    curr: undefined as T | undefined,\n  })\n  current.fn = fn\n\n  if (!current.curr) {\n    const curr = Object.create(null)\n    Object.keys(fn).forEach(key => {\n      curr[key] = (...args: unknown[]) => current.fn[key].call(current.fn, ...args)\n    })\n    current.curr = curr\n  }\n\n  return current.curr as T\n}\n","import { useReducer } from 'react'\n\nexport default function useSetState<S extends Record<string, any>>(initialState: S) {\n  return useReducer(\n    (state: S, action: Partial<S> | ((state: S) => Partial<S>)) => ({\n      ...state,\n      ...(typeof action === 'function' ? action(state) : action),\n    }),\n    initialState,\n  )\n}\n","import { createContext } from 'react'\nimport type { DataType } from './types'\n\nexport type UpdateItemType = (dataType: DataType) => void\n\nexport interface PhotoContextType {\n  show: (key: number) => void\n  update: UpdateItemType\n  remove: (key: number) => void\n  nextId: () => number\n}\n\nexport default createContext<PhotoContextType>(undefined as unknown as PhotoContextType)\n","import _styled2styled_components from 'styled-components';\n            const _styled2 = typeof _styled2styled_components.default === 'undefined' ? _styled2styled_components : _styled2styled_components.default;;\nimport _styledstyled_components from 'styled-components';\n            const _styled = typeof _styledstyled_components.default === 'undefined' ? _styledstyled_components : _styledstyled_components.default;;\nimport { css as _css } from \"styled-components\";\nimport React, { forwardRef, useMemo, useRef, useState } from 'react';\nimport { defaultEasing, defaultSpeed, defaultOpacity, horizontalOffset, maxMoveOffset, defaultDragEasing } from './variables';\nimport isTouchDevice from './utils/isTouchDevice';\nimport { limitNumber } from './utils/limitTarget';\nimport useIsomorphicLayoutEffect from './hooks/useIsomorphicLayoutEffect';\nimport useAdjacentImages from './hooks/useAdjacentImages';\nimport useSetState from './hooks/useSetState';\nimport useEventListener from './hooks/useEventListener';\nimport useAnimationVisible from './hooks/useAnimationVisible';\nimport useMethods from './hooks/useMethods';\nimport SlidePortal from './components/SlidePortal';\nimport PreventScroll from './components/PreventScroll';\nimport PhotoBox from './PhotoBox';\nimport { keyframes } from 'styled-components';\nconst initialState = {\n  loading: false,\n  x: 0,\n  y: 0,\n  touched: false,\n  pause: false,\n  lastCX: undefined,\n  lastCY: undefined,\n  bg: undefined,\n  lastBg: undefined,\n  overlay: true,\n  minimal: true,\n  scale: 1,\n  rotate: 0\n};\nconst fade = keyframes([\"from{opacity:0;}to{opacity:1;}\"]);\nconst PhotoSlider = forwardRef((props, ref) => {\n  const {\n    mode: modeProp = 'slide',\n    loop = 3,\n    speed: speedFn,\n    easing: easingFn,\n    photoClosable,\n    maskClosable = true,\n    maskOpacity = defaultOpacity,\n    pullClosable = true,\n    overlayRender,\n    className,\n    maskClassName,\n    photoClassName,\n    photoWrapClassName,\n    loadingElement,\n    brokenElement,\n    images,\n    index: controlledIndex = 0,\n    onIndexChange: controlledIndexChange,\n    visible,\n    onClose,\n    afterClose,\n    portalContainer,\n    enableMouseZoom = true\n  } = props;\n  const isDragMode = useMemo(() => {\n    if (isTouchDevice) return false;\n    return modeProp === 'drag';\n  }, [modeProp]);\n  const [state, updateState] = useSetState(initialState);\n  const [innerIndex, updateInnerIndex] = useState(0);\n  const {\n    loading,\n    x,\n    y,\n    touched,\n    pause,\n    lastCX,\n    lastCY,\n    bg = maskOpacity,\n    lastBg,\n    overlay,\n    minimal,\n    scale,\n    rotate,\n    onScale,\n    onRotate\n  } = state;\n  // 受控 index\n  const isControlled = props.hasOwnProperty('index');\n  const index = isControlled ? controlledIndex : innerIndex;\n  const onIndexChange = isControlled ? controlledIndexChange : updateInnerIndex;\n  // 内部虚拟 index\n  const virtualIndexRef = useRef(index);\n\n  // 当前图片\n  const imageLength = images.length;\n  const currentImage = images[index];\n\n  // 是否开启\n  // noinspection SuspiciousTypeOfGuard\n  const enableLoop = typeof loop === 'boolean' ? loop : imageLength > loop;\n\n  // 显示动画处理\n  const [realVisible, activeAnimation, onAnimationEnd] = useAnimationVisible(visible, afterClose);\n  useIsomorphicLayoutEffect(() => {\n    // 显示弹出层，修正正确的指向\n    if (realVisible) {\n      updateState({\n        pause: true,\n        x: index * -(innerWidth + horizontalOffset)\n      });\n      virtualIndexRef.current = index;\n      return;\n    }\n    // 关闭后清空状态\n    updateState(initialState);\n  }, [realVisible]);\n  const {\n    close,\n    changeIndex\n  } = useMethods({\n    close(evt) {\n      if (onRotate) {\n        onRotate(0);\n      }\n      updateState({\n        overlay: true,\n        // 记录当前关闭时的透明度\n        lastBg: bg\n      });\n      onClose(evt);\n    },\n    changeIndex(nextIndex, isPause = false) {\n      // 当前索引\n      const currentIndex = enableLoop ? virtualIndexRef.current + (nextIndex - index) : nextIndex;\n      const max = imageLength - 1;\n      // 虚拟 index\n      // 非循环模式，限制区间\n      const limitIndex = limitNumber(currentIndex, 0, max);\n      const nextVirtualIndex = enableLoop ? currentIndex : limitIndex;\n      // 单个屏幕宽度\n      const singlePageWidth = innerWidth + horizontalOffset;\n      updateState({\n        touched: false,\n        lastCX: undefined,\n        lastCY: undefined,\n        x: -singlePageWidth * nextVirtualIndex,\n        pause: isPause\n      });\n      virtualIndexRef.current = nextVirtualIndex;\n      // 更新真实的 index\n      const realLoopIndex = nextIndex < 0 ? max : nextIndex > max ? 0 : nextIndex;\n      if (onIndexChange) {\n        onIndexChange(enableLoop ? realLoopIndex : limitIndex);\n      }\n    }\n  });\n  useEventListener('keydown', evt => {\n    if (visible) {\n      switch (evt.key) {\n        case 'ArrowLeft':\n          changeIndex(index - 1, true);\n          break;\n        case 'ArrowRight':\n          changeIndex(index + 1, true);\n          break;\n        case 'Escape':\n          close();\n          break;\n      }\n    }\n  });\n  function handlePhotoTap(closeable) {\n    return closeable ? close() : updateState({\n      overlay: !overlay\n    });\n  }\n  function handleResize() {\n    updateState({\n      x: -(innerWidth + horizontalOffset) * index,\n      lastCX: undefined,\n      lastCY: undefined,\n      pause: isDragMode ? false : true\n    });\n    virtualIndexRef.current = index;\n  }\n  function handleReachVerticalMove(clientY, nextScale) {\n    if (lastCY === undefined) {\n      updateState({\n        touched: true,\n        lastCY: clientY,\n        bg,\n        minimal: true\n      });\n      return;\n    }\n    const opacity = maskOpacity === null ? null : limitNumber(maskOpacity, 0.01, maskOpacity - Math.abs(clientY - lastCY) / 100 / 4);\n    updateState({\n      touched: true,\n      lastCY,\n      bg: nextScale === 1 && !isDragMode ? opacity : maskOpacity,\n      minimal: nextScale === 1\n    });\n  }\n  function handleReachHorizontalMove(clientX) {\n    if (lastCX === undefined) {\n      updateState({\n        touched: true,\n        lastCX: clientX,\n        x,\n        pause: false\n      });\n      return;\n    }\n    const originOffsetClientX = clientX - lastCX;\n    let offsetClientX = originOffsetClientX;\n\n    // 第一张和最后一张超出距离减半\n    if (!enableLoop && (index === 0 && originOffsetClientX > 0 || index === imageLength - 1 && originOffsetClientX < 0)) {\n      offsetClientX = originOffsetClientX / 2;\n    }\n    updateState({\n      touched: true,\n      lastCX: lastCX,\n      x: -(innerWidth + horizontalOffset) * virtualIndexRef.current + offsetClientX,\n      pause: false\n    });\n  }\n  function handleReachMove(reachPosition, clientX, clientY, nextScale) {\n    if (isDragMode) {\n      // handleReachDragMove\n    } else if (reachPosition === 'x') {\n      handleReachHorizontalMove(clientX);\n    } else if (reachPosition === 'y') {\n      handleReachVerticalMove(clientY, nextScale);\n    }\n  }\n  function handleReachUp(clientX, clientY) {\n    const offsetClientX = clientX - (lastCX ?? clientX);\n    const offsetClientY = clientY - (lastCY ?? clientY);\n    if (isDragMode) {\n      updateState({\n        touched: false\n      });\n      return;\n    }\n    let willClose = false;\n    // 下一张\n    if (offsetClientX < -maxMoveOffset) {\n      changeIndex(index + 1);\n      return;\n    }\n    // 上一张\n    if (offsetClientX > maxMoveOffset) {\n      changeIndex(index - 1);\n      return;\n    }\n    const singlePageWidth = innerWidth + horizontalOffset;\n    // 当前偏移\n    const currentTranslateX = -singlePageWidth * virtualIndexRef.current;\n    if (Math.abs(offsetClientY) > 100 && minimal && pullClosable) {\n      willClose = true;\n      close();\n    }\n    updateState({\n      touched: false,\n      x: currentTranslateX,\n      lastCX: undefined,\n      lastCY: undefined,\n      bg: maskOpacity,\n      overlay: willClose ? true : overlay\n    });\n  }\n  // 截取相邻的图片\n  const adjacentImages = useAdjacentImages(images, index, enableLoop);\n  if (!realVisible) {\n    return null;\n  }\n  const currentOverlayVisible = overlay && !activeAnimation;\n  // 关闭过程中使用下拉保存的透明度\n  const currentOpacity = visible ? bg : lastBg;\n  // 覆盖物参数\n  const overlayParams = onScale && onRotate && {\n    loading,\n    loop: enableLoop,\n    mode: isDragMode ? 'drag' : 'slide',\n    images,\n    index,\n    visible,\n    onClose: close,\n    onIndexChange: changeIndex,\n    overlayVisible: currentOverlayVisible,\n    overlay: currentImage && currentImage.overlay,\n    scale,\n    rotate,\n    onScale,\n    onRotate\n  };\n  // 动画时间\n  const currentSpeed = speedFn ? speedFn(activeAnimation) : defaultSpeed;\n  const currentEasing = easingFn ? easingFn(activeAnimation) : isDragMode ? defaultDragEasing : defaultEasing;\n  const slideSpeed = speedFn ? speedFn(3) : defaultSpeed + 200;\n  const slideEasing = easingFn ? easingFn(3) : defaultEasing;\n  return <SlidePortal ref={ref} className={className} role=\"dialog\" onClick={e => e.stopPropagation()} container={portalContainer}>\n        {visible && <PreventScroll />}\n        <_StyledDiv className={maskClassName} style={{\n      background: currentOpacity ? `rgba(0, 0, 0, ${currentOpacity})` : undefined,\n      transitionTimingFunction: currentEasing,\n      transitionDuration: `${touched ? 0 : currentSpeed}ms`,\n      animationDuration: `${currentSpeed}ms`\n    }} onAnimationEnd={onAnimationEnd} $_css2={[{\n      \"position\": \"absolute\",\n      \"left\": \"0px\",\n      \"top\": \"0px\",\n      \"zIndex\": \"-1\",\n      \"height\": \"100%\",\n      \"width\": \"100%\",\n      \"--tw-bg-opacity\": \"1\",\n      \"backgroundColor\": \"rgb(0 0 0 / var(--tw-bg-opacity))\",\n      \"transitionProperty\": \"background-color\",\n      \"transitionTimingFunction\": \"cubic-bezier(0.4, 0, 0.2, 1)\",\n      \"transitionDuration\": \"150ms\"\n    }, (activeAnimation === 1 || activeAnimation === 2) && {\n      \"opacity\": \"0\"\n    }, activeAnimation === 1 && _css([\"animation:\", \" linear both;\"], fade), activeAnimation === 2 && _css([\"animation:\", \" linear both reverse;\"], fade)]} />\n        {adjacentImages.map((item, currentIndex) => {\n      // 截取之前的索引位置\n      const nextIndex = !enableLoop && index === 0 ? index + currentIndex : virtualIndexRef.current - 1 + currentIndex;\n      const isActive = !item.isCloned && (currentImage && currentImage.key) === item.key;\n      return <PhotoBox key={enableLoop ? `${item.key}/${item.src}/${nextIndex}` : item.key} item={item} speed={currentSpeed} easing={currentEasing} visible={visible} onReachMove={handleReachMove} onReachUp={handleReachUp} onPhotoTap={() => handlePhotoTap(photoClosable)} onMaskTap={() => handlePhotoTap(maskClosable)} isDragMode={isDragMode} wrapClassName={photoWrapClassName} className={photoClassName} style={{\n        opacity: isDragMode ? isActive ? 1 : 0 : undefined,\n        left: `${(innerWidth + horizontalOffset) * nextIndex}px`,\n        transform: `translate3d(${x}px, ${y}px, 0)`,\n        transition: touched || pause ? undefined : `transform ${slideSpeed}ms ${slideEasing}`\n      }} loadingElement={loadingElement} brokenElement={brokenElement} onPhotoResize={handleResize} isActive={isActive} expose={updateState} enableMouseZoom={enableMouseZoom} />;\n    })}\n        {overlayRender && overlayParams && <_StyledDiv2 $_css3={[!currentOverlayVisible && {\n      \"opacity\": \"0\"\n    }]}>{overlayRender(overlayParams)}</_StyledDiv2>}\n      </SlidePortal>;\n});\nPhotoSlider.displayName = 'PhotoSlider';\nexport default PhotoSlider;\nvar _StyledDiv = _styled(\"div\").withConfig({\n  componentId: \"sc-12i02f7-0\"\n})([\"\", \"\"], p => p.$_css2);\nvar _StyledDiv2 = _styled(\"div\").withConfig({\n  componentId: \"sc-12i02f7-1\"\n})([\"\", \"\"], p => p.$_css3);","/**\n * 最大触摸时间\n */\nexport const maxTouchTime = 200\n\n/**\n * 默认动画速度\n */\nexport const defaultSpeed = 400\n\n/**\n * 默认动画函数\n */\nexport const defaultEasing = 'cubic-bezier(0.25, 0.8, 0.25, 1)'\n\n/**\n * 默认拖拽动画函数\n */\nexport const defaultDragEasing = 'ease'\n\n/**\n * 最大滑动切换图片距离\n */\nexport const maxMoveOffset = 40\n\n/**\n * 图片的间隔\n */\nexport const horizontalOffset = 20\n\n/**\n * 最小初始响应距离\n */\nexport const minStartTouchOffset = 20\n\n/**\n * 默认背景透明度\n */\nexport const defaultOpacity = 1\n\n/**\n * 最小缩放度\n */\nexport const minScale = 1\n\n/**\n * 拖拽模式最小缩放度\n */\nexport const minDragScale = 0.1\n\n/**\n * 最大缩放度（若图片足够大，则会超出）\n */\nexport const maxScale = 6\n\n/**\n * 最小长图模式比例\n */\nexport const longModeRatio = 3\n\n/**\n * 缩放弹性缓冲\n */\nexport const scaleBuffer = 0.2\n\n/**\n * 最大等待动画时间\n */\nexport const maxWaitAnimationTime = 250\n","import { maxScale, minDragScale, minScale } from '../variables'\n\nexport const limitNumber = (value: number, min: number, max: number) => {\n  return Math.max(Math.min(value, max), min)\n}\n\n/**\n * 限制最大/最小缩放\n */\nexport const limitScale = (\n  scale: number,\n  isDragMode = false,\n  max: number = 0,\n  buffer: number = 0,\n) => {\n  return limitNumber(\n    scale,\n    isDragMode ? minDragScale : minScale * (1 - buffer),\n    Math.max(maxScale, max) * (1 + buffer),\n  )\n}\n","import { useEffect, useLayoutEffect } from 'react'\n\nconst isSSR =\n  typeof window === 'undefined' || /ServerSideRendering/.test(navigator && navigator.userAgent)\n\nexport default isSSR ? useEffect : useLayoutEffect\n","import { useMemo } from 'react'\nimport type { DataType } from '../types'\n\ninterface AdjacentDataType extends DataType {\n  /**\n   * 是否是克隆的\n   */\n  isCloned?: boolean\n}\n\n/**\n * 截取相邻三张图片\n */\nexport default function useAdjacentImages(\n  images: DataType[],\n  index: number,\n  loop: boolean,\n): AdjacentDataType[] {\n  return useMemo(() => {\n    const imageLength = images.length\n    if (loop) {\n      const connected = images.concat(images).concat(images)\n      const currentImage = connected[imageLength + index]\n      const sliceImages: AdjacentDataType[] = connected.slice(\n        imageLength + index - 1,\n        imageLength + index + 2,\n      )\n\n      const adjacentImages: AdjacentDataType[] = []\n\n      for (let i = 0; i < sliceImages.length; i++) {\n        const image = sliceImages[i]\n        if (i !== 1 && image.key === currentImage.key) {\n          adjacentImages.push({ ...image, isCloned: true })\n        } else {\n          adjacentImages.push(image)\n        }\n      }\n      return adjacentImages\n    }\n    return images.slice(Math.max(index - 1, 0), Math.min(index + 2, imageLength + 1))\n  }, [images, index, loop])\n}\n","import { useEffect, useRef } from 'react'\n\nexport default function useEventListener<K extends keyof WindowEventMap>(\n  type: K | undefined,\n  fn: (evt: WindowEventMap[K]) => void,\n  options?: AddEventListenerOptions,\n) {\n  const latest = useRef(fn)\n  latest.current = fn\n\n  useEffect(() => {\n    function wrapper(evt: WindowEventMap[K]) {\n      latest.current(evt)\n    }\n    if (type) {\n      window.addEventListener(type, wrapper, options)\n    }\n    return () => {\n      if (type) {\n        window.removeEventListener(type, wrapper)\n      }\n    }\n  }, [type])\n}\n","import { useReducer, useRef } from 'react'\nimport type { ActiveAnimationType } from '../types'\nimport useForkedVariable from './useForkedVariable'\n\n/**\n * 动画关闭处理真实关闭状态\n * 通过 onAnimationEnd 回调实现 leaveCallback\n */\nexport default function useAnimationVisible(\n  visible: boolean | undefined,\n  afterClose?: () => void,\n): [\n  realVisible: boolean | undefined,\n  activeAnimation: ActiveAnimationType,\n  onAnimationEnd: () => void,\n] {\n  const [, handleRender] = useReducer(c => !c, false)\n\n  const activeAnimation = useRef<ActiveAnimationType>(0)\n\n  // 可见状态分支\n  const [realVisible, modifyRealVisible] = useForkedVariable(visible, modify => {\n    // 可见状态：设置进入动画\n    if (visible) {\n      modify(visible)\n      activeAnimation.current = 1\n    } else {\n      activeAnimation.current = 2\n    }\n  })\n\n  function onAnimationEnd() {\n    // 动画结束后触发渲染\n    handleRender()\n    // 结束动画：设置隐藏状态\n    if (activeAnimation.current === 2) {\n      modifyRealVisible(false)\n      // 触发隐藏回调\n      if (afterClose) {\n        afterClose()\n      }\n    }\n    // 重置状态\n    activeAnimation.current = 0\n  }\n\n  return [\n    /**\n     * 真实可见状态\n     */\n    realVisible,\n    /**\n     * 正在进行的动画\n     */\n    activeAnimation.current,\n    /**\n     * 动画结束后回调\n     */\n    onAnimationEnd,\n  ]\n}\n","import { useRef, useMemo } from 'react'\n\n/**\n * 逻辑分叉变量处理\n * 此 hook 不触发额外渲染\n */\nexport default function useForkedVariable<T>(\n  initial: T,\n  updater: (modify: (variable: T) => void) => void,\n) {\n  // 初始分叉变量\n  const forkedRef = useRef(initial)\n\n  function modify(next: T) {\n    forkedRef.current = next\n  }\n\n  useMemo(() => {\n    // 参数变化之后同步内部分叉变量\n    updater(modify)\n  }, [initial])\n\n  return [forkedRef.current, modify] as const\n}\n","import _styledstyled_components from 'styled-components';\n            const _styled = typeof _styledstyled_components.default === 'undefined' ? _styledstyled_components : _styledstyled_components.default;;\nimport React, { forwardRef } from 'react';\nimport { createPortal } from 'react-dom';\nconst SlidePortal = forwardRef(({\n  container = document.body,\n  ...rest\n}, ref) => {\n  return createPortal(<_StyledDiv ref={ref} {...rest} />, container);\n});\nSlidePortal.displayName = 'SlidePortal';\nexport default SlidePortal;\nvar _StyledDiv = _styled(\"div\").withConfig({\n  componentId: \"sc-1ab9qfp-0\"\n})({\n  \"position\": \"fixed\",\n  \"top\": \"0px\",\n  \"left\": \"0px\",\n  \"zIndex\": \"50\",\n  \"height\": \"100%\",\n  \"width\": \"100%\",\n  \"touchAction\": \"none\",\n  \"overflow\": \"hidden\"\n});","import { useEffect } from 'react'\n\nexport default function PreventScroll() {\n  useEffect(() => {\n    const { style } = document.body\n    const lastOverflow = style.overflow\n    style.overflow = 'hidden'\n\n    return () => {\n      style.overflow = lastOverflow\n    }\n  }, [])\n\n  return null\n}\n","import _styledstyled_components from 'styled-components';\n            const _styled = typeof _styledstyled_components.default === 'undefined' ? _styledstyled_components : _styledstyled_components.default;;\nimport React, { useRef } from 'react';\nimport isTouchDevice from './utils/isTouchDevice';\nimport getMultipleTouchPosition from './utils/getMultipleTouchPosition';\nimport getPositionOnMoveOrScale from './utils/getPositionOnMoveOrScale';\nimport { getReachType, computePositionEdge } from './utils/edgeHandle';\nimport getRotateSize from './utils/getRotateSize';\nimport { limitScale } from './utils/limitTarget';\nimport getSuitableImageSize from './utils/getSuitableImageSize';\nimport useIsomorphicLayoutEffect from './hooks/useIsomorphicLayoutEffect';\nimport { minDragScale, minScale, minStartTouchOffset, scaleBuffer } from './variables';\nimport useSetState from './hooks/useSetState';\nimport useMethods from './hooks/useMethods';\nimport useDebounceCallback from './hooks/useDebounceCallback';\nimport useEventListener from './hooks/useEventListener';\nimport useContinuousTap from './hooks/useContinuousTap';\nimport useScrollPosition from './hooks/useScrollPosition';\nimport useAnimationPosition from './hooks/useAnimationPosition';\nimport useMountedRef from './hooks/useMountedRef';\nimport Photo from './Photo';\nconst initialState = {\n  // 真实宽度\n  naturalWidth: undefined,\n  // 真实高度\n  naturalHeight: undefined,\n  // 宽度\n  width: undefined,\n  // 高度\n  height: undefined,\n  // 加载成功状态\n  loaded: undefined,\n  // 破碎状态\n  broken: false,\n  // 图片 X 偏移量\n  x: 0,\n  // 图片 y 偏移量\n  y: 0,\n  // 图片处于触摸的状态\n  touched: false,\n  // 背景处于触摸状态\n  maskTouched: false,\n  // 旋转状态\n  rotate: 0,\n  // 放大缩小\n  scale: 1,\n  // 触摸开始时 x 原始坐标\n  CX: 0,\n  // 触摸开始时 y 原始坐标\n  CY: 0,\n  // 触摸开始时图片 x 偏移量\n  lastX: 0,\n  // 触摸开始时图片 y 偏移量\n  lastY: 0,\n  // 上一个触摸状态 x 原始坐标\n  lastCX: 0,\n  // 上一个触摸状态 y 原始坐标\n  lastCY: 0,\n  // 上一个触摸状态的 scale\n  lastScale: 1,\n  // 触摸开始时时间\n  touchTime: 0,\n  // 多指触控间距\n  touchLength: 0,\n  // 是否暂停 transition\n  pause: true,\n  // 停止 Raf\n  stopRaf: true,\n  // 当前边缘触发状态\n  reach: undefined\n};\nconst StyledView = _styled.div.withConfig({\n  componentId: \"sc-1mzwirp-0\"\n})([\"\", \" direction:ltr\"], {\n  \"position\": \"absolute\",\n  \"top\": \"0px\",\n  \"right\": \"0px\",\n  \"bottom\": \"0px\",\n  \"left\": \"0px\",\n  \"width\": \"100%\",\n  \"touchAction\": \"none\"\n});\nconst StyledWrap = _styled(StyledView).withConfig({\n  componentId: \"sc-1mzwirp-1\"\n})(({\n  isDragMode\n}) => [{\n  \"zIndex\": \"10\"\n}, !isDragMode && {\n  \"overflow\": \"hidden\"\n}]);\nconst StyledBox = _styled(StyledView).withConfig({\n  componentId: \"sc-1mzwirp-2\"\n})([\"transform-origin:left top;\"]);\nexport default function PhotoBox({\n  isDragMode = false,\n  item: {\n    src,\n    render,\n    width: customWidth = 0,\n    height: customHeight = 0,\n    originRef\n  },\n  visible,\n  speed,\n  easing,\n  wrapClassName,\n  className,\n  style,\n  loadingElement,\n  brokenElement,\n  enableMouseZoom = true,\n  onPhotoTap,\n  onMaskTap,\n  onReachMove,\n  onReachUp,\n  onPhotoResize,\n  isActive,\n  expose\n}) {\n  const [state, updateState] = useSetState(initialState);\n  const initialTouchRef = useRef(0);\n  const mounted = useMountedRef();\n  const {\n    naturalWidth = customWidth,\n    naturalHeight = customHeight,\n    width = customWidth,\n    height = customHeight,\n    loaded = !src,\n    broken,\n    x,\n    y,\n    touched,\n    stopRaf,\n    maskTouched,\n    rotate,\n    scale,\n    CX,\n    CY,\n    lastX,\n    lastY,\n    lastCX,\n    lastCY,\n    lastScale,\n    touchTime,\n    touchLength,\n    pause,\n    reach\n  } = state;\n  const fn = useMethods({\n    onScale: current => onScale(limitScale(current, isDragMode)),\n    onRotate(current) {\n      if (rotate !== current) {\n        expose({\n          rotate: current\n        });\n        updateState({\n          rotate: current,\n          ...getSuitableImageSize(isDragMode, naturalWidth, naturalHeight, current),\n          scale\n        });\n      }\n    }\n  });\n\n  // 默认为屏幕中心缩放\n  function onScale(current, clientX, clientY) {\n    if (scale !== current) {\n      expose({\n        scale: current\n      });\n      updateState({\n        scale: current,\n        ...getPositionOnMoveOrScale(isDragMode, x, y, width, height, naturalWidth, naturalHeight, scale, current, clientX, clientY),\n        ...((isDragMode ? current < minDragScale : current <= minScale) ? {\n          x: 0,\n          y: 0\n        } : {})\n      });\n    }\n  }\n  const handleMove = useDebounceCallback((nextClientX, nextClientY, currentTouchLength = 0) => {\n    if ((touched || maskTouched) && isActive) {\n      // 通过旋转调换宽高\n      const [currentWidth, currentHeight] = getRotateSize(rotate, width, height);\n      // 单指最小缩放下，以初始移动距离来判断意图\n      if (currentTouchLength === 0 && initialTouchRef.current === 0) {\n        const isStillX = Math.abs(nextClientX - CX) <= minStartTouchOffset;\n        const isStillY = Math.abs(nextClientY - CY) <= minStartTouchOffset;\n        // 初始移动距离不足\n        if (isStillX && isStillY) {\n          // 方向记录上次移动距离，以便平滑过渡\n          updateState({\n            lastCX: nextClientX,\n            lastCY: nextClientY\n          });\n          return;\n        }\n        // 设置响应状态\n        initialTouchRef.current = !isStillX ? 1 : nextClientY > CY ? 3 : 2;\n      }\n      const offsetX = nextClientX - lastCX;\n      const offsetY = nextClientY - lastCY;\n      // 边缘触发状态\n      let currentReach = undefined;\n      if (currentTouchLength === 0) {\n        // 边缘超出状态\n        const [horizontalCloseEdge] = computePositionEdge(offsetX + lastX, scale, currentWidth, innerWidth);\n        const [verticalCloseEdge] = computePositionEdge(offsetY + lastY, scale, currentHeight, innerHeight);\n        // 边缘触发检测\n        currentReach = getReachType(initialTouchRef.current, horizontalCloseEdge, verticalCloseEdge, reach);\n        // 接触边缘\n        if (currentReach !== undefined) {\n          onReachMove(currentReach, nextClientX, nextClientY, scale);\n        }\n      }\n      // 横向边缘触发、背景触发禁用当前滑动\n      if (currentReach === 'x' || maskTouched || isDragMode) {\n        const state = {\n          reach: 'x'\n        };\n        if (isDragMode) {\n          state.x = lastX + offsetX;\n          state.y = lastY + offsetY;\n          state.pause = false;\n        }\n        updateState(state);\n        return;\n      }\n      // 目标倍数\n      const toScale = limitScale(scale + (currentTouchLength - touchLength) / 100 / 2 * scale, isDragMode, naturalWidth / width, scaleBuffer);\n      // 导出变量\n      expose({\n        scale: toScale\n      });\n      updateState({\n        touchLength: currentTouchLength,\n        reach: currentReach,\n        scale: toScale,\n        ...getPositionOnMoveOrScale(isDragMode, x, y, width, height, naturalWidth, naturalHeight, scale, toScale, nextClientX, nextClientY, offsetX, offsetY)\n      });\n    }\n  }, {\n    maxWait: 8\n  });\n  function updateRaf(position) {\n    if (stopRaf || touched) {\n      return false;\n    }\n    if (mounted.current) {\n      // 下拉关闭时可以有动画\n      updateState({\n        ...position,\n        pause: visible\n      });\n    }\n    return mounted.current;\n  }\n  const slideToPosition = useScrollPosition(nextX => updateRaf({\n    x: nextX\n  }), nextY => updateRaf({\n    y: nextY\n  }), nextScale => {\n    if (mounted.current) {\n      expose({\n        scale: nextScale\n      });\n      updateState({\n        scale: nextScale\n      });\n    }\n    return !touched && mounted.current;\n  });\n  const handlePhotoTap = useContinuousTap(onPhotoTap, (currentClientX, currentClientY) => {\n    if (!reach && !isDragMode) {\n      // 若图片足够大，则放大适应的倍数\n      const endScale = scale !== 1 ? 1 : Math.max(2, naturalWidth / width);\n      onScale(endScale, currentClientX, currentClientY);\n    }\n  });\n  function handleUp(nextClientX, nextClientY) {\n    // 重置响应状态\n    initialTouchRef.current = 0;\n    if ((touched || maskTouched) && isActive) {\n      updateState({\n        touched: false,\n        maskTouched: false,\n        pause: false,\n        stopRaf: false,\n        reach: undefined\n      });\n      const safeScale = limitScale(scale, isDragMode, naturalWidth / width);\n      // Go\n      if (!isDragMode) {\n        slideToPosition(x, y, lastX, lastY, width, height, naturalWidth, naturalHeight, scale, safeScale, lastScale, rotate, touchTime);\n      }\n      onReachUp(nextClientX, nextClientY);\n      // 触发 Tap 事件\n      if (CX === nextClientX && CY === nextClientY) {\n        if (touched) {\n          handlePhotoTap(nextClientX, nextClientY);\n          return;\n        }\n        if (maskTouched) {\n          onMaskTap(nextClientX, nextClientY);\n        }\n      }\n    }\n  }\n  useEventListener(isTouchDevice ? undefined : 'mousemove', e => {\n    e.preventDefault();\n    handleMove(e.clientX, e.clientY);\n  });\n  useEventListener(isTouchDevice ? undefined : 'mouseup', e => {\n    handleUp(e.clientX, e.clientY);\n  });\n  useEventListener(isTouchDevice ? 'touchmove' : undefined, e => {\n    e.preventDefault();\n    const position = getMultipleTouchPosition(e);\n    handleMove(...position);\n  }, {\n    passive: false\n  });\n  useEventListener(isTouchDevice ? 'touchend' : undefined, ({\n    changedTouches\n  }) => {\n    const touch = changedTouches[0];\n    handleUp(touch.clientX, touch.clientY);\n  }, {\n    passive: false\n  });\n  useEventListener('resize', useDebounceCallback(() => {\n    if (loaded && !touched) {\n      if (isDragMode) {\n        updateState({\n          x: 0,\n          y: 0\n        });\n      } else updateState(getSuitableImageSize(isDragMode, naturalWidth, naturalHeight, rotate));\n      onPhotoResize();\n    }\n  }, {\n    maxWait: 8\n  }));\n  useIsomorphicLayoutEffect(() => {\n    if (isActive) {\n      expose({\n        scale,\n        rotate,\n        loading: !loaded,\n        ...fn\n      });\n    }\n  }, [isActive]);\n  function handlePhotoLoad(params) {\n    const state = params.loaded ? getSuitableImageSize(isDragMode, params.naturalWidth || 0, params.naturalHeight || 0, rotate) : {};\n    if (isDragMode && params.loaded && isActive) expose({\n      scale: state.scale,\n      loading: false\n    });\n    updateState({\n      ...params,\n      ...state\n    });\n  }\n  function handleStart(currentClientX, currentClientY, currentTouchLength = 0) {\n    updateState({\n      touched: true,\n      CX: currentClientX,\n      CY: currentClientY,\n      lastCX: currentClientX,\n      lastCY: currentClientY,\n      lastX: x,\n      lastY: y,\n      lastScale: scale,\n      touchLength: currentTouchLength,\n      touchTime: Date.now()\n    });\n  }\n  function handleWheel(e) {\n    if (!reach && enableMouseZoom) {\n      // 限制最大倍数和最小倍数\n      const delta = isDragMode ? e.deltaY / 100 / 16 : e.deltaY / 100 / 2;\n      const toScale = limitScale(scale - delta, isDragMode, naturalWidth / width);\n      updateState({\n        stopRaf: true\n      });\n      onScale(toScale, e.clientX, e.clientY);\n    }\n  }\n  function handleMaskStart(e) {\n    updateState({\n      maskTouched: true,\n      CX: e.clientX,\n      CY: e.clientY,\n      lastX: x,\n      lastY: y\n    });\n  }\n  function handleTouchStart(e) {\n    e.stopPropagation();\n    handleStart(...getMultipleTouchPosition(e));\n  }\n  function handleMouseDown(e) {\n    e.stopPropagation();\n    if (e.button === 0) {\n      handleStart(e.clientX, e.clientY, 0);\n    }\n  }\n\n  // 计算位置\n  const [translateX, translateY, currentWidth, currentHeight, currentScale, opacity, easingMode, FIT] = useAnimationPosition(isDragMode, visible, originRef, loaded, x, y, width, height, naturalWidth, naturalHeight, scale, speed, isPause => updateState({\n    pause: isPause\n  }));\n  // 图片 objectFit 渐变时间\n  const transitionLayoutTime = easingMode < 4 ? speed / 2 : easingMode > 4 ? speed : 0;\n  const transitionCSS = `transform ${speed}ms ${easing}`;\n  const attrs = {\n    className,\n    onMouseDown: isTouchDevice ? undefined : handleMouseDown,\n    onTouchStart: isTouchDevice ? handleTouchStart : undefined,\n    onWheel: handleWheel,\n    style: {\n      width: currentWidth,\n      height: currentHeight,\n      opacity,\n      objectFit: easingMode === 4 ? undefined : FIT,\n      transform: rotate ? `rotate(${rotate}deg)` : undefined,\n      transition:\n      // 初始状态无渐变\n      easingMode > 2 ? isDragMode ? `${transitionCSS}, width ${transitionLayoutTime}ms ${easing}, height ${transitionLayoutTime}ms ${easing}` : `${transitionCSS}, opacity ${speed}ms ease, height ${transitionLayoutTime}ms ${easing}` : undefined\n    }\n  };\n  return <StyledWrap isDragMode={isDragMode} className={wrapClassName} style={style} onMouseDown={!isTouchDevice && isActive ? handleMaskStart : undefined} onTouchStart={isTouchDevice && isActive ? e => handleMaskStart(e.touches[0]) : undefined}>\n      <StyledBox style={{\n      transform: isDragMode ? undefined : `matrix(${currentScale}, 0, 0, ${currentScale}, ${translateX}, ${translateY})`,\n      left: isDragMode ? translateX : undefined,\n      top: isDragMode ? translateY : undefined,\n      transition: touched || pause ? undefined : isDragMode ? `left ${transitionLayoutTime}ms ${easing}, top ${transitionLayoutTime}ms ${easing}` : transitionCSS,\n      willChange: isActive ? 'transform' : undefined\n    }}>\n        {src ? <Photo src={src} loaded={loaded} broken={broken} {...attrs} onPhotoLoad={handlePhotoLoad} loadingElement={loadingElement} brokenElement={brokenElement} /> : render && render({\n        attrs,\n        scale: currentScale,\n        rotate\n      })}\n      </StyledBox>\n    </StyledWrap>;\n}","import type React from 'react'\n\n/**\n * 从 Touch 事件中获取两个触控中心位置\n */\nexport default function getMultipleTouchPosition(\n  evt: TouchEvent | React.TouchEvent,\n): [clientX: number, clientY: number, touchLength: number] {\n  const { clientX, clientY } = evt.touches[0]\n  if (evt.touches.length >= 2) {\n    const { clientX: nextClientX, clientY: nextClientY } = evt.touches[1]\n    return [\n      (clientX + nextClientX) / 2,\n      (clientY + nextClientY) / 2,\n      Math.sqrt((nextClientX - clientX) ** 2 + (nextClientY - clientY) ** 2),\n    ]\n  }\n  return [clientX, clientY, 0]\n}\n","import type { CloseEdgeType } from '../types'\nimport type { ReachType, TouchStartType } from '../types'\n\n/**\n * 获取接触边缘类型\n */\nexport const getReachType = (\n  initialTouchState: TouchStartType,\n  horizontalCloseEdge: CloseEdgeType,\n  verticalCloseEdge: CloseEdgeType,\n  reachPosition: ReachType,\n): ReachType => {\n  if ((horizontalCloseEdge && initialTouchState === 1) || reachPosition === 'x') {\n    return 'x'\n  } else if ((verticalCloseEdge && initialTouchState > 1) || reachPosition === 'y') {\n    return 'y'\n  }\n  return undefined\n}\n\n/**\n * 计算接触边缘位置\n * @param position - x/y\n * @param scale\n * @param size - width/height\n * @param innerSize - innerWidth/innerHeight\n * @return [CloseEdgeType, position]\n */\nexport const computePositionEdge = (\n  position: number,\n  scale: number,\n  size: number,\n  innerSize: number,\n) => {\n  const currentWidth = size * scale\n  // 图片超出的宽度\n  const outOffset = (currentWidth - innerSize) / 2\n  let closedEdge: CloseEdgeType = undefined\n\n  let current = position\n  if (currentWidth <= innerSize) {\n    closedEdge = 1\n    current = 0\n  } else if (position > 0 && outOffset - position <= 0) {\n    closedEdge = 2\n    current = outOffset\n  } else if (position < 0 && outOffset + position <= 0) {\n    closedEdge = 3\n    current = -outOffset\n  }\n\n  return [closedEdge, current] as const\n}\n","import { longModeRatio } from '../variables'\nimport { computePositionEdge } from './edgeHandle'\n\n/**\n * 获取移动或缩放之后的中心点\n */\nexport default function getPositionOnMoveOrScale(\n  isDragMode: boolean,\n  x: number,\n  y: number,\n  width: number,\n  height: number,\n  naturalWidth: number,\n  naturalHeight: number,\n  scale: number,\n  toScale: number,\n  clientX: number = innerWidth / 2,\n  clientY: number = innerHeight / 2,\n  offsetX: number = 0,\n  offsetY: number = 0,\n) {\n  // 是否接触边缘\n  const [closedEdgeX] = computePositionEdge(\n    x,\n    toScale,\n    isDragMode ? naturalWidth : width,\n    innerWidth,\n  )\n  const [closedEdgeY] = computePositionEdge(\n    y,\n    toScale,\n    isDragMode ? naturalHeight : height,\n    innerHeight,\n  )\n\n  const centerClientX = innerWidth / 2\n  const centerClientY = innerHeight / 2\n\n  // 坐标偏移\n  const lastPositionX = centerClientX + x\n  const lastPositionY = centerClientY + y\n\n  // 偏移位置\n  const originX = clientX - (clientX - lastPositionX) * (toScale / scale) - centerClientX\n  const originY = clientY - (clientY - lastPositionY) * (toScale / scale) - centerClientY\n  // 长图模式无左右反馈\n  const longModeEdge =\n    (isDragMode ? naturalHeight / naturalWidth : height / width) >= longModeRatio &&\n    (isDragMode ? naturalWidth : width) * toScale === innerWidth\n  // 超出边缘距离减半\n  return {\n    x: originX + (longModeEdge ? 0 : closedEdgeX ? offsetX / 2 : offsetX),\n    y: originY + (closedEdgeY ? offsetY / 2 : offsetY),\n    lastCX: clientX,\n    lastCY: clientY,\n  }\n}\n","/**\n * 获取旋转后的宽高\n */\nexport default function getRotateSize(rotate: number, width: number, height: number) {\n  const isVertical = rotate % 180 !== 0\n\n  // 若图片不是水平则调换属性\n  if (isVertical) {\n    return [height, width, isVertical] as const\n  }\n\n  return [width, height, isVertical] as const\n}\n","import { longModeRatio } from '../variables'\nimport getRotateSize from './getRotateSize'\n\n/**\n * 获取图片合适的大小\n */\nexport default function getSuitableImageSize(\n  isDragMode: boolean,\n  naturalWidth: number,\n  naturalHeight: number,\n  rotate: number,\n  margin = 0,\n) {\n  const [currentWidth, currentHeight, isVertical] = getRotateSize(rotate, innerWidth, innerHeight)\n\n  let y = margin\n  let width = currentWidth - margin * 2\n  let height = currentHeight - margin * 2\n\n  // 自适应宽高\n  const autoWidth = (naturalWidth / naturalHeight) * currentHeight\n  const autoHeight = (naturalHeight / naturalWidth) * currentWidth\n\n  if (naturalWidth < currentWidth && naturalHeight < currentHeight) {\n    width = naturalWidth\n    height = naturalHeight\n  } else if (naturalWidth < currentWidth && naturalHeight >= currentHeight) {\n    width = autoWidth\n  } else if (naturalWidth >= currentWidth && naturalHeight < currentHeight) {\n    height = autoHeight\n  } else if (naturalWidth / naturalHeight > currentWidth / currentHeight) {\n    height = autoHeight\n  }\n  // 长图模式\n  else if (naturalHeight / naturalWidth >= longModeRatio && !isVertical) {\n    height = autoHeight\n    y = (height - currentHeight) / 2\n  } else {\n    width = autoWidth\n  }\n  const state: Record<string, number | boolean> = {\n    width,\n    height,\n    x: margin,\n    y,\n    pause: isDragMode ? false : true,\n  }\n  if (isDragMode) state.scale = Math.min(height / naturalHeight, width / naturalWidth, 1)\n  return state\n}\n","import { useCallback, useRef } from 'react'\n\ninterface DebounceCallback<CallbackArguments extends any[]> {\n  (...args: CallbackArguments): void\n  cancel: () => void\n}\n\nexport default function useDebounceCallback<CallbackArguments extends any[]>(\n  callback: (...args: CallbackArguments) => void,\n  {\n    leading = false,\n    maxWait,\n    wait = maxWait || 0,\n  }: {\n    leading?: boolean\n    maxWait?: number\n    wait?: number\n  },\n): DebounceCallback<CallbackArguments> {\n  const callbackRef = useRef(callback)\n  callbackRef.current = callback\n\n  const prev = useRef(0)\n  const trailingTimeout = useRef<ReturnType<typeof setTimeout>>()\n  const clearTrailing = () => trailingTimeout.current && clearTimeout(trailingTimeout.current)\n\n  const fn = useCallback(\n    (...args: CallbackArguments) => {\n      const now = Date.now()\n\n      function call() {\n        prev.current = now\n        clearTrailing()\n        callbackRef.current.apply(null, args)\n      }\n      const last = prev.current\n      const offset = now - last\n      // leading\n      if (last === 0) {\n        if (leading) {\n          call()\n        }\n        prev.current = now\n      }\n\n      // body\n      if (maxWait !== undefined) {\n        if (offset > maxWait) {\n          call()\n          return\n        }\n      } else if (offset < wait) {\n        prev.current = now\n      }\n\n      // trailing\n      clearTrailing()\n      trailingTimeout.current = setTimeout(() => {\n        call()\n        prev.current = 0\n      }, wait)\n    },\n    [wait, maxWait, leading],\n  )\n  ;(fn as DebounceCallback<CallbackArguments>).cancel = clearTrailing\n\n  return fn as DebounceCallback<CallbackArguments>\n}\n","import { useRef } from 'react'\nimport useDebounceCallback from './useDebounceCallback'\n\nexport type TapFuncType<T> = (...args: T[]) => void\n\n/**\n * 单击和双击事件处理\n * @param singleTap - 单击事件\n * @param doubleTap - 双击事件\n * @return invokeTap\n */\nexport default function useContinuousTap<T>(\n  singleTap: TapFuncType<T>,\n  doubleTap: TapFuncType<T>,\n): TapFuncType<T> {\n  // 当前连续点击次数\n  const continuousClick = useRef(0)\n\n  const debounceTap = useDebounceCallback(\n    (...args) => {\n      continuousClick.current = 0\n      singleTap(...args)\n    },\n    {\n      wait: 300,\n    },\n  )\n\n  return function invokeTap(...args) {\n    continuousClick.current += 1\n    debounceTap(...args)\n    // 双击\n    if (continuousClick.current >= 2) {\n      debounceTap.cancel()\n      continuousClick.current = 0\n      doubleTap(...args)\n    }\n  }\n}\n","import { computePositionEdge } from '../utils/edgeHandle'\nimport getPositionOnMoveOrScale from '../utils/getPositionOnMoveOrScale'\nimport getRotateSize from '../utils/getRotateSize'\nimport { defaultSpeed, maxTouchTime } from '../variables'\nimport useMethods from './useMethods'\n\n// 触边运动反馈\nconst rebound = (start: number, bound: number, callback: (spatial: number) => boolean) =>\n  easeOutMove(\n    start,\n    bound,\n    callback,\n    defaultSpeed / 4,\n    t => t,\n    () => easeOutMove(bound, start, callback),\n  )\n\n/**\n * 物理滚动到具体位置\n */\nexport default function useScrollPosition<C extends (spatial: number) => boolean>(\n  callbackX: C,\n  callbackY: C,\n  callbackS: C,\n) {\n  const callback = useMethods({\n    X: (spatial: number) => callbackX(spatial),\n    Y: (spatial: number) => callbackY(spatial),\n    S: (spatial: number) => callbackS(spatial),\n  })\n\n  return (\n    x: number,\n    y: number,\n    lastX: number,\n    lastY: number,\n    width: number,\n    height: number,\n    naturalWidth: number,\n    naturalHeight: number,\n    scale: number,\n    safeScale: number,\n    lastScale: number,\n    rotate: number,\n    touchedTime: number,\n  ) => {\n    const [currentWidth, currentHeight] = getRotateSize(rotate, width, height)\n    // 开始状态下边缘触发状态\n    const [beginEdgeX, beginX] = computePositionEdge(x, safeScale, currentWidth, innerWidth)\n    const [beginEdgeY, beginY] = computePositionEdge(y, safeScale, currentHeight, innerHeight)\n    const moveTime = Date.now() - touchedTime\n\n    // 时间过长、超出安全范围的情况下不执行滚动逻辑，恢复安全范围\n    if (moveTime >= maxTouchTime || safeScale != scale || Math.abs(lastScale - scale) > 1) {\n      // 计算中心缩放点\n      const { x: nextX, y: nextY } = getPositionOnMoveOrScale(\n        false,\n        x,\n        y,\n        width,\n        height,\n        naturalWidth,\n        naturalHeight,\n        scale,\n        safeScale,\n      )\n      const targetX = beginEdgeX ? beginX : nextX !== x ? nextX : null\n      const targetY = beginEdgeY ? beginY : nextY !== y ? nextY : null\n\n      if (targetX !== null) {\n        easeOutMove(x, targetX, callback.X)\n      }\n      if (targetY !== null) {\n        easeOutMove(y, targetY, callback.Y)\n      }\n      if (safeScale != scale) {\n        easeOutMove(scale, safeScale, callback.S)\n      }\n      return\n    }\n\n    // 初始速度\n    const speedX = (x - lastX) / moveTime\n    const speedY = (y - lastY) / moveTime\n    const speedT = Math.sqrt(speedX ** 2 + speedY ** 2)\n    // 是否接触到边缘\n    let edgeX = false\n    let edgeY = false\n\n    scrollMove(speedT, spatial => {\n      const nextX = x + spatial * (speedX / speedT)\n      const nextY = y + spatial * (speedY / speedT)\n\n      const [isEdgeX, currentX] = computePositionEdge(nextX, scale, currentWidth, innerWidth)\n      const [isEdgeY, currentY] = computePositionEdge(nextY, scale, currentHeight, innerHeight)\n\n      if (isEdgeX && !edgeX) {\n        edgeX = true\n        if (beginEdgeX) {\n          easeOutMove(nextX, currentX, callback.X)\n        } else {\n          rebound(currentX, nextX + (nextX - currentX), callback.X)\n        }\n      }\n\n      if (isEdgeY && !edgeY) {\n        edgeY = true\n        if (beginEdgeY) {\n          easeOutMove(nextY, currentY, callback.Y)\n        } else {\n          rebound(currentY, nextY + (nextY - currentY), callback.Y)\n        }\n      }\n      // 同时接触边缘的情况下停止滚动\n      if (edgeX && edgeY) {\n        return false\n      }\n\n      const resultX = edgeX || callback.X(currentX)\n      const resultY = edgeY || callback.Y(currentY)\n      return resultX && resultY\n    })\n  }\n}\n\n// 加速度\nconst acceleration = -0.001\n// 阻力\nconst resistance = 0.0002\n\n/**\n * 通过速度滚动到停止\n */\nfunction scrollMove(initialSpeed: number, callback: (spatial: number) => boolean) {\n  let v = initialSpeed\n  let s = 0\n  let lastTime: number | undefined = undefined\n  let frameId = 0\n\n  const calcMove = (now: number) => {\n    if (!lastTime) {\n      lastTime = now\n    }\n    const dt = now - lastTime\n    const direction = Math.sign(initialSpeed)\n    const a = direction * acceleration\n    const f = Math.sign(-v) * v ** 2 * resistance\n    const ds = v * dt + ((a + f) * dt ** 2) / 2\n    v = v + (a + f) * dt\n\n    s = s + ds\n    // move to s\n    lastTime = now\n\n    if (direction * v <= 0) {\n      caf()\n      return\n    }\n\n    if (callback(s)) {\n      raf()\n      return\n    }\n    caf()\n  }\n  raf()\n\n  function raf() {\n    frameId = requestAnimationFrame(calcMove)\n  }\n  function caf() {\n    cancelAnimationFrame(frameId)\n  }\n}\n\n/**\n * 缓动函数\n */\nconst easeOutQuart = (x: number) => 1 - (1 - x) ** 4\n\n/**\n * 缓动回调\n */\nfunction easeOutMove(\n  start: number,\n  end: number,\n  callback: (spatial: number) => boolean,\n  speed = defaultSpeed,\n  easing = easeOutQuart,\n  complete?: () => void,\n) {\n  const distance = end - start\n  if (distance === 0) {\n    return\n  }\n\n  const startTime = Date.now()\n  let frameId = 0\n\n  const calcMove = () => {\n    const time = Math.min(1, (Date.now() - startTime) / speed)\n    const result = callback(start + easing(time) * distance)\n\n    if (result && time < 1) {\n      raf()\n      return\n    }\n    cancelAnimationFrame(frameId)\n    if (time >= 1 && complete) {\n      complete()\n    }\n  }\n  raf()\n\n  function raf() {\n    frameId = requestAnimationFrame(calcMove)\n  }\n}\n","import type { Dispatch, MutableRefObject, SetStateAction } from 'react'\nimport { useState, useEffect, useRef } from 'react'\nimport type { EasingMode, OriginRectType } from '../types'\nimport useMethods from './useMethods'\nimport { maxWaitAnimationTime } from '../variables'\n\nconst initialRect: OriginRectType = {\n  T: 0,\n  L: 0,\n  W: 0,\n  H: 0,\n  // 图像填充方式\n  FIT: undefined,\n}\n\nexport default function useAnimationOrigin(\n  isDragMode: boolean,\n  visible: boolean | undefined,\n  originRef: MutableRefObject<HTMLElement | null> | undefined,\n  loaded: boolean,\n  speed: number,\n  updateEasing: (pause: boolean) => void,\n): [\n  // 动画状态\n  easingMode: EasingMode,\n  originRect: OriginRectType,\n] {\n  const [originRect, updateOriginRect] = useState(initialRect)\n  // 动画状态\n  const [easingMode, updateEasingMode] = useState<EasingMode>(isDragMode ? 3 : 0)\n  const initialTime = useRef<number>()\n\n  const fn = useMethods({\n    OK: () => visible && updateEasingMode(4),\n  })\n\n  useEffect(() => {\n    // 记录初始打开的时间\n    if (!initialTime.current) {\n      initialTime.current = Date.now()\n    }\n    if (!loaded) {\n      return\n    }\n    handleUpdateOrigin(originRef, updateOriginRect)\n    if (isDragMode) return\n\n    if (visible) {\n      // 打开动画处理\n      // 小于最大允许动画时间，则执行缩放动画\n      if (Date.now() - initialTime.current < maxWaitAnimationTime) {\n        updateEasingMode(1)\n        // 延时执行动画，保持 transition 生效\n        requestAnimationFrame(() => {\n          updateEasingMode(2)\n          requestAnimationFrame(() => handleToShape(3))\n        })\n        setTimeout(fn.OK, speed)\n        return\n      }\n      // 超出则不执行\n      updateEasingMode(4)\n      return\n    }\n    // 关闭动画处理\n    handleToShape(5)\n  }, [visible, loaded, isDragMode])\n\n  function handleToShape(currentShape: EasingMode) {\n    updateEasing(false)\n    updateEasingMode(currentShape)\n  }\n\n  return [easingMode, originRect]\n}\n\n/**\n * 更新缩略图位置信息\n */\nfunction handleUpdateOrigin(\n  originRef: MutableRefObject<HTMLElement | null> | undefined,\n  updateOriginRect: Dispatch<SetStateAction<typeof initialRect>>,\n) {\n  const element = originRef && originRef.current\n\n  if (element && element.nodeType === 1) {\n    // 获取触发时节点位置\n    const { top, left, width, height } = element.getBoundingClientRect()\n    const isImage = element.tagName === 'IMG'\n    updateOriginRect({\n      T: top,\n      L: left,\n      W: width,\n      H: height,\n      FIT: isImage\n        ? (getComputedStyle(element).objectFit as 'contain' | 'cover' | 'fill' | undefined)\n        : undefined,\n    })\n  }\n}\n","import { useRef } from 'react'\nimport useSetState from './useSetState'\nimport useIsomorphicLayoutEffect from './useIsomorphicLayoutEffect'\nimport useDebounceCallback from './useDebounceCallback'\n\n/**\n * 目标缩放延迟处理\n */\nexport default function useTargetScale(\n  isDragMode: boolean,\n  realWidth: number,\n  realHeight: number,\n  naturalWidth: number,\n  naturalHeight: number,\n  realScale: number,\n  speed: number,\n  updateEasing: (pause: boolean) => void,\n) {\n  const execRef = useRef(false)\n\n  const [{ lead, scale }, updateState] = useSetState({ lead: true, scale: realScale })\n\n  const moveScale = useDebounceCallback(\n    async (current: number) => {\n      updateEasing(true)\n      updateState({ lead: false, scale: current })\n    },\n    { wait: speed },\n  )\n\n  useIsomorphicLayoutEffect(() => {\n    if (!execRef.current || isDragMode) {\n      execRef.current = true\n      return\n    }\n    updateEasing(false)\n    updateState({ lead: true })\n    moveScale(realScale)\n  }, [realScale, isDragMode])\n\n  if (isDragMode) {\n    return [naturalWidth * realScale, naturalHeight * realScale, realScale] as const\n  }\n\n  if (lead) {\n    // 运动开始\n    return [realWidth * scale, realHeight * scale, realScale / scale] as const\n  }\n  // 运动结束\n  return [realWidth * realScale, realHeight * realScale, 1] as const\n}\n","import type { MutableRefObject } from 'react'\nimport useAnimationOrigin from './useAnimationOrigin'\nimport useTargetScale from './useTargetScale'\n\nexport default function useAnimationPosition(\n  isDragMode: boolean,\n  visible: boolean | undefined,\n  originRef: MutableRefObject<HTMLElement | null> | undefined,\n  loaded: boolean,\n  x: number,\n  y: number,\n  width: number,\n  height: number,\n  naturalWidth: number,\n  naturalHeight: number,\n  scale: number,\n  speed: number,\n  updateEasing: (pause: boolean) => void,\n) {\n  // 延迟更新 width/height\n  const [autoWidth, autoHeight, autoScale] = useTargetScale(\n    isDragMode,\n    width,\n    height,\n    naturalWidth,\n    naturalHeight,\n    scale,\n    speed,\n    updateEasing,\n  )\n  // 动画源处理\n  const [easingMode, originRect] = useAnimationOrigin(\n    isDragMode,\n    visible,\n    originRef,\n    loaded,\n    speed,\n    updateEasing,\n  )\n\n  // 计算动画位置\n  const { T, L, W, H, FIT } = originRect\n  // 偏移量，x: 0, y: 0 居中为初始\n  const centerWidth = innerWidth / 2\n  const centerHeight = innerHeight / 2\n  const offsetX = centerWidth - ((isDragMode ? naturalWidth : width) * scale) / 2\n  const offsetY = centerHeight - ((isDragMode ? naturalHeight : height) * scale) / 2\n  // 缩略图状态\n  const miniMode = easingMode < 3 || easingMode > 4\n  // 有缩略图时，则为缩略图的位置，否则居中\n  const translateX = miniMode ? (W ? L : centerWidth) : x + offsetX\n  const translateY = miniMode ? (W ? T : centerHeight) : y + offsetY\n\n  // 最小值缩放\n  const minScale = W / ((isDragMode ? naturalWidth : width) * scale) || 0.01\n\n  // 适应 objectFit 保持缩略图宽高比\n  const currentHeight = miniMode && FIT ? autoWidth * (H / W) : autoHeight\n  // 初始加载情况无缩放\n  const currentScale = easingMode === 0 ? autoScale : miniMode ? minScale : autoScale\n  const opacity = miniMode ? (FIT ? 1 : 0) : 1\n\n  return [\n    translateX,\n    translateY,\n    autoWidth,\n    currentHeight,\n    currentScale,\n    opacity,\n    easingMode,\n    FIT,\n  ] as const\n}\n","import { useEffect, useRef } from 'react'\n\nconst useMountedRef = () => {\n  const mountedRef = useRef(false)\n  useEffect(() => {\n    mountedRef.current = true\n    return () => {\n      mountedRef.current = false\n    }\n  }, [])\n  return mountedRef\n}\n\nexport default useMountedRef\n","import _styled4styled_components from 'styled-components';\n            const _styled4 = typeof _styled4styled_components.default === 'undefined' ? _styled4styled_components : _styled4styled_components.default;;\nimport _styled3styled_components from 'styled-components';\n            const _styled3 = typeof _styled3styled_components.default === 'undefined' ? _styled3styled_components : _styled3styled_components.default;;\nimport _styled2styled_components from 'styled-components';\n            const _styled2 = typeof _styled2styled_components.default === 'undefined' ? _styled2styled_components : _styled2styled_components.default;;\nimport _styledstyled_components from 'styled-components';\n            const _styled = typeof _styledstyled_components.default === 'undefined' ? _styledstyled_components : _styledstyled_components.default;;\nimport { css as _css } from \"styled-components\";\nimport React from 'react';\nimport Spinner from './components/Spinner';\nimport useMountedRef from './hooks/useMountedRef';\nconst iconStyles = [{\n  \"position\": \"absolute\",\n  \"left\": \"0px\",\n  \"top\": \"0px\",\n  \"display\": \"inline-block\",\n  \"--tw-translate-x\": \"-50%\",\n  \"transform\": \"translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))\",\n  \"--tw-translate-y\": \"-50%\"\n}];\nexport default function Photo({\n  src,\n  loaded,\n  broken,\n  className,\n  onPhotoLoad,\n  loadingElement,\n  brokenElement,\n  ...restProps\n}) {\n  const mountedRef = useMountedRef();\n  function handleImageLoaded(e) {\n    const {\n      naturalWidth,\n      naturalHeight\n    } = e.target;\n    if (mountedRef.current) {\n      onPhotoLoad({\n        loaded: true,\n        naturalWidth,\n        naturalHeight\n      });\n    }\n  }\n  function handleImageBroken() {\n    if (mountedRef.current) {\n      onPhotoLoad({\n        broken: true\n      });\n    }\n  }\n  if (src && !broken) {\n    return <>\n        <_StyledImg className={className} src={src} onLoad={handleImageLoaded} onError={handleImageBroken} alt=\"\" {...restProps} $_css2={[{\n        \"cursor\": \"grab\",\n        \"--tw-bg-opacity\": \"1\",\n        \"backgroundColor\": \"rgb(255 255 255 / var(--tw-bg-opacity))\",\n        \":active\": {\n          \"cursor\": \"grabbing\"\n        }\n      }, _css([\"max-width:initial;\"])]} />\n        {!loaded && (<_StyledSpan>{loadingElement}</_StyledSpan> || <_StyledSpinner />)}\n      </>;\n  }\n  if (brokenElement) {\n    return <_StyledSpan2>\n        {typeof brokenElement === 'function' ? brokenElement({\n        src\n      }) : brokenElement}\n      </_StyledSpan2>;\n  }\n  return null;\n}\nvar _StyledImg = _styled(\"img\").withConfig({\n  componentId: \"sc-r1gl4k-0\"\n})([\"\", \"\"], p => p.$_css2);\nvar _StyledSpan = _styled(\"span\").withConfig({\n  componentId: \"sc-r1gl4k-1\"\n})([\"\", \"\"], iconStyles);\nvar _StyledSpinner = _styled(Spinner).withConfig({\n  componentId: \"sc-r1gl4k-2\"\n})([\"\", \"\"], iconStyles);\nvar _StyledSpan2 = _styled(\"span\").withConfig({\n  componentId: \"sc-r1gl4k-3\"\n})([\"\", \"\"], iconStyles);","import _styledstyled_components from 'styled-components';\n            const _styled = typeof _styledstyled_components.default === 'undefined' ? _styledstyled_components : _styledstyled_components.default;;\nimport React from 'react';\nimport { keyframes } from 'styled-components';\nconst rotate = keyframes([\"from{transform:rotate(0deg);}to{transform:rotate(360deg);}\"]);\nconst delayIn = keyframes([\"0%,50%{opacity:0;}100%{opacity:1;}\"]);\nconst StyledSpinner = _styled.div.withConfig({\n  componentId: \"sc-7ci1r2-0\"\n})([\"animation:\", \" 0.4s linear both;svg{animation:\", \" 0.6s linear infinite;}\"], delayIn, rotate);\nfunction Spinner({\n  className,\n  ...props\n}) {\n  return <StyledSpinner className={className} {...props}>\n      <svg viewBox=\"0 0 32 32\" width=\"36\" height=\"36\" fill=\"white\">\n        <path opacity=\".25\" d=\"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4\" />\n        <path d=\"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z\" />\n      </svg>\n    </StyledSpinner>;\n}\nexport default Spinner;","import type React from 'react'\nimport { Children, cloneElement, useContext, useEffect, useMemo, useRef } from 'react'\nimport useInitial from './hooks/useInitial'\nimport useMethods from './hooks/useMethods'\nimport type { PhotoContextType } from './photo-context'\nimport PhotoContext from './photo-context'\nimport type { PhotoRenderParams } from './types'\n\nexport interface PhotoViewProps {\n  /**\n   * 图片地址\n   */\n  src?: string\n  /**\n   * 自定义渲染，优先级比 src 低\n   */\n  render?: (props: PhotoRenderParams) => React.ReactNode\n  /**\n   * 自定义覆盖节点\n   */\n  overlay?: React.ReactNode\n  /**\n   * 自定义渲染节点宽度\n   */\n  width?: number\n  /**\n   * 自定义渲染节点高度\n   */\n  height?: number\n  /**\n   * 子节点，一般为缩略图\n   */\n  children?: React.ReactElement\n  /**\n   * 触发的事件\n   */\n  triggers?: ('onClick' | 'onDoubleClick')[]\n}\n\nconst PhotoView: React.FC<PhotoViewProps> = ({\n  src,\n  render,\n  overlay,\n  width,\n  height,\n  triggers = ['onClick'],\n  children,\n}) => {\n  const photoContext = useContext<PhotoContextType>(PhotoContext)\n  const key = useInitial(() => photoContext.nextId())\n  const originRef = useRef<HTMLElement>(null)\n\n  useEffect(() => {\n    return () => {\n      photoContext.remove(key)\n    }\n  }, [])\n\n  function invokeChildrenFn(eventName: string, e: React.SyntheticEvent) {\n    if (children) {\n      const eventFn = children.props[eventName]\n      if (eventFn) {\n        eventFn(e)\n      }\n    }\n  }\n\n  const fn = useMethods({\n    render(props: PhotoRenderParams) {\n      return render && render(props)\n    },\n    show(eventName: string, e: React.MouseEvent) {\n      photoContext.show(key)\n      invokeChildrenFn(eventName, e)\n    },\n  })\n\n  const eventListeners = useMemo(() => {\n    const listener: Record<string, any> = {}\n    triggers.forEach(eventName => {\n      listener[eventName] = fn.show.bind(null, eventName)\n    })\n    return listener\n  }, [])\n\n  useEffect(() => {\n    photoContext.update({\n      key,\n      src,\n      originRef,\n      render: fn.render,\n      overlay,\n      width,\n      height,\n    })\n  }, [src])\n\n  if (children) {\n    return Children.only(cloneElement(children, { ...eventListeners, ref: originRef }))\n  }\n  return null\n}\n\nexport default PhotoView\n","import { useRef } from 'react'\n\nexport default function useInitial<T extends (...args: any) => any>(callback: T) {\n  const { current } = useRef({ sign: false, fn: undefined as ReturnType<T> })\n  if (!current.sign) {\n    current.sign = true\n    current.fn = callback()\n  }\n  return current.fn\n}\n"],"mappings":";AAAA,SAAgBA,UAAA,IAAAC,EAAA,EAAYC,OAAA,IAAAC,EAAA,EAASC,MAAA,IAAAC,EAAA,QAAc;ACAnD,SAASD,MAAA,IAAAE,EAAA,QAAc;AAKR,SAARC,EAA+EC,CAAA,EAAO;EAC3F,IAAM;IAAEC,OAAA,EAAAC;EAAQ,IAAIJ,EAAA,CAAO;IACzBK,EAAA,EAAAH,CAAA;IACAI,IAAA,EAAM;EACR,CAAC;EAGD,IAFAF,CAAA,CAAQC,EAAA,GAAKH,CAAA,EAET,CAACE,CAAA,CAAQE,IAAA,EAAM;IACjB,IAAMC,CAAA,GAAOC,MAAA,CAAOC,MAAA,CAAO,IAAI;IAC/BD,MAAA,CAAOE,IAAA,CAAKR,CAAE,EAAES,OAAA,CAAQC,CAAA,IAAO;MAC7BL,CAAA,CAAKK,CAAA,IAAO,IAAIC,CAAA,KAAoBT,CAAA,CAAQC,EAAA,CAAGO,CAAA,EAAKE,IAAA,CAAKV,CAAA,CAAQC,EAAA,EAAI,GAAGQ,CAAI,CAC9E;IAAA,CAAC,GACDT,CAAA,CAAQE,IAAA,GAAOC,CACjB;EAAA;EAEA,OAAOH,CAAA,CAAQE,IACjB;AAAA;ACrBA,SAASS,UAAA,IAAAC,EAAA,QAAkB;AAEZ,SAARC,GAA4Df,CAAA,EAAiB;EAClF,OAAOc,EAAA,CACL,CAACZ,CAAA,EAAUG,CAAA,KAAqDW,CAAA,CAAAA,CAAA,KAC3Dd,CAAA,GACC,OAAOG,CAAA,IAAW,aAAaA,CAAA,CAAOH,CAAK,IAAIG,CAAA,GAErDL,CACF,CACF;AAAA;ACVA,SAASiB,aAAA,IAAAC,EAAA,QAAqB;AAY9B,IAAOC,EAAA,GAAQD,EAAA,CAAgC,MAAwC;ACZvF,OAAOE,EAAA,MAA+B;AAEtC,OAAOC,EAAA,MAA8B;AAErC,SAASC,GAAA,IAAOC,EAAA,QAAY;AAC5B,SAAgB/B,UAAA,IAAAgC,EAAA,EAAY9B,OAAA,IAAA+B,EAAA,EAAS7B,MAAA,IAAA8B,EAAA,EAAQC,QAAA,IAAAC,EAAA,QAAgB;ACQtD,IAAMC,EAAA,GAAgB;EAKhBC,EAAA,GAAoB;AChB1B,IAAMC,EAAA,GAAcC,CAAChC,CAAA,EAAeE,CAAA,EAAaG,CAAA,KAC/C4B,IAAA,CAAKC,GAAA,CAAID,IAAA,CAAKE,GAAA,CAAInC,CAAA,EAAOK,CAAG,GAAGH,CAAG;EAM9BkC,EAAA,GAAaC,CACxBrC,CAAA,EACAE,CAAA,GAAa,IACbG,CAAA,GAAc,GACdK,CAAA,GAAiB,MAEVqB,EAAA,CACL/B,CAAA,EACAE,CAAA,GAAa,KAAe,KAAY,IAAIQ,CAAA,GAC5CuB,IAAA,CAAKC,GAAA,CAAI,GAAU7B,CAAG,KAAK,IAAIK,CAAA,CACjC;ACnBF,SAAS4B,SAAA,IAAAC,EAAA,EAAWC,eAAA,IAAAC,EAAA,QAAuB;AAE3C,IAAMC,EAAA,GACJ,OAAOC,MAAA,IAAW,eAAe,sBAAsBC,IAAA,CAAKC,SAAA,IAAaA,SAAA,CAAUC,SAAS;EAEvFC,EAAA,GAAQL,EAAA,GAAQH,EAAA,GAAYE,EAAA;ACLnC,SAAS/C,OAAA,IAAAsD,EAAA,QAAe;AAaT,SAARC,GACLjD,CAAA,EACAE,CAAA,EACAG,CAAA,EACoB;EACpB,OAAO2C,EAAA,CAAQ,MAAM;IACnB,IAAMtC,CAAA,GAAcV,CAAA,CAAOkD,MAAA;IAC3B,IAAI7C,CAAA,EAAM;MACR,IAAMM,CAAA,GAAYX,CAAA,CAAOmD,MAAA,CAAOnD,CAAM,EAAEmD,MAAA,CAAOnD,CAAM;QAC/CoD,CAAA,GAAezC,CAAA,CAAUD,CAAA,GAAcR,CAAA;QACvCmD,CAAA,GAAkC1C,CAAA,CAAU2C,KAAA,CAChD5C,CAAA,GAAcR,CAAA,GAAQ,GACtBQ,CAAA,GAAcR,CAAA,GAAQ,CACxB;QAEMqD,CAAA,GAAqC,EAAC;MAE5C,SAASC,CAAA,GAAI,GAAGA,CAAA,GAAIH,CAAA,CAAYH,MAAA,EAAQM,CAAA,IAAK;QAC3C,IAAMC,CAAA,GAAQJ,CAAA,CAAYG,CAAA;QACtBA,CAAA,KAAM,KAAKC,CAAA,CAAMC,GAAA,KAAQN,CAAA,CAAaM,GAAA,GACxCH,CAAA,CAAeI,IAAA,CAAKC,CAAA,CAAA5C,CAAA,KAAKyC,CAAA,GAAL;UAAYI,QAAA,EAAU;QAAK,EAAC,IAEhDN,CAAA,CAAeI,IAAA,CAAKF,CAAK,CAE7B;MAAA;MACA,OAAOF,CACT;IAAA;IACA,OAAOvD,CAAA,CAAOsD,KAAA,CAAMrB,IAAA,CAAKC,GAAA,CAAIhC,CAAA,GAAQ,GAAG,CAAC,GAAG+B,IAAA,CAAKE,GAAA,CAAIjC,CAAA,GAAQ,GAAGQ,CAAA,GAAc,CAAC,CAAC,CAClF;EAAA,GAAG,CAACV,CAAA,EAAQE,CAAA,EAAOG,CAAI,CAAC,CAC1B;AAAA;AC1CA,SAASiC,SAAA,IAAAwB,EAAA,EAAWlE,MAAA,IAAAmE,EAAA,QAAc;AAEnB,SAARC,GACLhE,CAAA,EACAE,CAAA,EACAG,CAAA,EACA;EACA,IAAMK,CAAA,GAASqD,EAAA,CAAO7D,CAAE;EACxBQ,CAAA,CAAOT,OAAA,GAAUC,CAAA,EAEjB4D,EAAA,CAAU,MAAM;IACd,SAASnD,EAAQyC,CAAA,EAAwB;MACvC1C,CAAA,CAAOT,OAAA,CAAQmD,CAAG,CACpB;IAAA;IACA,OAAIpD,CAAA,IACF2C,MAAA,CAAOsB,gBAAA,CAAiBjE,CAAA,EAAMW,CAAA,EAASN,CAAO,GAEzC,MAAM;MACPL,CAAA,IACF2C,MAAA,CAAOuB,mBAAA,CAAoBlE,CAAA,EAAMW,CAAO,CAE5C;IAAA,CACF;EAAA,GAAG,CAACX,CAAI,CAAC,CACX;AAAA;ACvBA,SAASa,UAAA,IAAAsD,EAAA,EAAYvE,MAAA,IAAAwE,EAAA,QAAc;ACAnC,SAASxE,MAAA,IAAAyE,EAAA,EAAQ3E,OAAA,IAAA4E,EAAA,QAAe;AAMjB,SAARC,GACLvE,CAAA,EACAE,CAAA,EACA;EAEA,IAAMG,CAAA,GAAYgE,EAAA,CAAOrE,CAAO;EAEhC,SAASU,EAAOC,CAAA,EAAS;IACvBN,CAAA,CAAUJ,OAAA,GAAUU,CACtB;EAAA;EAEA,OAAA2D,EAAA,CAAQ,MAAM;IAEZpE,CAAA,CAAQQ,CAAM,CAChB;EAAA,GAAG,CAACV,CAAO,CAAC,GAEL,CAACK,CAAA,CAAUJ,OAAA,EAASS,CAAM,CACnC;AAAA;ADfe,SAAR8D,GACLxE,CAAA,EACAE,CAAA,EAKA;EACA,IAAM,GAAGG,CAAY,IAAI8D,EAAA,CAAWZ,CAAA,IAAK,CAACA,CAAA,EAAG,EAAK;IAE5C7C,CAAA,GAAkB0D,EAAA,CAA4B,CAAC;IAG/C,CAACzD,CAAA,EAAayC,CAAiB,IAAImB,EAAA,CAAkBvE,CAAA,EAASuD,CAAA,IAAU;MAExEvD,CAAA,IACFuD,CAAA,CAAOvD,CAAO,GACdU,CAAA,CAAgBT,OAAA,GAAU,KAE1BS,CAAA,CAAgBT,OAAA,GAAU,CAE9B;IAAA,CAAC;EAED,SAASoD,EAAA,EAAiB;IAExBhD,CAAA,CAAa,GAETK,CAAA,CAAgBT,OAAA,KAAY,MAC9BmD,CAAA,CAAkB,EAAK,GAEnBlD,CAAA,IACFA,CAAA,CAAW,IAIfQ,CAAA,CAAgBT,OAAA,GAAU,CAC5B;EAAA;EAEA,OAAO,CAILU,CAAA,EAIAD,CAAA,CAAgBT,OAAA,EAIhBoD,CACF,CACF;AAAA;AE5DA,OAAOoB,EAAA,MAA8B;AAErC,SAAgBjF,UAAA,IAAAkF,EAAA,QAAkB;AAClC,SAASC,YAAA,IAAAC,EAAA,QAAoB;AAKP,SAAAC,GAAA,IAAAC,EAAA;AAPV,IAAM3E,EAAA,GAAU,OAAOsE,EAAA,CAAyBM,OAAA,IAAY,cAAcN,EAAA,GAA2BA,EAAA,CAAyBM,OAAA;EAGpIC,EAAA,GAAcN,EAAA,CAAW,CAAChE,CAAA,EAG7BL,CAAA,KAAQ;IAHqB,IAAAM,CAAA,GAAAD,CAAA;MAC9B;QAAAuE,SAAA,EAAAjF,CAAA,GAAYkF,QAAA,CAASC;MALvB,IAIgCxE,CAAA;MAE3BT,CAAA,GAAAkF,EAAA,CAF2BzE,CAAA,EAE3B,CADH;IAGA,OAAOiE,EAAA,CAAaE,EAAA,CAACO,EAAA,EAAArE,CAAA;MAAWsE,GAAA,EAAKjF;IAAA,GAASH,CAAA,CAAM,GAAIF,CAAS,CACnE;EAAA,CAAC;AACDgF,EAAA,CAAYO,WAAA,GAAc;AAC1B,IAAOC,EAAA,GAAQR,EAAA;EACXK,EAAA,GAAalF,EAAA,CAAQ,KAAK,EAAEsF,UAAA,CAAW;IACzCC,WAAA,EAAa;EACf,CAAC,EAAE;IACDC,QAAA,EAAY;IACZC,GAAA,EAAO;IACPC,IAAA,EAAQ;IACRC,MAAA,EAAU;IACVC,MAAA,EAAU;IACVC,KAAA,EAAS;IACTC,WAAA,EAAe;IACfC,QAAA,EAAY;EACd,CAAC;ACvBD,SAAS5D,SAAA,IAAA6D,EAAA,QAAiB;AAEX,SAARC,GAAA,EAAiC;EACtC,OAAAD,EAAA,CAAU,MAAM;IACd,IAAM;QAAEE,KAAA,EAAArG;MAAM,IAAIkF,QAAA,CAASC,IAAA;MACrBjF,CAAA,GAAeF,CAAA,CAAMkG,QAAA;IAC3B,OAAAlG,CAAA,CAAMkG,QAAA,GAAW,UAEV,MAAM;MACXlG,CAAA,CAAMkG,QAAA,GAAWhG,CACnB;IAAA,CACF;EAAA,GAAG,EAAE,GAEE,IACT;AAAA;ACdA,OAAOoG,EAAA,MAA8B;AAErC,SAAgB1G,MAAA,IAAA2G,EAAA,QAAc;ACGf,SAARC,GACLxG,CAAA,EACyD;EACzD,IAAM;IAAEyG,OAAA,EAAAvG,CAAA;IAASwG,OAAA,EAAArG;EAAQ,IAAIL,CAAA,CAAI2G,OAAA,CAAQ;EACzC,IAAI3G,CAAA,CAAI2G,OAAA,CAAQzD,MAAA,IAAU,GAAG;IAC3B,IAAM;MAAEuD,OAAA,EAAS/F,CAAA;MAAagG,OAAA,EAAS/F;IAAY,IAAIX,CAAA,CAAI2G,OAAA,CAAQ;IACnE,OAAO,EACJzG,CAAA,GAAUQ,CAAA,IAAe,IACzBL,CAAA,GAAUM,CAAA,IAAe,GAC1BsB,IAAA,CAAK2E,IAAA,CAAMC,EAAA,CAAAnG,CAAA,GAAcR,CAAA,EAAY,KAAK2G,EAAA,CAAAlG,CAAA,GAAcN,CAAA,EAAY,EAAC,CACvE,CACF;EAAA;EACA,OAAO,CAACH,CAAA,EAASG,CAAA,EAAS,CAAC,CAC7B;AAAA;ACZO,IAAMyG,EAAA,GAAeC,CAC1B/G,CAAA,EACAE,CAAA,EACAG,CAAA,EACAK,CAAA,KACc;IACd,IAAKR,CAAA,IAAuBF,CAAA,KAAsB,KAAMU,CAAA,KAAkB,KACxE,OAAO;IACF,IAAKL,CAAA,IAAqBL,CAAA,GAAoB,KAAMU,CAAA,KAAkB,KAC3E,OAAO,GAGX;EAAA;EAUasG,CAAA,GAAsBC,CACjCjH,CAAA,EACAE,CAAA,EACAG,CAAA,EACAK,CAAA,KACG;IACH,IAAMC,CAAA,GAAeN,CAAA,GAAOH,CAAA;MAEtBkD,CAAA,IAAazC,CAAA,GAAeD,CAAA,IAAa;MAC3C2C,CAAA;MAEAE,CAAA,GAAUvD,CAAA;IACd,OAAIW,CAAA,IAAgBD,CAAA,IAClB2C,CAAA,GAAa,GACbE,CAAA,GAAU,KACDvD,CAAA,GAAW,KAAKoD,CAAA,GAAYpD,CAAA,IAAY,KACjDqD,CAAA,GAAa,GACbE,CAAA,GAAUH,CAAA,IACDpD,CAAA,GAAW,KAAKoD,CAAA,GAAYpD,CAAA,IAAY,MACjDqD,CAAA,GAAa,GACbE,CAAA,GAAU,CAACH,CAAA,GAGN,CAACC,CAAA,EAAYE,CAAO,CAC7B;EAAA;AC9Ce,SAAR2D,GACLlH,CAAA,EACAE,CAAA,EACAG,CAAA,EACAK,CAAA,EACAC,CAAA,EACAyC,CAAA,EACAC,CAAA,EACAE,CAAA,EACAC,CAAA,EACAC,CAAA,GAAkB0D,UAAA,GAAa,GAC/BC,CAAA,GAAkBC,WAAA,GAAc,GAChCC,CAAA,GAAkB,GAClBC,CAAA,GAAkB,GAClB;EAEA,IAAM,CAACC,CAAW,IAAIR,CAAA,CACpB9G,CAAA,EACAsD,CAAA,EACAxD,CAAA,GAAaoD,CAAA,GAAe1C,CAAA,EAC5ByG,UACF;IACM,CAACM,CAAW,IAAIT,CAAA,CACpB3G,CAAA,EACAmD,CAAA,EACAxD,CAAA,GAAaqD,CAAA,GAAgB1C,CAAA,EAC7B0G,WACF;IAEMK,CAAA,GAAgBP,UAAA,GAAa;IAC7BQ,CAAA,GAAgBN,WAAA,GAAc;IAG9BO,CAAA,GAAgBF,CAAA,GAAgBxH,CAAA;IAChC2H,CAAA,GAAgBF,CAAA,GAAgBtH,CAAA;IAGhCyH,CAAA,GAAUrE,CAAA,IAAWA,CAAA,GAAUmE,CAAA,KAAkBpE,CAAA,GAAUD,CAAA,IAASmE,CAAA;IACpEK,CAAA,GAAUX,CAAA,IAAWA,CAAA,GAAUS,CAAA,KAAkBrE,CAAA,GAAUD,CAAA,IAASoE,CAAA;IAEpEK,CAAA,IACHhI,CAAA,GAAaqD,CAAA,GAAgBD,CAAA,GAAezC,CAAA,GAASD,CAAA,KAAU,MAC/DV,CAAA,GAAaoD,CAAA,GAAe1C,CAAA,IAAS8C,CAAA,KAAY2D,UAAA;EAEpD,OAAO;IACLc,CAAA,EAAGH,CAAA,IAAWE,CAAA,GAAe,IAAIR,CAAA,GAAcF,CAAA,GAAU,IAAIA,CAAA;IAC7DY,CAAA,EAAGH,CAAA,IAAWN,CAAA,GAAcF,CAAA,GAAU,IAAIA,CAAA;IAC1CY,MAAA,EAAQ1E,CAAA;IACR2E,MAAA,EAAQhB;EACV,CACF;AAAA;ACrDe,SAARiB,GAA+BrI,CAAA,EAAgBE,CAAA,EAAeG,CAAA,EAAgB;EACnF,IAAMK,CAAA,GAAaV,CAAA,GAAS,QAAQ;EAGpC,OAAIU,CAAA,GACK,CAACL,CAAA,EAAQH,CAAA,EAAOQ,CAAU,IAG5B,CAACR,CAAA,EAAOG,CAAA,EAAQK,CAAU,CACnC;AAAA;ACNe,SAAR4H,GACLtI,CAAA,EACAE,CAAA,EACAG,CAAA,EACAK,CAAA,EACAC,CAAA,GAAS,GACT;EACA,IAAM,CAACyC,CAAA,EAAcC,CAAA,EAAeE,CAAU,IAAI8E,EAAA,CAAc3H,CAAA,EAAQyG,UAAA,EAAYE,WAAW;IAE3F7D,CAAA,GAAI7C,CAAA;IACJ8C,CAAA,GAAQL,CAAA,GAAezC,CAAA,GAAS;IAChCyG,CAAA,GAAS/D,CAAA,GAAgB1C,CAAA,GAAS;IAGhC2G,CAAA,GAAapH,CAAA,GAAeG,CAAA,GAAiBgD,CAAA;IAC7CkE,CAAA,GAAclH,CAAA,GAAgBH,CAAA,GAAgBkD,CAAA;EAEhDlD,CAAA,GAAekD,CAAA,IAAgB/C,CAAA,GAAgBgD,CAAA,IACjDI,CAAA,GAAQvD,CAAA,EACRkH,CAAA,GAAS/G,CAAA,IACAH,CAAA,GAAekD,CAAA,IAAgB/C,CAAA,IAAiBgD,CAAA,GACzDI,CAAA,GAAQ6D,CAAA,GACCpH,CAAA,IAAgBkD,CAAA,IAAgB/C,CAAA,GAAgBgD,CAAA,IAEhDnD,CAAA,GAAeG,CAAA,GAAgB+C,CAAA,GAAeC,CAAA,GADvD+D,CAAA,GAASG,CAAA,GAKFlH,CAAA,GAAgBH,CAAA,IAAgB,KAAiB,CAACqD,CAAA,IACzD6D,CAAA,GAASG,CAAA,EACT/D,CAAA,IAAK4D,CAAA,GAAS/D,CAAA,IAAiB,KAE/BI,CAAA,GAAQ6D,CAAA;EAEV,IAAME,CAAA,GAA0C;IAC9CxB,KAAA,EAAAvC,CAAA;IACAsC,MAAA,EAAAqB,CAAA;IACAa,CAAA,EAAGtH,CAAA;IACHuH,CAAA,EAAA1E,CAAA;IACA+E,KAAA,EAAO,CAAAvI;EACT;EACA,OAAIA,CAAA,KAAYwH,CAAA,CAAMgB,KAAA,GAAQvG,IAAA,CAAKE,GAAA,CAAIiF,CAAA,GAAS/G,CAAA,EAAeoD,CAAA,GAAQvD,CAAA,EAAc,CAAC,IAC/EsH,CACT;AAAA;ACjDA,SAASiB,WAAA,IAAAC,EAAA,EAAa9I,MAAA,IAAA+I,EAAA,QAAc;AAOrB,SAARC,GACL5I,CAAA,EACA;EACE6I,OAAA,EAAA3I,CAAA,GAAU;EACV4I,OAAA,EAAAzI,CAAA;EACA0I,IAAA,EAAArI,CAAA,GAAOL,CAAA,IAAW;AACpB,GAKqC;EACrC,IAAMM,CAAA,GAAcgI,EAAA,CAAO3I,CAAQ;EACnCW,CAAA,CAAYV,OAAA,GAAUD,CAAA;EAEtB,IAAMoD,CAAA,GAAOuF,EAAA,CAAO,CAAC;IACftF,CAAA,GAAkBsF,EAAA,CAAsC;IACxDpF,CAAA,GAAgByF,CAAA,KAAM3F,CAAA,CAAgBpD,OAAA,IAAWgJ,YAAA,CAAa5F,CAAA,CAAgBpD,OAAO;IAErFuD,CAAA,GAAKkF,EAAA,CACT,IAAIjF,CAAA,KAA4B;MAC9B,IAAM2D,CAAA,GAAM8B,IAAA,CAAKC,GAAA,CAAI;MAErB,SAAS7B,EAAA,EAAO;QACdlE,CAAA,CAAKnD,OAAA,GAAUmH,CAAA,EACf7D,CAAA,CAAc,GACd5C,CAAA,CAAYV,OAAA,CAAQmJ,KAAA,CAAM,MAAM3F,CAAI,CACtC;MAAA;MACA,IAAM8D,CAAA,GAAOnE,CAAA,CAAKnD,OAAA;QACZuH,CAAA,GAASJ,CAAA,GAAMG,CAAA;MAUrB,IARIA,CAAA,KAAS,MACPrH,CAAA,IACFoH,CAAA,CAAK,GAEPlE,CAAA,CAAKnD,OAAA,GAAUmH,CAAA,GAIb/G,CAAA,KAAY;QACd,IAAImH,CAAA,GAASnH,CAAA,EAAS;UACpBiH,CAAA,CAAK;UACL;QACF;MAAA,OACSE,CAAA,GAAS9G,CAAA,KAClB0C,CAAA,CAAKnD,OAAA,GAAUmH,CAAA;MAIjB7D,CAAA,CAAc,GACdF,CAAA,CAAgBpD,OAAA,GAAUoJ,UAAA,CAAW,MAAM;QACzC/B,CAAA,CAAK,GACLlE,CAAA,CAAKnD,OAAA,GAAU,CACjB;MAAA,GAAGS,CAAI,CACT;IAAA,GACA,CAACA,CAAA,EAAML,CAAA,EAASH,CAAO,CACzB;EACC,OAACsD,CAAA,CAA2C8F,MAAA,GAAS/F,CAAA,EAE/CC,CACT;AAAA;ACnEA,SAAS5D,MAAA,IAAA2J,EAAA,QAAc;AAWR,SAARC,GACLxJ,CAAA,EACAE,CAAA,EACgB;EAEhB,IAAMG,CAAA,GAAkBkJ,EAAA,CAAO,CAAC;IAE1B7I,CAAA,GAAckI,EAAA,CAClB,IAAIjI,CAAA,KAAS;MACXN,CAAA,CAAgBJ,OAAA,GAAU,GAC1BD,CAAA,CAAU,GAAGW,CAAI,CACnB;IAAA,GACA;MACEoI,IAAA,EAAM;IACR,CACF;EAEA,OAAO,aAAsB3F,CAAA,EAAM;IACjC/C,CAAA,CAAgBJ,OAAA,IAAW,GAC3BS,CAAA,CAAY,GAAG0C,CAAI,GAEf/C,CAAA,CAAgBJ,OAAA,IAAW,MAC7BS,CAAA,CAAY4I,MAAA,CAAO,GACnBjJ,CAAA,CAAgBJ,OAAA,GAAU,GAC1BC,CAAA,CAAU,GAAGkD,CAAI,EAErB;EAAA,CACF;AAAA;AC/BA,IAAMqG,EAAA,GAAUC,CAAC1J,CAAA,EAAeE,CAAA,EAAeG,CAAA,KAC7CsJ,EAAA,CACE3J,CAAA,EACAE,CAAA,EACAG,CAAA,EACA,MAAe,GACfK,CAAA,IAAKA,CAAA,EACL,MAAMiJ,EAAA,CAAYzJ,CAAA,EAAOF,CAAA,EAAOK,CAAQ,CAC1C;AAKa,SAARuJ,GACL5J,CAAA,EACAE,CAAA,EACAG,CAAA,EACA;EACA,IAAMK,CAAA,GAAWX,CAAA,CAAW;IAC1B8J,CAAA,EAAIlJ,CAAA,IAAoBX,CAAA,CAAUW,CAAO;IACzCmJ,CAAA,EAAInJ,CAAA,IAAoBT,CAAA,CAAUS,CAAO;IACzCoJ,CAAA,EAAIpJ,CAAA,IAAoBN,CAAA,CAAUM,CAAO;EAC3C,CAAC;EAED,OAAO,CACLA,CAAA,EACAyC,CAAA,EACAC,CAAA,EACAE,CAAA,EACAC,CAAA,EACAC,CAAA,EACA2D,CAAA,EACAE,CAAA,EACAC,CAAA,EACAC,CAAA,EACAC,CAAA,EACAC,CAAA,EACAC,CAAA,KACG;IACH,IAAM,CAACC,CAAA,EAAcC,CAAa,IAAIQ,EAAA,CAAcX,CAAA,EAAQlE,CAAA,EAAOC,CAAM;MAEnE,CAACqE,CAAA,EAAYC,CAAM,IAAIf,CAAA,CAAoBrG,CAAA,EAAG6G,CAAA,EAAWI,CAAA,EAAcT,UAAU;MACjF,CAACa,CAAA,EAAYgC,CAAM,IAAIhD,CAAA,CAAoB5D,CAAA,EAAGoE,CAAA,EAAWK,CAAA,EAAeR,WAAW;MACnF0C,CAAA,GAAWb,IAAA,CAAKC,GAAA,CAAI,IAAIxB,CAAA;IAG9B,IAAIoC,CAAA,IAAY,OAAgBvC,CAAA,IAAaD,CAAA,IAAStF,IAAA,CAAKgI,GAAA,CAAIxC,CAAA,GAAYF,CAAK,IAAI,GAAG;MAErF,IAAM;UAAEU,CAAA,EAAGiC,CAAA;UAAOhC,CAAA,EAAGiC;QAAM,IAAIjD,EAAA,CAC7B,IACAvG,CAAA,EACAyC,CAAA,EACAI,CAAA,EACAC,CAAA,EACA2D,CAAA,EACAE,CAAA,EACAC,CAAA,EACAC,CACF;QACM4C,CAAA,GAAUtC,CAAA,GAAaC,CAAA,GAASmC,CAAA,KAAUvJ,CAAA,GAAIuJ,CAAA,GAAQ;QACtDG,CAAA,GAAUrC,CAAA,GAAagC,CAAA,GAASG,CAAA,KAAU/G,CAAA,GAAI+G,CAAA,GAAQ;MAExDC,CAAA,KAAY,QACdT,EAAA,CAAYhJ,CAAA,EAAGyJ,CAAA,EAAS1J,CAAA,CAASmJ,CAAC,GAEhCQ,CAAA,KAAY,QACdV,EAAA,CAAYvG,CAAA,EAAGiH,CAAA,EAAS3J,CAAA,CAASoJ,CAAC,GAEhCtC,CAAA,IAAaD,CAAA,IACfoC,EAAA,CAAYpC,CAAA,EAAOC,CAAA,EAAW9G,CAAA,CAASqJ,CAAC;MAE1C;IACF;IAGA,IAAMO,CAAA,IAAU3J,CAAA,GAAI0C,CAAA,IAAS0G,CAAA;MACvBQ,CAAA,IAAUnH,CAAA,GAAIG,CAAA,IAASwG,CAAA;MACvBS,CAAA,GAASvI,IAAA,CAAK2E,IAAA,CAAKC,EAAA,CAAAyD,CAAA,EAAU,KAAIzD,EAAA,CAAA0D,CAAA,EAAU,EAAC;MAE9CrC,CAAA,GAAQ;MACRuC,CAAA,GAAQ;IAEZC,EAAA,CAAWF,CAAA,EAAQN,CAAA,IAAW;MAC5B,IAAMC,CAAA,GAAQxJ,CAAA,GAAIuJ,CAAA,IAAWI,CAAA,GAASE,CAAA;QAChCJ,CAAA,GAAQhH,CAAA,GAAI8G,CAAA,IAAWK,CAAA,GAASC,CAAA;QAEhC,CAACH,CAAA,EAASM,CAAQ,IAAI3D,CAAA,CAAoBmD,CAAA,EAAO5C,CAAA,EAAOK,CAAA,EAAcT,UAAU;QAChF,CAACyD,CAAA,EAASC,CAAQ,IAAI7D,CAAA,CAAoBoD,CAAA,EAAO7C,CAAA,EAAOM,CAAA,EAAeR,WAAW;MAoBxF,IAlBIgD,CAAA,IAAW,CAACnC,CAAA,KACdA,CAAA,GAAQ,IACJJ,CAAA,GACF6B,EAAA,CAAYQ,CAAA,EAAOQ,CAAA,EAAUjK,CAAA,CAASmJ,CAAC,IAEvCJ,EAAA,CAAQkB,CAAA,EAAUR,CAAA,IAASA,CAAA,GAAQQ,CAAA,GAAWjK,CAAA,CAASmJ,CAAC,IAIxDe,CAAA,IAAW,CAACH,CAAA,KACdA,CAAA,GAAQ,IACJzC,CAAA,GACF2B,EAAA,CAAYS,CAAA,EAAOS,CAAA,EAAUnK,CAAA,CAASoJ,CAAC,IAEvCL,EAAA,CAAQoB,CAAA,EAAUT,CAAA,IAASA,CAAA,GAAQS,CAAA,GAAWnK,CAAA,CAASoJ,CAAC,IAIxD5B,CAAA,IAASuC,CAAA,EACX,OAAO;MAGT,IAAMK,CAAA,GAAU5C,CAAA,IAASxH,CAAA,CAASmJ,CAAA,CAAEc,CAAQ;QACtCI,CAAA,GAAUN,CAAA,IAAS/J,CAAA,CAASoJ,CAAA,CAAEe,CAAQ;MAC5C,OAAOC,CAAA,IAAWC,CACpB;IAAA,CAAC,CACH;EAAA,CACF;AAAA;AAGA,IAAMC,EAAA,GAAe;EAEfC,EAAA,GAAa;AAKnB,SAASP,GAAW1K,CAAA,EAAsBE,CAAA,EAAwC;EAChF,IAAIG,CAAA,GAAIL,CAAA;IACJU,CAAA,GAAI;IACJC,CAAA;IACAyC,CAAA,GAAU;IAERC,CAAA,GAAYI,CAAA,IAAgB;MAC3B9C,CAAA,KACHA,CAAA,GAAW8C,CAAA;MAEb,IAAM2D,CAAA,GAAK3D,CAAA,GAAM9C,CAAA;QACX2G,CAAA,GAAYrF,IAAA,CAAKiJ,IAAA,CAAKlL,CAAY;QAClCuH,CAAA,GAAID,CAAA,GAAY0D,EAAA;QAChBxD,CAAA,GAAIvF,IAAA,CAAKiJ,IAAA,CAAK,CAAC7K,CAAC,IAAIwG,EAAA,CAAAxG,CAAA,EAAK,KAAI4K,EAAA;QAC7BxD,CAAA,GAAKpH,CAAA,GAAI+G,CAAA,IAAOG,CAAA,GAAIC,CAAA,IAAKX,EAAA,CAAAO,CAAA,EAAM,KAAK;MAO1C,IANA/G,CAAA,GAAIA,CAAA,IAAKkH,CAAA,GAAIC,CAAA,IAAKJ,CAAA,EAElB1G,CAAA,GAAIA,CAAA,GAAI+G,CAAA,EAER9G,CAAA,GAAW8C,CAAA,EAEP6D,CAAA,GAAYjH,CAAA,IAAK,GAAG;QACtBmD,CAAA,CAAI;QACJ;MACF;MAEA,IAAItD,CAAA,CAASQ,CAAC,GAAG;QACf6C,CAAA,CAAI;QACJ;MACF;MACAC,CAAA,CAAI,CACN;IAAA;EACAD,CAAA,CAAI;EAEJ,SAASA,EAAA,EAAM;IACbH,CAAA,GAAU+H,qBAAA,CAAsB9H,CAAQ,CAC1C;EAAA;EACA,SAASG,EAAA,EAAM;IACb4H,oBAAA,CAAqBhI,CAAO,CAC9B;EAAA;AACF;AAKA,IAAMiI,EAAA,GAAgBrL,CAAA,IAAc,IAAK6G,EAAA,KAAI7G,CAAA,EAAM;AAKnD,SAAS2J,GACP3J,CAAA,EACAE,CAAA,EACAG,CAAA,EACAK,CAAA,GAAQ,KACRC,CAAA,GAAS0K,EAAA,EACTjI,CAAA,EACA;EACA,IAAMC,CAAA,GAAWnD,CAAA,GAAMF,CAAA;EACvB,IAAIqD,CAAA,KAAa,GACf;EAGF,IAAME,CAAA,GAAY2F,IAAA,CAAKC,GAAA,CAAI;IACvB3F,CAAA,GAAU;IAERC,CAAA,GAAW6H,CAAA,KAAM;MACrB,IAAMhE,CAAA,GAAOrF,IAAA,CAAKE,GAAA,CAAI,IAAI+G,IAAA,CAAKC,GAAA,CAAI,IAAI5F,CAAA,IAAa7C,CAAK;MAGzD,IAFeL,CAAA,CAASL,CAAA,GAAQW,CAAA,CAAO2G,CAAI,IAAIjE,CAAQ,KAEzCiE,CAAA,GAAO,GAAG;QACtBF,CAAA,CAAI;QACJ;MACF;MACAgE,oBAAA,CAAqB5H,CAAO,GACxB8D,CAAA,IAAQ,KAAKlE,CAAA,IACfA,CAAA,CAAS,CAEb;IAAA;EACAgE,CAAA,CAAI;EAEJ,SAASA,EAAA,EAAM;IACb5D,CAAA,GAAU2H,qBAAA,CAAsB1H,CAAQ,CAC1C;EAAA;AACF;ACxNA,SAAS9B,QAAA,IAAA4J,EAAA,EAAUjJ,SAAA,IAAAkJ,EAAA,EAAW5L,MAAA,IAAA6L,EAAA,QAAc;AAK5C,IAAMC,EAAA,GAA8B;EAClC/D,CAAA,EAAG;EACHuC,CAAA,EAAG;EACHS,CAAA,EAAG;EACHG,CAAA,EAAG;EAEHa,GAAA,EAAK;AACP;AAEe,SAARC,GACL5L,CAAA,EACAE,CAAA,EACAG,CAAA,EACAK,CAAA,EACAC,CAAA,EACAyC,CAAA,EAKA;EACA,IAAM,CAACC,CAAA,EAAYE,CAAgB,IAAIgI,EAAA,CAASG,EAAW;IAErD,CAAClI,CAAA,EAAYC,CAAgB,IAAI8H,EAAA,CAAqBvL,CAAA,GAAa,IAAI,CAAC;IACxEoH,CAAA,GAAcqE,EAAA,CAAe;IAE7BnE,CAAA,GAAKvH,CAAA,CAAW;MACpB8L,EAAA,EAAIA,CAAA,KAAM3L,CAAA,IAAWuD,CAAA,CAAiB,CAAC;IACzC,CAAC;EAED+H,EAAA,CAAU,MAAM;IAKd,IAHKpE,CAAA,CAAYnH,OAAA,KACfmH,CAAA,CAAYnH,OAAA,GAAUiJ,IAAA,CAAKC,GAAA,CAAI,IAE7B,EAACzI,CAAA,KAGLoL,EAAA,CAAmBzL,CAAA,EAAWkD,CAAgB,GAC1C,CAAAvD,CAAA,GAEJ;MAAA,IAAIE,CAAA,EAAS;QAGX,IAAIgJ,IAAA,CAAKC,GAAA,CAAI,IAAI/B,CAAA,CAAYnH,OAAA,GAAU,KAAsB;UAC3DwD,CAAA,CAAiB,CAAC,GAElB0H,qBAAA,CAAsB,MAAM;YAC1B1H,CAAA,CAAiB,CAAC,GAClB0H,qBAAA,CAAsB,MAAM5D,CAAA,CAAc,CAAC,CAAC,CAC9C;UAAA,CAAC,GACD8B,UAAA,CAAW/B,CAAA,CAAGuE,EAAA,EAAIlL,CAAK;UACvB;QACF;QAEA8C,CAAA,CAAiB,CAAC;QAClB;MACF;MAEA8D,CAAA,CAAc,CAAC;IAAA;EACjB,GAAG,CAACrH,CAAA,EAASQ,CAAA,EAAQV,CAAU,CAAC;EAEhC,SAASuH,EAAcC,CAAA,EAA0B;IAC/CpE,CAAA,CAAa,EAAK,GAClBK,CAAA,CAAiB+D,CAAY,CAC/B;EAAA;EAEA,OAAO,CAAChE,CAAA,EAAYH,CAAU,CAChC;AAAA;AAKA,SAASyI,GACP9L,CAAA,EACAE,CAAA,EACA;EACA,IAAMG,CAAA,GAAUL,CAAA,IAAaA,CAAA,CAAUC,OAAA;EAEvC,IAAII,CAAA,IAAWA,CAAA,CAAQ0L,QAAA,KAAa,GAAG;IAErC,IAAM;QAAEnG,GAAA,EAAAlF,CAAA;QAAKmF,IAAA,EAAAlF,CAAA;QAAMqF,KAAA,EAAA5C,CAAA;QAAO2C,MAAA,EAAA1C;MAAO,IAAIhD,CAAA,CAAQ2L,qBAAA,CAAsB;MAC7DzI,CAAA,GAAUlD,CAAA,CAAQ4L,OAAA,KAAY;IACpC/L,CAAA,CAAiB;MACfyH,CAAA,EAAGjH,CAAA;MACHwJ,CAAA,EAAGvJ,CAAA;MACHgK,CAAA,EAAGvH,CAAA;MACH0H,CAAA,EAAGzH,CAAA;MACHsI,GAAA,EAAKpI,CAAA,GACA2I,gBAAA,CAAiB7L,CAAO,EAAE8L,SAAA,GAC3B;IACN,CAAC,CACH;EAAA;AACF;ACnGA,SAASvM,MAAA,IAAAwM,EAAA,QAAc;AAQR,SAARC,GACLrM,CAAA,EACAE,CAAA,EACAG,CAAA,EACAK,CAAA,EACAC,CAAA,EACAyC,CAAA,EACAC,CAAA,EACAE,CAAA,EACA;EACA,IAAMC,CAAA,GAAU4I,EAAA,CAAO,EAAK;IAEtB,CAAC;MAAEE,IAAA,EAAA7I,CAAA;MAAM+E,KAAA,EAAApB;IAAM,GAAGE,CAAW,IAAIvG,EAAA,CAAY;MAAEuL,IAAA,EAAM;MAAM9D,KAAA,EAAOpF;IAAU,CAAC;IAE7EmE,CAAA,GAAYqB,EAAA,CACTpB,CAAA,IAAoB+E,EAAA;MACzBhJ,CAAA,CAAa,EAAI,GACjB+D,CAAA,CAAY;QAAEgF,IAAA,EAAM;QAAO9D,KAAA,EAAOhB;MAAQ,CAAC,CAC7C;IAAA,IACA;MAAEuB,IAAA,EAAM1F;IAAM,CAChB;EAYA,OAVAN,EAAA,CAA0B,MAAM;IAC9B,IAAI,CAACS,CAAA,CAAQvD,OAAA,IAAWD,CAAA,EAAY;MAClCwD,CAAA,CAAQvD,OAAA,GAAU;MAClB;IACF;IACAsD,CAAA,CAAa,EAAK,GAClB+D,CAAA,CAAY;MAAEgF,IAAA,EAAM;IAAK,CAAC,GAC1B/E,CAAA,CAAUnE,CAAS,CACrB;EAAA,GAAG,CAACA,CAAA,EAAWpD,CAAU,CAAC,GAEtBA,CAAA,GACK,CAACU,CAAA,GAAe0C,CAAA,EAAWzC,CAAA,GAAgByC,CAAA,EAAWA,CAAS,IAGpEK,CAAA,GAEK,CAACvD,CAAA,GAAYkH,CAAA,EAAO/G,CAAA,GAAa+G,CAAA,EAAOhE,CAAA,GAAYgE,CAAK,IAG3D,CAAClH,CAAA,GAAYkD,CAAA,EAAW/C,CAAA,GAAa+C,CAAA,EAAW,CAAC,CAC1D;AAAA;AC9Ce,SAARoJ,GACLxM,CAAA,EACAE,CAAA,EACAG,CAAA,EACAK,CAAA,EACAC,CAAA,EACAyC,CAAA,EACAC,CAAA,EACAE,CAAA,EACAC,CAAA,EACAC,CAAA,EACA2D,CAAA,EACAE,CAAA,EACAC,CAAA,EACA;EAEA,IAAM,CAACC,CAAA,EAAWC,CAAA,EAAYC,CAAS,IAAI2E,EAAA,CACzCrM,CAAA,EACAqD,CAAA,EACAE,CAAA,EACAC,CAAA,EACAC,CAAA,EACA2D,CAAA,EACAE,CAAA,EACAC,CACF;IAEM,CAACI,CAAA,EAAYC,CAAU,IAAIgE,EAAA,CAC/B5L,CAAA,EACAE,CAAA,EACAG,CAAA,EACAK,CAAA,EACA4G,CAAA,EACAC,CACF;IAGM;MAAEI,CAAA,EAAAE,CAAA;MAAGqC,CAAA,EAAApC,CAAA;MAAG6C,CAAA,EAAA5C,CAAA;MAAG+C,CAAA,EAAA9C,CAAA;MAAG2D,GAAA,EAAA3B;IAAI,IAAIpC,CAAA;IAEtBmC,CAAA,GAAc5C,UAAA,GAAa;IAC3BmD,CAAA,GAAejD,WAAA,GAAc;IAC7BkD,CAAA,GAAUR,CAAA,IAAgB/J,CAAA,GAAawD,CAAA,GAAeH,CAAA,IAAS+D,CAAA,GAAS;IACxEoD,CAAA,GAAUF,CAAA,IAAiBtK,CAAA,GAAayD,CAAA,GAAgBF,CAAA,IAAU6D,CAAA,GAAS;IAE3Ec,CAAA,GAAWP,CAAA,GAAa,KAAKA,CAAA,GAAa;IAE1C8C,CAAA,GAAavC,CAAA,GAAYH,CAAA,GAAID,CAAA,GAAIiC,CAAA,GAAepJ,CAAA,GAAI4J,CAAA;IACpDL,CAAA,GAAahC,CAAA,GAAYH,CAAA,GAAIF,CAAA,GAAIyC,CAAA,GAAgBlH,CAAA,GAAIoH,CAAA;IAGrDL,CAAA,GAAWpC,CAAA,KAAM/H,CAAA,GAAawD,CAAA,GAAeH,CAAA,IAAS+D,CAAA,KAAU;IAGhEgD,CAAA,GAAgBlC,CAAA,IAAY8B,CAAA,GAAMxC,CAAA,IAAaQ,CAAA,GAAID,CAAA,IAAKN,CAAA;EAK9D,OAAO,CACLgD,CAAA,EACAP,CAAA,EACA1C,CAAA,EACA4C,CAAA,EAPmBzC,CAAA,KAAe,IAAID,CAAA,GAAYQ,CAAA,GAAWiC,CAAA,GAAWzC,CAAA,EAC1DQ,CAAA,GAAY8B,CAAA,GAAM,IAAI,IAAK,GASzCrC,CAAA,EACAqC,CACF,CACF;AAAA;ACxEA,SAAS1H,SAAA,IAAAmK,EAAA,EAAW7M,MAAA,IAAA8M,EAAA,QAAc;AAElC,IAAMC,EAAA,GAAgBC,CAAA,KAAM;IAC1B,IAAM5M,CAAA,GAAa0M,EAAA,CAAO,EAAK;IAC/B,OAAAD,EAAA,CAAU,OACRzM,CAAA,CAAWC,OAAA,GAAU,IACd,MAAM;MACXD,CAAA,CAAWC,OAAA,GAAU,EACvB;IAAA,IACC,EAAE,GACED,CACT;EAAA;EAEO6M,EAAA,GAAQF,EAAA;ACbf,OAAOG,EAAA,MAA+B;AAEtC,OAAOC,EAAA,MAA+B;AAEtC,OAAOC,EAAA,MAA+B;AAEtC,OAAOC,EAAA,MAA8B;AAErC,SAAS3L,GAAA,IAAO4L,EAAA,QAAY;AAC5B,OAAkB;ACTlB,OAAOC,EAAA,MAA8B;AAErC,OAAkB;AAClB,SAASC,SAAA,IAAAC,EAAA,QAAiB;AAWpB,SACExI,GAAA,IAAAyI,EAAA,EADFC,IAAA,IAAAC,EAAA;AAbM,IAAMC,EAAA,GAAU,OAAON,EAAA,CAAyBpI,OAAA,IAAY,cAAcoI,EAAA,GAA2BA,EAAA,CAAyBpI,OAAA;EAGpI2I,EAAA,GAASL,EAAA,CAAU,CAAC,4DAA4D,CAAC;EACjFM,EAAA,GAAUN,EAAA,CAAU,CAAC,oCAAoC,CAAC;EAC1DO,EAAA,GAAgBH,EAAA,CAAQI,GAAA,CAAIpI,UAAA,CAAW;IAC3CC,WAAA,EAAa;EACf,CAAC,EAAE,CAAC,cAAc,oCAAoC,yBAAyB,GAAGiI,EAAA,EAASD,EAAM;AACjG,SAASI,GAAQzN,CAAA,EAGd;EAHc,IAAAK,CAAA,GAAAL,CAAA;IACf;MAAA0N,SAAA,EAAA/N;IAVF,IASiBU,CAAA;IAEZR,CAAA,GAAAkF,EAAA,CAFY1E,CAAA,EAEZ,CADH;EAGA,OAAO4M,EAAA,CAACM,EAAA,EAAAhK,CAAA,CAAA5C,CAAA;IAAc+M,SAAA,EAAW/N;EAAA,GAAeE,CAAA,GAAxC;IACJ8N,QAAA,EAAAR,EAAA,CAAC;MAAIS,OAAA,EAAQ;MAAYjI,KAAA,EAAM;MAAKD,MAAA,EAAO;MAAKmI,IAAA,EAAK;MACnDF,QAAA,GAAAV,EAAA,CAAC;QAAKa,OAAA,EAAQ;QAAM3G,CAAA,EAAE;MAAA,CAAwF,GAC9G8F,EAAA,CAAC;QAAK9F,CAAA,EAAE;MAAA,CAAqD;IAAA,CAC/D;EAAA,EACF,CACJ;AAAA;AACA,IAAO4G,EAAA,GAAQN,EAAA;ADiCJ,SAAAO,QAAA,IAAAC,EAAA,EACHzJ,GAAA,IAAA0J,EAAA,EADGhB,IAAA,IAAAiB,EAAA;AApDC,IAAMC,EAAA,GAAW,OAAO3B,EAAA,CAA0B/H,OAAA,IAAY,cAAc+H,EAAA,GAA4BA,EAAA,CAA0B/H,OAAA;EAE5H2J,EAAA,GAAW,OAAO3B,EAAA,CAA0BhI,OAAA,IAAY,cAAcgI,EAAA,GAA4BA,EAAA,CAA0BhI,OAAA;EAE5H4J,EAAA,GAAW,OAAO3B,EAAA,CAA0BjI,OAAA,IAAY,cAAciI,EAAA,GAA4BA,EAAA,CAA0BjI,OAAA;EAE5H6J,EAAA,GAAU,OAAO3B,EAAA,CAAyBlI,OAAA,IAAY,cAAckI,EAAA,GAA2BA,EAAA,CAAyBlI,OAAA;EAKpI8J,EAAA,GAAa,CAAC;IAClBlJ,QAAA,EAAY;IACZE,IAAA,EAAQ;IACRD,GAAA,EAAO;IACPkJ,OAAA,EAAW;IACX,oBAAoB;IACpBC,SAAA,EAAa;IACb,oBAAoB;EACtB,CAAC;AACc,SAARC,GAAuBxL,CAAA,EAS3B;EAT2B,IAAAC,CAAA,GAAAD,CAAA;IAC5B;MAAAyL,GAAA,EAAAjP,CAAA;MACAkP,MAAA,EAAAhP,CAAA;MACAiP,MAAA,EAAA9O,CAAA;MACA0N,SAAA,EAAArN,CAAA;MACA0O,WAAA,EAAAzO,CAAA;MACA0O,cAAA,EAAAjM,CAAA;MACAkM,aAAA,EAAAjM;IA5BF,IAqB8BI,CAAA;IAQzBF,CAAA,GAAA6B,EAAA,CARyB3B,CAAA,EAQzB,CAPH,OACA,UACA,UACA,aACA,eACA,kBACA;EAGA,IAAM2D,CAAA,GAAayF,EAAA,CAAc;EACjC,SAASvF,EAAkBE,CAAA,EAAG;IAC5B,IAAM;MACJ+H,YAAA,EAAA9H,CAAA;MACA+H,aAAA,EAAA9H;IACF,IAAIF,CAAA,CAAEiI,MAAA;IACFrI,CAAA,CAAWnH,OAAA,IACbU,CAAA,CAAY;MACVuO,MAAA,EAAQ;MACRK,YAAA,EAAA9H,CAAA;MACA+H,aAAA,EAAA9H;IACF,CAAC,CAEL;EAAA;EACA,SAASH,EAAA,EAAoB;IACvBH,CAAA,CAAWnH,OAAA,IACbU,CAAA,CAAY;MACVwO,MAAA,EAAQ;IACV,CAAC,CAEL;EAAA;EACA,OAAInP,CAAA,IAAO,CAACK,CAAA,GACHmO,EAAA,CAAAF,EAAA;IACHN,QAAA,GAAAO,EAAA,CAACmB,EAAA,EAAA9L,CAAA,CAAA5C,CAAA;MAAW+M,SAAA,EAAWrN,CAAA;MAAWuO,GAAA,EAAKjP,CAAA;MAAK2P,MAAA,EAAQrI,CAAA;MAAmBsI,OAAA,EAASrI,CAAA;MAAmBsI,GAAA,EAAI;IAAA,GAAOtM,CAAA,GAA7G;MAAwHuM,MAAA,EAAQ,CAAC;QAClIC,MAAA,EAAU;QACV,mBAAmB;QACnBC,eAAA,EAAmB;QACnB,WAAW;UACTD,MAAA,EAAU;QACZ;MACF,GAAG7C,EAAA,CAAK,CAAC,oBAAoB,CAAC,CAAC;IAAA,EAAG,GAC/B,CAAChN,CAAA,KAAWqO,EAAA,CAAC0B,EAAA;MAAajC,QAAA,EAAA5K;IAAA,CAAe,KAAkBmL,EAAA,CAAC2B,EAAA,IAAe;EAAA,CAC9E,IAEA7M,CAAA,GACKkL,EAAA,CAAC4B,EAAA;IACHnC,QAAA,SAAO3K,CAAA,IAAkB,aAAaA,CAAA,CAAc;MACrD4L,GAAA,EAAAjP;IACF,CAAC,IAAIqD;EAAA,CACL,IAEG,IACT;AAAA;AACA,IAAIqM,EAAA,GAAad,EAAA,CAAQ,KAAK,EAAEnJ,UAAA,CAAW;IACzCC,WAAA,EAAa;EACf,CAAC,EAAE,CAAC,IAAI,EAAE,GAAG1F,CAAA,IAAKA,CAAA,CAAE8P,MAAM;EACtBG,EAAA,GAAcrB,EAAA,CAAQ,MAAM,EAAEnJ,UAAA,CAAW;IAC3CC,WAAA,EAAa;EACf,CAAC,EAAE,CAAC,IAAI,EAAE,GAAGmJ,EAAU;EACnBqB,EAAA,GAAiBtB,EAAA,CAAQR,EAAO,EAAE3I,UAAA,CAAW;IAC/CC,WAAA,EAAa;EACf,CAAC,EAAE,CAAC,IAAI,EAAE,GAAGmJ,EAAU;EACnBsB,EAAA,GAAevB,EAAA,CAAQ,MAAM,EAAEnJ,UAAA,CAAW;IAC5CC,WAAA,EAAa;EACf,CAAC,EAAE,CAAC,IAAI,EAAE,GAAGmJ,EAAU;AboWR,SAAAhK,GAAA,IAAAuL,EAAA;AAxbH,IAAMC,EAAA,GAAU,OAAO/J,EAAA,CAAyBvB,OAAA,IAAY,cAAcuB,EAAA,GAA2BA,EAAA,CAAyBvB,OAAA;EAoBpIuL,EAAA,GAAe;IAEnBf,YAAA,EAAc;IAEdC,aAAA,EAAe;IAEfxJ,KAAA,EAAO;IAEPD,MAAA,EAAQ;IAERmJ,MAAA,EAAQ;IAERC,MAAA,EAAQ;IAERlH,CAAA,EAAG;IAEHC,CAAA,EAAG;IAEHqI,OAAA,EAAS;IAETC,WAAA,EAAa;IAEbC,MAAA,EAAQ;IAERjI,KAAA,EAAO;IAEPkI,EAAA,EAAI;IAEJC,EAAA,EAAI;IAEJC,KAAA,EAAO;IAEPC,KAAA,EAAO;IAEP1I,MAAA,EAAQ;IAERC,MAAA,EAAQ;IAER0I,SAAA,EAAW;IAEXC,SAAA,EAAW;IAEXC,WAAA,EAAa;IAEbzI,KAAA,EAAO;IAEP0I,OAAA,EAAS;IAETC,KAAA,EAAO;EACT;EACMC,EAAA,GAAad,EAAA,CAAQxC,GAAA,CAAIpI,UAAA,CAAW;IACxCC,WAAA,EAAa;EACf,CAAC,EAAE,CAAC,IAAI,gBAAgB,GAAG;IACzBC,QAAA,EAAY;IACZC,GAAA,EAAO;IACPwL,KAAA,EAAS;IACTC,MAAA,EAAU;IACVxL,IAAA,EAAQ;IACRG,KAAA,EAAS;IACTC,WAAA,EAAe;EACjB,CAAC;EACKqL,EAAA,GAAajB,EAAA,CAAQc,EAAU,EAAE1L,UAAA,CAAW;IAChDC,WAAA,EAAa;EACf,CAAC,EAAE,CAAC;IACF6L,UAAA,EAAAvR;EACF,MAAM,CAAC;IACL8F,MAAA,EAAU;EACZ,GAAG,CAAC9F,CAAA,IAAc;IAChBkG,QAAA,EAAY;EACd,CAAC,CAAC;EACIsL,EAAA,GAAYnB,EAAA,CAAQc,EAAU,EAAE1L,UAAA,CAAW;IAC/CC,WAAA,EAAa;EACf,CAAC,EAAE,CAAC,4BAA4B,CAAC;AAClB,SAAR+L,GAA0B;EAC/BF,UAAA,EAAAvR,CAAA,GAAa;EACb0R,IAAA,EAAM;IACJzC,GAAA,EAAA/O,CAAA;IACAyR,MAAA,EAAAtR,CAAA;IACA2F,KAAA,EAAOtF,CAAA,GAAc;IACrBqF,MAAA,EAAQpF,CAAA,GAAe;IACvBiR,SAAA,EAAAxO;EACF;EACAyO,OAAA,EAAAxO,CAAA;EACAyO,KAAA,EAAAvO,CAAA;EACAwO,MAAA,EAAAvO,CAAA;EACAwO,aAAA,EAAAvO,CAAA;EACAsK,SAAA,EAAA3G,CAAA;EACAf,KAAA,EAAAiB,CAAA;EACA+H,cAAA,EAAA9H,CAAA;EACA+H,aAAA,EAAA9H,CAAA;EACAyK,eAAA,EAAAxK,CAAA,GAAkB;EAClByK,UAAA,EAAAxK,CAAA;EACAyK,SAAA,EAAAxK,CAAA;EACAyK,WAAA,EAAAxK,CAAA;EACAyK,SAAA,EAAAxK,CAAA;EACAyK,aAAA,EAAAxK,CAAA;EACAyK,QAAA,EAAAxK,CAAA;EACAyK,MAAA,EAAAxK;AACF,GAAG;EACD,IAAM,CAACgC,CAAA,EAAOD,CAAW,IAAIhJ,EAAA,CAAYuP,EAAY;IAC/ChG,CAAA,GAAkB/D,EAAA,CAAO,CAAC;IAC1BgE,CAAA,GAAUsC,EAAA,CAAc;IACxB;MACJ0C,YAAA,EAAA/E,CAAA,GAAe9J,CAAA;MACf8O,aAAA,EAAAtH,CAAA,GAAgBvH,CAAA;MAChBqF,KAAA,EAAAyE,CAAA,GAAQ/J,CAAA;MACRqF,MAAA,EAAAmE,CAAA,GAASvJ,CAAA;MACTuO,MAAA,EAAA/E,CAAA,GAAS,CAACjK,CAAA;MACViP,MAAA,EAAA/E,CAAA;MACAnC,CAAA,EAAAoC,CAAA;MACAnC,CAAA,EAAAyC,CAAA;MACA4F,OAAA,EAAA3F,CAAA;MACAqG,OAAA,EAAApG,CAAA;MACA2F,WAAA,EAAA1F,CAAA;MACA2F,MAAA,EAAA1F,CAAA;MACAvC,KAAA,EAAAqB,CAAA;MACA6G,EAAA,EAAA+B,EAAA;MACA9B,EAAA,EAAA+B,EAAA;MACA9B,KAAA,EAAA+B,EAAA;MACA9B,KAAA,EAAA+B,EAAA;MACAzK,MAAA,EAAA0K,EAAA;MACAzK,MAAA,EAAA0K,EAAA;MACAhC,SAAA,EAAAiC,EAAA;MACAhC,SAAA,EAAAiC,CAAA;MACAhC,WAAA,EAAAiC,EAAA;MACA1K,KAAA,EAAA2K,EAAA;MACAhC,KAAA,EAAAiC;IACF,IAAInJ,CAAA;IACEoJ,EAAA,GAAKrT,CAAA,CAAW;MACpBsT,OAAA,EAASC,CAAA,IAAWC,CAAA,CAAQnR,EAAA,CAAWkR,CAAA,EAAStT,CAAU,CAAC;MAC3DwT,SAASF,CAAA,EAAS;QACZvI,CAAA,KAAWuI,CAAA,KACbtL,CAAA,CAAO;UACLyI,MAAA,EAAQ6C;QACV,CAAC,GACDvJ,CAAA,CAAYnG,CAAA,CAAA5C,CAAA;UACVyP,MAAA,EAAQ6C;QAAA,GACLhL,EAAA,CAAqBtI,CAAA,EAAYwK,CAAA,EAActC,CAAA,EAAeoL,CAAO,IAF9D;UAGV9K,KAAA,EAAAqB;QACF,EAAC,EAEL;MAAA;IACF,CAAC;EAGD,SAAS0J,EAAQD,CAAA,EAASG,CAAA,EAAS3J,CAAA,EAAS;IACtCD,CAAA,KAAUyJ,CAAA,KACZtL,CAAA,CAAO;MACLQ,KAAA,EAAO8K;IACT,CAAC,GACDvJ,CAAA,CAAY/I,CAAA,CAAAA,CAAA;MACVwH,KAAA,EAAO8K;IAAA,GACJpM,EAAA,CAAyBlH,CAAA,EAAYqK,CAAA,EAAGM,CAAA,EAAGF,CAAA,EAAOP,CAAA,EAAQM,CAAA,EAActC,CAAA,EAAe2B,CAAA,EAAOyJ,CAAA,EAASG,CAAA,EAAS3J,CAAO,KACrH9J,CAAA,GAAasT,CAAA,GAAU,KAAeA,CAAA,IAAW,KAAY;MAChErL,CAAA,EAAG;MACHC,CAAA,EAAG;IACL,IAAI,CAAC,EACN,EAEL;EAAA;EACA,IAAMwL,EAAA,GAAa9K,EAAA,CAAoB,CAAC0K,CAAA,EAAaG,CAAA,EAAa3J,CAAA,GAAqB,MAAM;IAC3F,KAAKc,CAAA,IAAWE,CAAA,KAAgB/C,CAAA,EAAU;MAExC,IAAM,CAAC4L,EAAA,EAAcC,EAAa,IAAIvL,EAAA,CAAc0C,CAAA,EAAQN,CAAA,EAAOP,CAAM;MAEzE,IAAIJ,CAAA,KAAuB,KAAKQ,CAAA,CAAgBrK,OAAA,KAAY,GAAG;QAC7D,IAAM4T,EAAA,GAAW5R,IAAA,CAAKgI,GAAA,CAAIqJ,CAAA,GAAcb,EAAE,KAAK;UACzCqB,EAAA,GAAW7R,IAAA,CAAKgI,GAAA,CAAIwJ,CAAA,GAAcf,EAAE,KAAK;QAE/C,IAAImB,EAAA,IAAYC,EAAA,EAAU;UAExB/J,CAAA,CAAY;YACV5B,MAAA,EAAQmL,CAAA;YACRlL,MAAA,EAAQqL;UACV,CAAC;UACD;QACF;QAEAnJ,CAAA,CAAgBrK,OAAA,GAAW4T,EAAA,GAAeJ,CAAA,GAAcf,EAAA,GAAK,IAAI,IAA3B,CACxC;MAAA;MACA,IAAMqB,EAAA,GAAUT,CAAA,GAAcT,EAAA;QACxBmB,EAAA,GAAUP,CAAA,GAAcX,EAAA;QAE1BmB,EAAA;MACJ,IAAInK,CAAA,KAAuB,GAAG;QAE5B,IAAM,CAAC+J,EAAmB,IAAI7M,CAAA,CAAoB+M,EAAA,GAAUpB,EAAA,EAAO9I,CAAA,EAAO8J,EAAA,EAAcxM,UAAU;UAC5F,CAAC2M,EAAiB,IAAI9M,CAAA,CAAoBgN,EAAA,GAAUpB,EAAA,EAAO/I,CAAA,EAAO+J,EAAA,EAAevM,WAAW;QAElG4M,EAAA,GAAenN,EAAA,CAAawD,CAAA,CAAgBrK,OAAA,EAAS4T,EAAA,EAAqBC,EAAA,EAAmBX,EAAK,GAE9Fc,EAAA,KAAiB,UACnBrM,CAAA,CAAYqM,EAAA,EAAcX,CAAA,EAAaG,CAAA,EAAa5J,CAAK,CAE7D;MAAA;MAEA,IAAIoK,EAAA,KAAiB,OAAOnJ,CAAA,IAAe9K,CAAA,EAAY;QACrD,IAAM6T,EAAA,GAAQ;UACZ3C,KAAA,EAAO;QACT;QACIlR,CAAA,KACF6T,EAAA,CAAM5L,CAAA,GAAI0K,EAAA,GAAQoB,EAAA,EAClBF,EAAA,CAAM3L,CAAA,GAAI0K,EAAA,GAAQoB,EAAA,EAClBH,EAAA,CAAMtL,KAAA,GAAQ,KAEhBwB,CAAA,CAAY8J,EAAK;QACjB;MACF;MAEA,IAAMK,EAAA,GAAU9R,EAAA,CAAWyH,CAAA,IAASC,CAAA,GAAqBmJ,EAAA,IAAe,MAAM,IAAIpJ,CAAA,EAAO7J,CAAA,EAAYwK,CAAA,GAAeC,CAAA,EAAO,EAAW;MAEtIzC,CAAA,CAAO;QACLQ,KAAA,EAAO0L;MACT,CAAC,GACDnK,CAAA,CAAY/I,CAAA;QACVgQ,WAAA,EAAalH,CAAA;QACboH,KAAA,EAAO+C,EAAA;QACPzL,KAAA,EAAO0L;MAAA,GACJhN,EAAA,CAAyBlH,CAAA,EAAYqK,CAAA,EAAGM,CAAA,EAAGF,CAAA,EAAOP,CAAA,EAAQM,CAAA,EAActC,CAAA,EAAe2B,CAAA,EAAOqK,EAAA,EAASZ,CAAA,EAAaG,CAAA,EAAaM,EAAA,EAASC,EAAO,EACrJ,CACH;IAAA;EACF,GAAG;IACDlL,OAAA,EAAS;EACX,CAAC;EACD,SAASqL,EAAUb,CAAA,EAAU;IAC3B,OAAIzI,CAAA,IAAWD,CAAA,GACN,MAELL,CAAA,CAAQtK,OAAA,IAEV8J,CAAA,CAAYnG,CAAA,CAAA5C,CAAA,KACPsS,CAAA,GADO;MAEV/K,KAAA,EAAOlF;IACT,EAAC,GAEIkH,CAAA,CAAQtK,OAAA,CACjB;EAAA;EACA,IAAMmU,EAAA,GAAkBxK,EAAA,CAAkB0J,CAAA,IAASa,CAAA,CAAU;MAC3DlM,CAAA,EAAGqL;IACL,CAAC,GAAGA,CAAA,IAASa,CAAA,CAAU;MACrBjM,CAAA,EAAGoL;IACL,CAAC,GAAGA,CAAA,KACE/I,CAAA,CAAQtK,OAAA,KACV+H,CAAA,CAAO;MACLQ,KAAA,EAAO8K;IACT,CAAC,GACDvJ,CAAA,CAAY;MACVvB,KAAA,EAAO8K;IACT,CAAC,IAEI,CAAC1I,CAAA,IAAWL,CAAA,CAAQtK,OAAA,CAC5B;IACKoU,EAAA,GAAiB7K,EAAA,CAAiB9B,CAAA,EAAY,CAAC4L,CAAA,EAAgBG,CAAA,KAAmB;MACtF,IAAI,CAACN,EAAA,IAAS,CAACnT,CAAA,EAAY;QAEzB,IAAM8J,CAAA,GAAWD,CAAA,KAAU,IAAI,IAAI5H,IAAA,CAAKC,GAAA,CAAI,GAAGsI,CAAA,GAAeC,CAAK;QACnE8I,CAAA,CAAQzJ,CAAA,EAAUwJ,CAAA,EAAgBG,CAAc,CAClD;MAAA;IACF,CAAC;EACD,SAASa,GAAShB,CAAA,EAAaG,CAAA,EAAa;IAG1C,IADAnJ,CAAA,CAAgBrK,OAAA,GAAU,IACrB2K,CAAA,IAAWE,CAAA,KAAgB/C,CAAA,EAAU;MACxCgC,CAAA,CAAY;QACVwG,OAAA,EAAS;QACTC,WAAA,EAAa;QACbjI,KAAA,EAAO;QACP0I,OAAA,EAAS;QACTC,KAAA,EAAO;MACT,CAAC;MACD,IAAMpH,CAAA,GAAY1H,EAAA,CAAWyH,CAAA,EAAO7J,CAAA,EAAYwK,CAAA,GAAeC,CAAK;MAOpE,IALKzK,CAAA,IACHoU,EAAA,CAAgB/J,CAAA,EAAGM,CAAA,EAAGgI,EAAA,EAAOC,EAAA,EAAOnI,CAAA,EAAOP,CAAA,EAAQM,CAAA,EAActC,CAAA,EAAe2B,CAAA,EAAOC,CAAA,EAAWiJ,EAAA,EAAWhI,CAAA,EAAQiI,CAAS,GAEhInL,CAAA,CAAUyL,CAAA,EAAaG,CAAW,GAE9BhB,EAAA,KAAOa,CAAA,IAAeZ,EAAA,KAAOe,CAAA,EAAa;QAC5C,IAAI7I,CAAA,EAAS;UACXyJ,EAAA,CAAef,CAAA,EAAaG,CAAW;UACvC;QACF;QACI3I,CAAA,IACFnD,CAAA,CAAU2L,CAAA,EAAaG,CAAW,CAEtC;MAAA;IACF;EACF;EACAzP,EAAA,CAAiBuQ,CAAA,GAAgB,SAAY,aAAajB,CAAA,IAAK;IAC7DA,CAAA,CAAEkB,cAAA,CAAe,GACjBd,EAAA,CAAWJ,CAAA,CAAE7M,OAAA,EAAS6M,CAAA,CAAE5M,OAAO,CACjC;EAAA,CAAC,GACD1C,EAAA,CAAiBuQ,CAAA,GAAgB,SAAY,WAAWjB,CAAA,IAAK;IAC3DgB,EAAA,CAAShB,CAAA,CAAE7M,OAAA,EAAS6M,CAAA,CAAE5M,OAAO,CAC/B;EAAA,CAAC,GACD1C,EAAA,CAAiBuQ,CAAA,GAAgB,cAAc,QAAWjB,CAAA,IAAK;IAC7DA,CAAA,CAAEkB,cAAA,CAAe;IACjB,IAAMf,CAAA,GAAWjN,EAAA,CAAyB8M,CAAC;IAC3CI,EAAA,CAAW,GAAGD,CAAQ,CACxB;EAAA,GAAG;IACDgB,OAAA,EAAS;EACX,CAAC,GACDzQ,EAAA,CAAiBuQ,CAAA,GAAgB,aAAa,QAAW,CAAC;IACxDG,cAAA,EAAApB;EACF,MAAM;IACJ,IAAMG,CAAA,GAAQH,CAAA,CAAe;IAC7BgB,EAAA,CAASb,CAAA,CAAMhN,OAAA,EAASgN,CAAA,CAAM/M,OAAO,CACvC;EAAA,GAAG;IACD+N,OAAA,EAAS;EACX,CAAC,GACDzQ,EAAA,CAAiB,UAAU4E,EAAA,CAAoB,MAAM;IAC/CuB,CAAA,IAAU,CAACS,CAAA,KAEXb,CAAA,CADE/J,CAAA,GACU;MACViI,CAAA,EAAG;MACHC,CAAA,EAAG;IACL,IACiBI,EAAA,CAAqBtI,CAAA,EAAYwK,CAAA,EAActC,CAAA,EAAe6C,CAAM,CADpF,GAEHjD,CAAA,CAAc,EAElB;EAAA,GAAG;IACDgB,OAAA,EAAS;EACX,CAAC,CAAC,GACF/F,EAAA,CAA0B,MAAM;IAC1BgF,CAAA,IACFC,CAAA,CAAOhH,CAAA;MACLwH,KAAA,EAAAqB,CAAA;MACA4G,MAAA,EAAA1F,CAAA;MACA4J,OAAA,EAAS,CAACxK;IAAA,GACPiJ,EAAA,CACJ,CAEL;EAAA,GAAG,CAACrL,CAAQ,CAAC;EACb,SAAS6M,GAAgBtB,CAAA,EAAQ;IAC/B,IAAMG,CAAA,GAAQH,CAAA,CAAOpE,MAAA,GAAS5G,EAAA,CAAqBtI,CAAA,EAAYsT,CAAA,CAAO/D,YAAA,IAAgB,GAAG+D,CAAA,CAAO9D,aAAA,IAAiB,GAAGzE,CAAM,IAAI,CAAC;IAC3H/K,CAAA,IAAcsT,CAAA,CAAOpE,MAAA,IAAUnH,CAAA,IAAUC,CAAA,CAAO;MAClDQ,KAAA,EAAOiL,CAAA,CAAMjL,KAAA;MACbmM,OAAA,EAAS;IACX,CAAC,GACD5K,CAAA,CAAY/I,CAAA,CAAAA,CAAA,KACPsS,CAAA,GACAG,CAAA,CACJ,CACH;EAAA;EACA,SAASoB,GAAYvB,CAAA,EAAgBG,CAAA,EAAgB3J,CAAA,GAAqB,GAAG;IAC3EC,CAAA,CAAY;MACVwG,OAAA,EAAS;MACTG,EAAA,EAAI4C,CAAA;MACJ3C,EAAA,EAAI8C,CAAA;MACJtL,MAAA,EAAQmL,CAAA;MACRlL,MAAA,EAAQqL,CAAA;MACR7C,KAAA,EAAOvG,CAAA;MACPwG,KAAA,EAAOlG,CAAA;MACPmG,SAAA,EAAWjH,CAAA;MACXmH,WAAA,EAAalH,CAAA;MACbiH,SAAA,EAAW7H,IAAA,CAAKC,GAAA,CAAI;IACtB,CAAC,CACH;EAAA;EACA,SAAS2L,GAAYxB,CAAA,EAAG;IACtB,IAAI,CAACH,EAAA,IAAS1L,CAAA,EAAiB;MAE7B,IAAMgM,CAAA,GAAQzT,CAAA,GAAasT,CAAA,CAAEyB,MAAA,GAAS,MAAM,KAAKzB,CAAA,CAAEyB,MAAA,GAAS,MAAM;QAC5DjL,CAAA,GAAU1H,EAAA,CAAWyH,CAAA,GAAQ4J,CAAA,EAAOzT,CAAA,EAAYwK,CAAA,GAAeC,CAAK;MAC1EV,CAAA,CAAY;QACVkH,OAAA,EAAS;MACX,CAAC,GACDsC,CAAA,CAAQzJ,CAAA,EAASwJ,CAAA,CAAE7M,OAAA,EAAS6M,CAAA,CAAE5M,OAAO,CACvC;IAAA;EACF;EACA,SAASsO,GAAgB1B,CAAA,EAAG;IAC1BvJ,CAAA,CAAY;MACVyG,WAAA,EAAa;MACbE,EAAA,EAAI4C,CAAA,CAAE7M,OAAA;MACNkK,EAAA,EAAI2C,CAAA,CAAE5M,OAAA;MACNkK,KAAA,EAAOvG,CAAA;MACPwG,KAAA,EAAOlG;IACT,CAAC,CACH;EAAA;EACA,SAASsK,GAAiB3B,CAAA,EAAG;IAC3BA,CAAA,CAAE4B,eAAA,CAAgB,GAClBL,EAAA,CAAY,GAAGrO,EAAA,CAAyB8M,CAAC,CAAC,CAC5C;EAAA;EACA,SAAS6B,GAAgB7B,CAAA,EAAG;IAC1BA,CAAA,CAAE4B,eAAA,CAAgB,GACd5B,CAAA,CAAE8B,MAAA,KAAW,KACfP,EAAA,CAAYvB,CAAA,CAAE7M,OAAA,EAAS6M,CAAA,CAAE5M,OAAA,EAAS,CAAC,CAEvC;EAAA;EAGA,IAAM,CAAC2O,EAAA,EAAYC,EAAA,EAAYC,EAAA,EAAcC,EAAA,EAAeC,EAAA,EAAcC,EAAA,EAASC,EAAA,EAAYC,EAAG,IAAIpJ,EAAA,CAAqBxM,CAAA,EAAYqD,CAAA,EAASD,CAAA,EAAW+G,CAAA,EAAQE,CAAA,EAAGM,CAAA,EAAGF,CAAA,EAAOP,CAAA,EAAQM,CAAA,EAActC,CAAA,EAAe2B,CAAA,EAAOtG,CAAA,EAAO+P,CAAA,IAAWvJ,CAAA,CAAY;MACxPxB,KAAA,EAAO+K;IACT,CAAC,CAAC;IAEIuC,CAAA,GAAuBF,EAAA,GAAa,IAAIpS,CAAA,GAAQ,IAAIoS,EAAA,GAAa,IAAIpS,CAAA,GAAQ;IAC7EuS,CAAA,GAAgB,aAAavS,CAAA,MAAWC,CAAA;IACxCuS,CAAA,GAAQ;MACZhI,SAAA,EAAA3G,CAAA;MACA4O,WAAA,EAAazB,CAAA,GAAgB,SAAYY,EAAA;MACzCc,YAAA,EAAc1B,CAAA,GAAgBU,EAAA,GAAmB;MACjDiB,OAAA,EAASpB,EAAA;MACTzO,KAAA,EAAO;QACLL,KAAA,EAAOuP,EAAA;QACPxP,MAAA,EAAQyP,EAAA;QACRrH,OAAA,EAAAuH,EAAA;QACAvJ,SAAA,EAAWwJ,EAAA,KAAe,IAAI,SAAYC,EAAA;QAC1C7G,SAAA,EAAWhE,CAAA,GAAS,UAAUA,CAAA,SAAe;QAC7CoL,UAAA,EAEAR,EAAA,GAAa,IAAI3V,CAAA,GAAa,GAAG8V,CAAA,WAAwBD,CAAA,MAA0BrS,CAAA,YAAkBqS,CAAA,MAA0BrS,CAAA,KAAW,GAAGsS,CAAA,aAA0BvS,CAAA,mBAAwBsS,CAAA,MAA0BrS,CAAA,KAAW;MACtO;IACF;EACA,OAAO4M,EAAA,CAACkB,EAAA;IAAWC,UAAA,EAAYvR,CAAA;IAAY+N,SAAA,EAAWtK,CAAA;IAAe4C,KAAA,EAAOiB,CAAA;IAAO0O,WAAA,EAAa,CAACzB,CAAA,IAAiBxM,CAAA,GAAWiN,EAAA,GAAkB;IAAWiB,YAAA,EAAc1B,CAAA,IAAiBxM,CAAA,GAAWuL,CAAA,IAAK0B,EAAA,CAAgB1B,CAAA,CAAE3M,OAAA,CAAQ,EAAE,IAAI;IACrOqH,QAAA,EAAAoC,EAAA,CAACoB,EAAA;MAAUnL,KAAA,EAAO;QAClB0I,SAAA,EAAW/O,CAAA,GAAa,SAAY,UAAUyV,EAAA,WAAuBA,EAAA,KAAiBJ,EAAA,KAAeC,EAAA;QACrGzP,IAAA,EAAM7F,CAAA,GAAaqV,EAAA,GAAa;QAChCzP,GAAA,EAAK5F,CAAA,GAAasV,EAAA,GAAa;QAC/Ba,UAAA,EAAYvL,CAAA,IAAWsI,EAAA,GAAQ,SAAYlT,CAAA,GAAa,QAAQ6V,CAAA,MAA0BrS,CAAA,SAAeqS,CAAA,MAA0BrS,CAAA,KAAWsS,CAAA;QAC9IM,UAAA,EAAYrO,CAAA,GAAW,cAAc;MACvC;MACKiG,QAAA,EAAA9N,CAAA,GAAMkQ,EAAA,CAACpB,EAAA,EAAApL,CAAA,CAAA5C,CAAA;QAAMiO,GAAA,EAAK/O,CAAA;QAAKgP,MAAA,EAAQ/E,CAAA;QAAQgF,MAAA,EAAQ/E;MAAA,GAAY2L,CAAA,GAApD;QAA2D3G,WAAA,EAAawF,EAAA;QAAiBvF,cAAA,EAAgB9H,CAAA;QAAgB+H,aAAA,EAAe9H;MAAA,EAAe,IAAKnH,CAAA,IAAUA,CAAA,CAAO;QACrLgW,KAAA,EAAAN,CAAA;QACAvN,KAAA,EAAOiN,EAAA;QACPhF,MAAA,EAAA1F;MACF,CAAC;IAAA,CACD;EAAA,CACF,CACJ;AAAA;AV9aA,SAASqC,SAAA,IAAAkJ,EAAA,QAAiB;AA0RjB,SACWzR,GAAA,IAAA0R,EAAA,EADXhJ,IAAA,IAAAiJ,EAAA;AA3SG,IAAMC,EAAA,GAAW,OAAOrV,EAAA,CAA0B2D,OAAA,IAAY,cAAc3D,EAAA,GAA4BA,EAAA,CAA0B2D,OAAA;EAE5H2R,EAAA,GAAU,OAAOrV,EAAA,CAAyB0D,OAAA,IAAY,cAAc1D,EAAA,GAA2BA,EAAA,CAAyB0D,OAAA;EAgBpI4R,EAAA,GAAe;IACnBhC,OAAA,EAAS;IACT1M,CAAA,EAAG;IACHC,CAAA,EAAG;IACHqI,OAAA,EAAS;IACThI,KAAA,EAAO;IACPJ,MAAA,EAAQ;IACRC,MAAA,EAAQ;IACRwO,EAAA,EAAI;IACJC,MAAA,EAAQ;IACRC,OAAA,EAAS;IACTC,OAAA,EAAS;IACTvO,KAAA,EAAO;IACPiI,MAAA,EAAQ;EACV;EACMuG,EAAA,GAAOV,EAAA,CAAU,CAAC,gCAAgC,CAAC;EACnDW,EAAA,GAAczV,EAAA,CAAW,CAACxB,CAAA,EAAOE,CAAA,KAAQ;IAC7C,IAAM;QACJgX,IAAA,EAAM7W,CAAA,GAAW;QACjB8W,IAAA,EAAAzW,CAAA,GAAO;QACPoR,KAAA,EAAOnR,CAAA;QACPoR,MAAA,EAAQ3O,CAAA;QACRgU,aAAA,EAAA/T,CAAA;QACAgU,YAAA,EAAA9T,CAAA,GAAe;QACf+T,WAAA,EAAA9T,CAAA,GAAc;QACd+T,YAAA,EAAA9T,CAAA,GAAe;QACf+T,aAAA,EAAApQ,CAAA;QACA2G,SAAA,EAAAzG,CAAA;QACAmQ,aAAA,EAAAlQ,CAAA;QACAmQ,cAAA,EAAAlQ,CAAA;QACAmQ,kBAAA,EAAAlQ,CAAA;QACA4H,cAAA,EAAA3H,CAAA;QACA4H,aAAA,EAAA3H,CAAA;QACAiQ,MAAA,EAAAhQ,CAAA;QACAiQ,KAAA,EAAOhQ,CAAA,GAAkB;QACzBiQ,aAAA,EAAehQ,CAAA;QACf+J,OAAA,EAAA9J,CAAA;QACAgQ,OAAA,EAAA/P,CAAA;QACAgQ,UAAA,EAAAhO,CAAA;QACAiO,eAAA,EAAAlO,CAAA;QACAkI,eAAA,EAAA3H,CAAA,GAAkB;MACpB,IAAItK,CAAA;MACEuK,CAAA,GAAa9I,EAAA,CAAQ,MACrB8S,CAAA,GAAsB,KACnBlU,CAAA,KAAa,QACnB,CAACA,CAAQ,CAAC;MACP,CAACmK,CAAA,EAAOtC,CAAW,IAAInH,EAAA,CAAY4V,EAAY;MAC/C,CAAClM,CAAA,EAAYP,CAAgB,IAAItI,EAAA,CAAS,CAAC;MAC3C;QACJ+S,OAAA,EAAAxK,CAAA;QACAlC,CAAA,EAAAmC,CAAA;QACAlC,CAAA,EAAAmC,CAAA;QACAkG,OAAA,EAAA5F,CAAA;QACApC,KAAA,EAAAqC,CAAA;QACAzC,MAAA,EAAA0C,CAAA;QACAzC,MAAA,EAAA0C,CAAA;QACA8L,EAAA,EAAA7L,CAAA,GAAKvH,CAAA;QACLqT,MAAA,EAAAhN,CAAA;QACAiN,OAAA,EAAArE,EAAA;QACAsE,OAAA,EAAArE,EAAA;QACAlK,KAAA,EAAAmK,EAAA;QACAlC,MAAA,EAAAmC,EAAA;QACAS,OAAA,EAAAR,EAAA;QACAW,QAAA,EAAAV;MACF,IAAItI,CAAA;MAEEuI,EAAA,GAAe/S,CAAA,CAAMkY,cAAA,CAAe,OAAO;MAC3ClF,CAAA,GAAQD,EAAA,GAAelL,CAAA,GAAkB4C,CAAA;MACzCwI,EAAA,GAAgBF,EAAA,GAAejL,CAAA,GAAwBoC,CAAA;MAEvDgJ,EAAA,GAAkBxR,EAAA,CAAOsR,CAAK;MAG9BG,EAAA,GAAcvL,CAAA,CAAO1E,MAAA;MACrBkQ,EAAA,GAAexL,CAAA,CAAOoL,CAAA;MAItBO,CAAA,GAAa,OAAO7S,CAAA,IAAS,YAAYA,CAAA,GAAOyS,EAAA,GAAczS,CAAA;MAG9D,CAACgT,EAAA,EAAaS,CAAA,EAAiBC,EAAc,IAAI5P,EAAA,CAAoBuD,CAAA,EAASiC,CAAU;IAC9FjH,EAAA,CAA0B,MAAM;MAE9B,IAAI2Q,EAAA,EAAa;QACfxL,CAAA,CAAY;UACVK,KAAA,EAAO;UACPN,CAAA,EAAG+K,CAAA,GAAQ,EAAE7L,UAAA,GAAa;QAC5B,CAAC,GACD+L,EAAA,CAAgBjT,OAAA,GAAU+S,CAAA;QAC1B;MACF;MAEA9K,CAAA,CAAYyO,EAAY,CAC1B;IAAA,GAAG,CAACjD,EAAW,CAAC;IAChB,IAAM;MACJyE,KAAA,EAAA9D,EAAA;MACA+D,WAAA,EAAA9D;IACF,IAAIvU,CAAA,CAAW;MACboY,MAAMtC,CAAA,EAAK;QACL/C,EAAA,IACFA,EAAA,CAAS,CAAC,GAEZ5K,CAAA,CAAY;UACV4O,OAAA,EAAS;UAETD,MAAA,EAAQ9L;QACV,CAAC,GACD/C,CAAA,CAAQ6N,CAAG,CACb;MAAA;MACAuC,YAAYvC,CAAA,EAAWC,CAAA,GAAU,IAAO;QAEtC,IAAMC,CAAA,GAAexC,CAAA,GAAaL,EAAA,CAAgBjT,OAAA,IAAW4V,CAAA,GAAY7C,CAAA,IAAS6C,CAAA;UAC5EvC,CAAA,GAAMH,EAAA,GAAc;UAGpBM,CAAA,GAAa1R,EAAA,CAAYgU,CAAA,EAAc,GAAGzC,CAAG;UAC7CxJ,CAAA,GAAmByJ,CAAA,GAAawC,CAAA,GAAetC,CAAA;UAE/CE,EAAA,GAAkBxM,UAAA,GAAa;QACrCe,CAAA,CAAY;UACVqI,OAAA,EAAS;UACTpI,MAAA,EAAQ;UACRC,MAAA,EAAQ;UACRH,CAAA,EAAG,CAAC0L,EAAA,GAAkB7J,CAAA;UACtBvB,KAAA,EAAOuN;QACT,CAAC,GACD5C,EAAA,CAAgBjT,OAAA,GAAU6J,CAAA;QAE1B,IAAM8J,EAAA,GAAgBiC,CAAA,GAAY,IAAIvC,CAAA,GAAMuC,CAAA,GAAYvC,CAAA,GAAM,IAAIuC,CAAA;QAC9D5C,EAAA,IACFA,EAAA,CAAcM,CAAA,GAAaK,EAAA,GAAgBH,CAAU,CAEzD;MAAA;IACF,CAAC;IACDzP,EAAA,CAAiB,WAAW6R,CAAA,IAAO;MACjC,IAAI9N,CAAA,EACF,QAAQ8N,CAAA,CAAInS,GAAA;QACV,KAAK;UACH4Q,EAAA,CAAYtB,CAAA,GAAQ,GAAG,EAAI;UAC3B;QACF,KAAK;UACHsB,EAAA,CAAYtB,CAAA,GAAQ,GAAG,EAAI;UAC3B;QACF,KAAK;UACHqB,EAAA,CAAM;UACN;MACJ;IAEJ,CAAC;IACD,SAASO,GAAeiB,CAAA,EAAW;MACjC,OAAOA,CAAA,GAAYxB,EAAA,CAAM,IAAInM,CAAA,CAAY;QACvC4O,OAAA,EAAS,CAACrE;MACZ,CAAC,CACH;IAAA;IACA,SAASoC,GAAA,EAAe;MACtB3M,CAAA,CAAY;QACVD,CAAA,EAAG,EAAEd,UAAA,GAAa,MAAoB6L,CAAA;QACtC7K,MAAA,EAAQ;QACRC,MAAA,EAAQ;QACRG,KAAA,EAAO,CAAAgC;MACT,CAAC,GACD2I,EAAA,CAAgBjT,OAAA,GAAU+S,CAC5B;IAAA;IACA,SAAS8B,GAAwBe,CAAA,EAASC,CAAA,EAAW;MACnD,IAAIhL,CAAA,KAAW,QAAW;QACxB5C,CAAA,CAAY;UACVqI,OAAA,EAAS;UACTnI,MAAA,EAAQyN,CAAA;UACRe,EAAA,EAAA7L,CAAA;UACAgM,OAAA,EAAS;QACX,CAAC;QACD;MACF;MACA,IAAMhB,CAAA,GAAUvS,CAAA,KAAgB,OAAO,OAAOzB,EAAA,CAAYyB,CAAA,EAAa,KAAMA,CAAA,GAAcvB,IAAA,CAAKgI,GAAA,CAAI4L,CAAA,GAAU/K,CAAM,IAAI,MAAM,CAAC;MAC/H5C,CAAA,CAAY;QACVqI,OAAA,EAAS;QACTnI,MAAA,EAAA0C,CAAA;QACA8L,EAAA,EAAId,CAAA,KAAc,KAAK,CAACvL,CAAA,GAAawL,CAAA,GAAUvS,CAAA;QAC/CuT,OAAA,EAASjB,CAAA,KAAc;MACzB,CAAC,CACH;IAAA;IACA,SAASd,GAA0Ba,CAAA,EAAS;MAC1C,IAAIhL,CAAA,KAAW,QAAW;QACxB3C,CAAA,CAAY;UACVqI,OAAA,EAAS;UACTpI,MAAA,EAAQ0N,CAAA;UACR5N,CAAA,EAAAmC,CAAA;UACA7B,KAAA,EAAO;QACT,CAAC;QACD;MACF;MACA,IAAMuN,CAAA,GAAsBD,CAAA,GAAUhL,CAAA;QAClCkL,CAAA,GAAgBD,CAAA;MAGhB,CAACvC,CAAA,KAAeP,CAAA,KAAU,KAAK8C,CAAA,GAAsB,KAAK9C,CAAA,KAAUG,EAAA,GAAc,KAAK2C,CAAA,GAAsB,OAC/GC,CAAA,GAAgBD,CAAA,GAAsB,IAExC5N,CAAA,CAAY;QACVqI,OAAA,EAAS;QACTpI,MAAA,EAAQ0C,CAAA;QACR5C,CAAA,EAAG,EAAEd,UAAA,GAAa,MAAoB+L,EAAA,CAAgBjT,OAAA,GAAU8V,CAAA;QAChExN,KAAA,EAAO;MACT,CAAC,CACH;IAAA;IACA,SAAS0M,GAAgBY,CAAA,EAAeC,CAAA,EAASC,CAAA,EAASzC,CAAA,EAAW;MAC/D/I,CAAA,KAEOsL,CAAA,KAAkB,MAC3Bb,EAAA,CAA0Bc,CAAO,IACxBD,CAAA,KAAkB,OAC3Bf,EAAA,CAAwBiB,CAAA,EAASzC,CAAS,EAE9C;IAAA;IACA,SAAS6B,GAAcU,CAAA,EAASC,CAAA,EAAS;MACvC,IAAMC,CAAA,GAAgBF,CAAA,IAAWhL,CAAA,WAAAA,CAAA,GAAUgL,CAAA;QACrCvC,CAAA,GAAgBwC,CAAA,IAAWhL,CAAA,WAAAA,CAAA,GAAUgL,CAAA;MAC3C,IAAIvL,CAAA,EAAY;QACdrC,CAAA,CAAY;UACVqI,OAAA,EAAS;QACX,CAAC;QACD;MACF;MACA,IAAIkD,CAAA,GAAY;MAEhB,IAAIsC,CAAA,GAAgB,KAAgB;QAClCzB,EAAA,CAAYtB,CAAA,GAAQ,CAAC;QACrB;MACF;MAEA,IAAI+C,CAAA,GAAgB,IAAe;QACjCzB,EAAA,CAAYtB,CAAA,GAAQ,CAAC;QACrB;MACF;MAGA,IAAMW,EAAA,GAAoB,EAFFxM,UAAA,GAAa,MAEQ+L,EAAA,CAAgBjT,OAAA;MACzDgC,IAAA,CAAKgI,GAAA,CAAIqJ,CAAa,IAAI,OAAOZ,EAAA,IAAWjP,CAAA,KAC9CgQ,CAAA,GAAY,IACZY,EAAA,CAAM,IAERnM,CAAA,CAAY;QACVqI,OAAA,EAAS;QACTtI,CAAA,EAAG0L,EAAA;QACHxL,MAAA,EAAQ;QACRC,MAAA,EAAQ;QACRwO,EAAA,EAAIpT,CAAA;QACJsT,OAAA,EAASrD,CAAA,GAAY,KAAOhB;MAC9B,CAAC,CACH;IAAA;IAEA,IAAM4C,EAAA,GAAiBpS,EAAA,CAAkB2E,CAAA,EAAQoL,CAAA,EAAOO,CAAU;IAClE,IAAI,CAACG,EAAA,EACH,OAAO;IAET,IAAM4B,EAAA,GAAwB7C,EAAA,IAAW,CAAC0B,CAAA;MAEpCoB,EAAA,GAAiBxN,CAAA,GAAUgD,CAAA,GAAKlB,CAAA;MAEhC2L,EAAA,GAAgB3C,EAAA,IAAWC,EAAA,IAAY;QAC3C6B,OAAA,EAAAxK,CAAA;QACAgN,IAAA,EAAM5D,CAAA;QACN2D,IAAA,EAAM3M,CAAA,GAAa,SAAS;QAC5BqN,MAAA,EAAAhQ,CAAA;QACAiQ,KAAA,EAAA7E,CAAA;QACAnB,OAAA,EAAA9J,CAAA;QACAgQ,OAAA,EAAS1D,EAAA;QACTyD,aAAA,EAAexD,EAAA;QACf+D,cAAA,EAAgB/C,EAAA;QAChBwB,OAAA,EAAS1D,EAAA,IAAgBA,EAAA,CAAa0D,OAAA;QACtCtO,KAAA,EAAAmK,EAAA;QACAlC,MAAA,EAAAmC,EAAA;QACAS,OAAA,EAAAR,EAAA;QACAW,QAAA,EAAAV;MACF;MAEM2C,EAAA,GAAe9U,CAAA,GAAUA,CAAA,CAAQwT,CAAe,IAAI;MACpDuB,EAAA,GAAgBtS,CAAA,GAAWA,CAAA,CAAS+Q,CAAe,IAAI5J,CAAA,GAAazI,EAAA,GAAoBD,EAAA;MACxF8T,EAAA,GAAahV,CAAA,GAAUA,CAAA,CAAQ,CAAC,IAAI,MAAe;MACnDiV,EAAA,GAAcxS,CAAA,GAAWA,CAAA,CAAS,CAAC,IAAIvB,EAAA;IAC7C,OAAO2U,EAAA,CAAChR,EAAA;MAAYF,GAAA,EAAKpF,CAAA;MAAK6N,SAAA,EAAWzG,CAAA;MAAWgR,IAAA,EAAK;MAASC,OAAA,EAAS1C,CAAA,IAAKA,CAAA,CAAEX,eAAA,CAAgB;MAAGjQ,SAAA,EAAW8E,CAAA;MACzGiE,QAAA,GAAAjG,CAAA,IAAWwO,EAAA,CAACnQ,EAAA,IAAc,GAC3BmQ,EAAA,CAACiC,EAAA;QAAWzK,SAAA,EAAWxG,CAAA;QAAelB,KAAA,EAAO;UAC/CoS,UAAA,EAAYlD,EAAA,GAAiB,iBAAiBA,EAAA,MAAoB;UAClEmD,wBAAA,EAA0BhD,EAAA;UAC1BiD,kBAAA,EAAoB,GAAGhO,CAAA,GAAU,IAAI8K,EAAA;UACrCmD,iBAAA,EAAmB,GAAGnD,EAAA;QACxB;QAAGoD,cAAA,EAAgBzE,EAAA;QAAgBtE,MAAA,EAAQ,CAAC;UAC1CnK,QAAA,EAAY;UACZE,IAAA,EAAQ;UACRD,GAAA,EAAO;UACPE,MAAA,EAAU;UACVC,MAAA,EAAU;UACVC,KAAA,EAAS;UACT,mBAAmB;UACnBgK,eAAA,EAAmB;UACnB8I,kBAAA,EAAsB;UACtBJ,wBAAA,EAA4B;UAC5BC,kBAAA,EAAsB;QACxB,IAAIxE,CAAA,KAAoB,KAAKA,CAAA,KAAoB,MAAM;UACrDhG,OAAA,EAAW;QACb,GAAGgG,CAAA,KAAoB,KAAK5S,EAAA,CAAK,CAAC,cAAc,eAAe,GAAGyV,EAAI,GAAG7C,CAAA,KAAoB,KAAK5S,EAAA,CAAK,CAAC,cAAc,uBAAuB,GAAGyV,EAAI,CAAC;MAAA,CAAG,GACnJ3B,EAAA,CAAe0D,GAAA,CAAI,CAAClD,CAAA,EAAMC,CAAA,KAAiB;QAE9C,IAAMC,CAAA,GAAY,CAACxC,CAAA,IAAcP,CAAA,KAAU,IAAIA,CAAA,GAAQ8C,CAAA,GAAe5C,EAAA,CAAgBjT,OAAA,GAAU,IAAI6V,CAAA;UAC9FxC,CAAA,GAAW,CAACuC,CAAA,CAAKhS,QAAA,KAAauP,EAAA,IAAgBA,EAAA,CAAa1P,GAAA,MAASmS,CAAA,CAAKnS,GAAA;QAC/E,OAAO6S,EAAA,CAAC9E,EAAA;UAA8EC,IAAA,EAAMmE,CAAA;UAAM/D,KAAA,EAAO2D,EAAA;UAAc1D,MAAA,EAAQ2D,EAAA;UAAe7D,OAAA,EAAS9J,CAAA;UAASqK,WAAA,EAAa6C,EAAA;UAAiB5C,SAAA,EAAW8C,EAAA;UAAejD,UAAA,EAAYA,CAAA,KAAM0C,EAAA,CAAevR,CAAa;UAAG8O,SAAA,EAAWA,CAAA,KAAMyC,EAAA,CAAerR,CAAY;UAAGgO,UAAA,EAAYhH,CAAA;UAAYyH,aAAA,EAAevK,CAAA;UAAoBsG,SAAA,EAAWvG,CAAA;UAAgBnB,KAAA,EAAO;YACnZ8H,OAAA,EAAS5D,CAAA,GAAa+I,CAAA,GAAW,IAAI,IAAI;YACzCzN,IAAA,EAAM,IAAIsB,UAAA,GAAa,MAAoB4O,CAAA;YAC3ChH,SAAA,EAAW,eAAe3E,CAAA,OAAQC,CAAA;YAClC8L,UAAA,EAAYxL,CAAA,IAAWC,CAAA,GAAQ,SAAY,aAAa+K,EAAA,MAAgBC,EAAA;UAC1E;UAAGvG,cAAA,EAAgB3H,CAAA;UAAgB4H,aAAA,EAAe3H,CAAA;UAAe2K,aAAA,EAAeuC,EAAA;UAActC,QAAA,EAAUe,CAAA;UAAUd,MAAA,EAAQtK,CAAA;UAAa+J,eAAA,EAAiB3H;QAAA,GALlIiJ,CAAA,GAAa,GAAGsC,CAAA,CAAKnS,GAAA,IAAOmS,CAAA,CAAK5G,GAAA,IAAO8G,CAAA,KAAcF,CAAA,CAAKnS,GAKwF,CAC3K;MAAA,CAAC,GACI0D,CAAA,IAAiBoO,EAAA,IAAiBe,EAAA,CAACyC,EAAA;QAAYC,MAAA,EAAQ,CAAC,CAAC3D,EAAA,IAAyB;UACrFnH,OAAA,EAAW;QACb,CAAC;QAAIH,QAAA,EAAA5G,CAAA,CAAcoO,EAAa;MAAA,CAAE;IAAA,CAChC,CACN;EAAA,CAAC;AACDyB,EAAA,CAAY1R,WAAA,GAAc;AAC1B,IAAO2T,EAAA,GAAQjC,EAAA;EACXuB,EAAA,GAAa9B,EAAA,CAAQ,KAAK,EAAEjR,UAAA,CAAW;IACzCC,WAAA,EAAa;EACf,CAAC,EAAE,CAAC,IAAI,EAAE,GAAG1F,CAAA,IAAKA,CAAA,CAAE8P,MAAM;EACtBkJ,EAAA,GAActC,EAAA,CAAQ,KAAK,EAAEjR,UAAA,CAAW;IAC1CC,WAAA,EAAa;EACf,CAAC,EAAE,CAAC,IAAI,EAAE,GAAG1F,CAAA,IAAKA,CAAA,CAAEiZ,MAAM;AJzPpB,SAEEpU,GAAA,IAAAsU,EAAA,EAFF5L,IAAA,IAAA6L,EAAA;AA5EN,IAAMC,EAAA,GAAmC;IACvCzB,MAAA,EAAQ,EAAC;IACT/F,OAAA,EAAS;IACTgG,KAAA,EAAO;EACT;EAEMyB,EAAA,GAAgB7Z,EAAA,CACpB,CAAC2D,CAAA,EAA4DzC,CAAA,KAAQ;IAApE,IAAA0C,CAAA,GAAAD,CAAA;MAAE;QAAA4K,QAAA,EAAAhO,CAAA;QAAU8X,aAAA,EAAA5X,CAAA;QAAeqZ,eAAA,EAAAlZ;MA3B9B,IA2BGgD,CAAA;MAA+C3C,CAAA,GAAA0E,EAAA,CAA/C/B,CAAA,EAA+C,CAA7C,YAAU,iBAAe;IAC1B,IAAM,CAACE,CAAA,EAAOC,CAAW,IAAIzC,EAAA,CAAYsY,EAAY;MAC/C5V,CAAA,GAAc5D,EAAA,CAAO,CAAC;MACtB;QAAE+X,MAAA,EAAAxQ,CAAA;QAAQyK,OAAA,EAAAvK,CAAA;QAASuQ,KAAA,EAAAtQ;MAAM,IAAIhE,CAAA;MAE7BiE,CAAA,GAAUzH,CAAA,CAAW;QACzByZ,OAAA,EAAS;UACP,OAAQ/V,CAAA,CAAYxD,OAAA,IAAW,CACjC;QAAA;QACAwZ,OAAO9R,CAAA,EAAqB;UAC1B,IAAMC,CAAA,GAAeR,CAAA,CAAOsS,SAAA,CAAU7R,CAAA,IAAKA,CAAA,CAAEnE,GAAA,KAAQiE,CAAA,CAAUjE,GAAG;UAClE,IAAIkE,CAAA,GAAe,IAAI;YACrB,IAAMC,CAAA,GAAaT,CAAA,CAAO9D,KAAA,CAAM;YAChCuE,CAAA,CAAW8R,MAAA,CAAO/R,CAAA,EAAc,GAAGD,CAAS,GAC5CnE,CAAA,CAAY;cACVoU,MAAA,EAAQ/P;YACV,CAAC;YACD;UACF;UACArE,CAAA,CAAYqE,CAAA,KAAS;YACnB+P,MAAA,EAAQ/P,CAAA,CAAK+P,MAAA,CAAOzU,MAAA,CAAOwE,CAAS;UACtC,EAAE,CACJ;QAAA;QACAiS,OAAOjS,CAAA,EAAa;UAClBnE,CAAA,CAAYoE,CAAA,IAAQ;YAClB,IAAMC,CAAA,GAAaD,CAAA,CAAKgQ,MAAA,CAAOiC,MAAA,CAAO9R,CAAA,IAAQA,CAAA,CAAKrE,GAAA,KAAQiE,CAAG;cACxDG,CAAA,GAAeD,CAAA,CAAW3E,MAAA,GAAS;YACzC,OAAO;cACL0U,MAAA,EAAQ/P,CAAA;cACRgQ,KAAA,EAAO5V,IAAA,CAAKE,GAAA,CAAI2F,CAAA,EAAcP,CAAK;YACrC,CACF;UAAA,CAAC,CACH;QAAA;QACAuS,KAAKnS,CAAA,EAAa;UAChB,IAAMC,CAAA,GAAeR,CAAA,CAAOsS,SAAA,CAAU7R,CAAA,IAAQA,CAAA,CAAKnE,GAAA,KAAQiE,CAAG;UAC9DnE,CAAA,CAAY;YACVqO,OAAA,EAAS;YACTgG,KAAA,EAAOjQ;UACT,CAAC,GACGvH,CAAA,IACFA,CAAA,CAAgB,IAAMuH,CAAA,EAAcrE,CAAK,CAE7C;QAAA;MACF,CAAC;MAEKkE,CAAA,GAAK1H,CAAA,CAAW;QACpBoY,MAAA,EAAQ;UACN3U,CAAA,CAAY;YACVqO,OAAA,EAAS;UACX,CAAC,GAEGxR,CAAA,IACFA,CAAA,CAAgB,IAAOkH,CAAA,EAAOhE,CAAK,CAEvC;QAAA;QACA6U,YAAYzQ,CAAA,EAAmB;UAC7BnE,CAAA,CAAY;YACVqU,KAAA,EAAOlQ;UACT,CAAC,GAEGzH,CAAA,IACFA,CAAA,CAAcyH,CAAA,EAAWpE,CAAK,CAElC;QAAA;MACF,CAAC;MAEKmE,CAAA,GAAQ/H,EAAA,CAAQ,MAAOqB,CAAA,CAAAA,CAAA,KAAKuC,CAAA,GAAUiE,CAAA,GAAY,CAACjE,CAAA,EAAOiE,CAAO,CAAC;IAExE,OACE4R,EAAA,CAACjY,EAAA,CAAa4Y,QAAA,EAAb;MAAsBC,KAAA,EAAOtS,CAAA;MAC3BsG,QAAA,GAAAhO,CAAA,EACDmZ,EAAA,CAACD,EAAA,EAAAlY,CAAA;QACCsE,GAAA,EAAK3E,CAAA;QACLiX,MAAA,EAAQxQ,CAAA;QACRyK,OAAA,EAASvK,CAAA;QACTuQ,KAAA,EAAOtQ,CAAA;QACPuQ,aAAA,EAAerQ,CAAA,CAAG2Q,WAAA;QAClBL,OAAA,EAAStQ,CAAA,CAAG0Q;MAAA,GACRzX,CAAA,CACN;IAAA,CACF,CAEJ;EAAA,CACF;AACA4Y,EAAA,CAAc/T,WAAA,GAAc;AAC5B,IAAO0U,EAAA,GAAQX,EAAA;A6B/Gf,SAASY,QAAA,IAAAC,EAAA,EAAUC,YAAA,IAAAC,EAAA,EAAcC,UAAA,IAAAC,EAAA,EAAYjY,SAAA,IAAAkY,EAAA,EAAW9a,OAAA,IAAA+a,EAAA,EAAS7a,MAAA,IAAA8a,EAAA,QAAc;ACD/E,SAAS9a,MAAA,IAAA+a,EAAA,QAAc;AAER,SAARC,GAA6D5a,CAAA,EAAa;EAC/E,IAAM;IAAEC,OAAA,EAAAC;EAAQ,IAAIya,EAAA,CAAO;IAAEzP,IAAA,EAAM;IAAO/K,EAAA,EAAI;EAA2B,CAAC;EAC1E,OAAKD,CAAA,CAAQgL,IAAA,KACXhL,CAAA,CAAQgL,IAAA,GAAO,IACfhL,CAAA,CAAQC,EAAA,GAAKH,CAAA,CAAS,IAEjBE,CAAA,CAAQC,EACjB;AAAA;AD8BA,IAAM0a,EAAA,GAAsCC,CAAC;IAC3C7L,GAAA,EAAAjP,CAAA;IACA2R,MAAA,EAAAzR,CAAA;IACA4W,OAAA,EAAAzW,CAAA;IACA2F,KAAA,EAAAtF,CAAA;IACAqF,MAAA,EAAApF,CAAA;IACAoa,QAAA,EAAA3X,CAAA,GAAW,CAAC,SAAS;IACrB4K,QAAA,EAAA3K;EACF,MAAM;IACJ,IAAME,CAAA,GAAegX,EAAA,CAA6BpZ,EAAY;MACxDqC,CAAA,GAAMoX,EAAA,CAAW,MAAMrX,CAAA,CAAaiW,MAAA,CAAO,CAAC;MAC5C/V,CAAA,GAAYiX,EAAA,CAAoB,IAAI;IAE1CF,EAAA,CAAU,MACD,MAAM;MACXjX,CAAA,CAAaqW,MAAA,CAAOpW,CAAG,CACzB;IAAA,GACC,EAAE;IAEL,SAAS4D,EAAiBI,CAAA,EAAmBC,CAAA,EAAyB;MACpE,IAAIpE,CAAA,EAAU;QACZ,IAAMqE,CAAA,GAAUrE,CAAA,CAAS2X,KAAA,CAAMxT,CAAA;QAC3BE,CAAA,IACFA,CAAA,CAAQD,CAAC,CAEb;MAAA;IACF;IAEA,IAAMH,CAAA,GAAKvH,CAAA,CAAW;QACpB4R,OAAOnK,CAAA,EAA0B;UAC/B,OAAOtH,CAAA,IAAUA,CAAA,CAAOsH,CAAK,CAC/B;QAAA;QACAsS,KAAKtS,CAAA,EAAmBC,CAAA,EAAqB;UAC3ClE,CAAA,CAAauW,IAAA,CAAKtW,CAAG,GACrB4D,CAAA,CAAiBI,CAAA,EAAWC,CAAC,CAC/B;QAAA;MACF,CAAC;MAEKF,CAAA,GAAiBkT,EAAA,CAAQ,MAAM;QACnC,IAAMjT,CAAA,GAAgC,CAAC;QACvC,OAAApE,CAAA,CAAS3C,OAAA,CAAQgH,CAAA,IAAa;UAC5BD,CAAA,CAASC,CAAA,IAAaH,CAAA,CAAGwS,IAAA,CAAKmB,IAAA,CAAK,MAAMxT,CAAS,CACpD;QAAA,CAAC,GACMD,CACT;MAAA,GAAG,EAAE;IAcL,OAZAgT,EAAA,CAAU,MAAM;MACdjX,CAAA,CAAakW,MAAA,CAAO;QAClB/V,GAAA,EAAAF,CAAA;QACAyL,GAAA,EAAAjP,CAAA;QACA4R,SAAA,EAAAnO,CAAA;QACAkO,MAAA,EAAQrK,CAAA,CAAGqK,MAAA;QACXmF,OAAA,EAAAzW,CAAA;QACA2F,KAAA,EAAAtF,CAAA;QACAqF,MAAA,EAAApF;MACF,CAAC,CACH;IAAA,GAAG,CAACX,CAAG,CAAC,GAEJqD,CAAA,GACK8W,EAAA,CAASe,IAAA,CAAKb,EAAA,CAAahX,CAAA,EAAUO,CAAA,CAAA5C,CAAA,KAAKuG,CAAA,GAAL;MAAqBjC,GAAA,EAAK7B;IAAU,EAAC,CAAC,IAE7E,IACT;EAAA;EAEO0X,EAAA,GAAQN,EAAA;AAAA,SAAAZ,EAAA,IAAAmB,aAAA,EAAAlC,EAAA,IAAAmC,WAAA,EAAAF,EAAA,IAAAL,SAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}